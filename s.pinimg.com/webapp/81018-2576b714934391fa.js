"use strict";(self.legacyJsonp=self.legacyJsonp||[]).push([["81018"],{248894:function(e,n,t){t.r(n);var r,a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BestPinCardAttribution_pin",selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[r={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"privacy",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[r,{alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageMediumUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSmallUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};a.hash="610a35d46510240eb58e262c1909310c",n.default=a},981838:function(e,n,t){t.r(n);var r,a,i,l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BestPinCardBody_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"lastRepinDate",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"datePublished",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:[a={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"CategorizedIngredientsMetadata",kind:"LinkedField",name:"categorizedIngredients",plural:!0,selections:[i={alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},{alias:null,args:null,concreteType:"ParsedIngredientMetadata",kind:"LinkedField",name:"ingredients",plural:!0,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"amt",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fromAggregatedData",storageKey:null},{args:null,kind:"FragmentSpread",name:"RecipeMetadata_recipe"}],storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null}],storageKey:null},r,{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryPinMetadataField",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"pinTitle",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PinJoin",kind:"LinkedField",name:"pinJoin",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"visualAnnotation",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"domain",storageKey:null},{alias:null,args:null,concreteType:"Embed",kind:"LinkedField",name:"embed",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"src",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null}],storageKey:null},i,{args:null,kind:"FragmentSpread",name:"usePinImageUrls_pin"},{args:null,kind:"FragmentSpread",name:"useNormalizePinData_pin"},{args:null,kind:"FragmentSpread",name:"BestPinCardAttribution_pin"}],type:"Pin",abstractKey:null};l.hash="81db65fd15680cc0281b801ed4a8cb94",n.default=l},258138:function(e,n,t){t.r(n);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"Descriptors_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null}],type:"Pin",abstractKey:null};r.hash="9d15639e8d9dd61426917dc218fbb3a6",n.default=r},85729:function(e,n,t){t.r(n);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"FlashlightSpotlightDots_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetStringifiedCommerceAuxData_pin"}],type:"Pin",abstractKey:null};r.hash="3a8409077905af94eb39568e4a5a57fc",n.default=r},781323:function(e,n,t){t.r(n);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"OneBar_oneBarModules",selections:[{alias:"entityId",args:null,kind:"ScalarField",name:"id",storageKey:null},{args:null,kind:"FragmentSpread",name:"OneBarModule_oneBarModules"}],type:"OneBarModule",abstractKey:null};r.hash="45cea1099e24f55ebce4abebdb411447",n.default=r},426344:function(e,n,t){t.r(n);var r,a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RecipeMetadata_recipe",selections:[{alias:null,args:null,concreteType:"AggregateRatingMetadata",kind:"LinkedField",name:"aggregateRating",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"bestRating",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ratingValue",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"reviewCount",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"CookTimes",kind:"LinkedField",name:"cookTimes",plural:!1,selections:[{alias:null,args:null,concreteType:"CookTime",kind:"LinkedField",name:"cook",plural:!1,selections:r=[{alias:null,args:null,kind:"ScalarField",name:"m",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"CookTime",kind:"LinkedField",name:"prep",plural:!1,selections:r,storageKey:null}],storageKey:null}],type:"RecipeMetadata",abstractKey:null};a.hash="12f77507a9fdec344b44b7e659fa5ac1",n.default=a},447963:function(e,n,t){t.r(n);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RelatedProductsImageContent_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null},{args:null,kind:"FragmentSpread",name:"Descriptors_pin"},{args:null,kind:"FragmentSpread",name:"VisualSearchCropper_pin"}],type:"Pin",abstractKey:null};r.hash="727c8ab2c1c256e3b4478a36890f92d6",n.default=r},579174:function(e,n,t){t.r(n);var r,a,i,l,o,s,u,c,d=(r=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],a=[{kind:"Variable",name:"pin",variableName:"pinId"}],i={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},l=[{kind:"Literal",name:"spec",value:"564x"}],c=[o={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],{fragment:{argumentDefinitions:r,kind:"Fragment",metadata:null,name:"RelatedProductsPageQuery",selections:[{alias:null,args:a,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[i,{args:null,kind:"FragmentSpread",name:"RelatedProductsPage_pin"}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:r,kind:"Operation",name:"RelatedProductsPageQuery",selections:[{alias:null,args:a,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[i,{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{alias:"image",args:l,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[o,s,u],storageKey:'images(spec:"564x")'},{alias:"imageSpec_564x",args:l,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:c,storageKey:'images(spec:"564x")'},{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:c,storageKey:'images(spec:"736x")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:c,storageKey:'images(spec:"orig")'},{alias:"imageSpec_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:c,storageKey:'images(spec:"474x")'},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:c,storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"2b17eb88c62c11f3966426f1a462291f771985a456e2b017a676cd695dd749fa",metadata:{},name:"RelatedProductsPageQuery",operationKind:"query",text:null}});d.hash="0f7b98a1f02dbf8528df0452aa26efd4",n.default=d},271128:function(e,n,t){t.r(n);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RelatedProductsPage_pin",selections:[{args:null,kind:"FragmentSpread",name:"VisualSearchPageWithPinData_pin"}],type:"Pin",abstractKey:null};r.hash="91d05676e413b7b47653c2f8fa609093",n.default=r},895622:function(e,n,t){t.r(n);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RelatedProductsUnifiedFeed_pin",selections:[{args:null,kind:"FragmentSpread",name:"VisualSearchMasonryGrid_pin"}],type:"Pin",abstractKey:null};r.hash="20c2c7f4ff982fb93a9608faa14f3ed2",n.default=r},60899:function(e,n,t){t.r(n);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UnauthCropperContainer_pin",selections:[{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"FlashlightSpotlightDots_pin"}],type:"Pin",abstractKey:null};r.hash="939d46d8644385a7918ed8179ce77a4c",n.default=r},854734:function(e,n,t){t.r(n);var r,a,i,l,o,s,u,c,d,p,f,m,g,y,h,v,b,S,x,_,w,k,P,j,I,F,T,C=(r=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],a=[{kind:"Variable",name:"pin",variableName:"pinId"}],i={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},s=[{kind:"Literal",name:"spec",value:"564x"}],p=[{kind:"Literal",name:"spec",value:"736x"}],f=[d={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],m=[{kind:"Literal",name:"spec",value:"474x"}],g=[{kind:"Literal",name:"spec",value:"236x"}],y={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},v=[{alias:null,args:null,kind:"ScalarField",name:"m",storageKey:null}],S={alias:null,args:null,concreteType:"OfferSummary",kind:"LinkedField",name:"offerSummary",plural:!1,selections:b=[i],storageKey:null},x={alias:"image236x",args:g,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:b,storageKey:'additionalImagesPerSpec(spec:"236x")'},_={alias:"image474x",args:m,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:b,storageKey:'additionalImagesPerSpec(spec:"474x")'},w={alias:"image564x",args:s,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:b,storageKey:'additionalImagesPerSpec(spec:"564x")'},k={alias:"image736x",args:p,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:b,storageKey:'additionalImagesPerSpec(spec:"736x")'},P={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null},I={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},F={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},T=[c],{fragment:{argumentDefinitions:r,kind:"Fragment",metadata:null,name:"UnauthDesktopFlashlightPageFetchDataPinQuery",selections:[{alias:null,args:a,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"UnauthDesktopFlashlightPageFetchData_pin"}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:r,kind:"Operation",name:"UnauthDesktopFlashlightPageFetchDataPinQuery",selections:[{alias:null,args:a,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},l,{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},o],storageKey:null},{alias:"imageSpec_564x",args:s,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[u,c,d],storageKey:'images(spec:"564x")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[u,c,d,i],storageKey:'images(spec:"orig")'},{alias:"imageSpec_736x",args:p,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:f,storageKey:'images(spec:"736x")'},{alias:"imageSpec_474x",args:m,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:f,storageKey:'images(spec:"474x")'},{alias:"imageSpec_236x",args:g,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:f,storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"lastRepinDate",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"datePublished",storageKey:null}],storageKey:null},l,o,{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:[y,{alias:null,args:null,concreteType:"CategorizedIngredientsMetadata",kind:"LinkedField",name:"categorizedIngredients",plural:!0,selections:[h,{alias:null,args:null,concreteType:"ParsedIngredientMetadata",kind:"LinkedField",name:"ingredients",plural:!0,selections:[y,{alias:null,args:null,kind:"ScalarField",name:"amt",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fromAggregatedData",storageKey:null},{alias:null,args:null,concreteType:"AggregateRatingMetadata",kind:"LinkedField",name:"aggregateRating",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"bestRating",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ratingValue",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"reviewCount",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"CookTimes",kind:"LinkedField",name:"cookTimes",plural:!1,selections:[{alias:null,args:null,concreteType:"CookTime",kind:"LinkedField",name:"cook",plural:!1,selections:v,storageKey:null},{alias:null,args:null,concreteType:"CookTime",kind:"LinkedField",name:"prep",plural:!1,selections:v,storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[i,y,S,{alias:null,args:null,concreteType:"Brand",kind:"LinkedField",name:"brand",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"signature",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ShippingInfo",kind:"LinkedField",name:"shippingInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"freeShippingPrice",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"freeShippingValue",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ProductVariantSet",kind:"LinkedField",name:"variantSet",plural:!1,selections:[{alias:null,args:null,concreteType:"DimensionMetadata",kind:"LinkedField",name:"dimensionMetadata",plural:!0,selections:[y,{alias:null,args:null,kind:"ScalarField",name:"values",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ProductVariant",kind:"LinkedField",name:"variants",plural:!0,selections:b,storageKey:null}],storageKey:null},x,_,w,k],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[y,S,{alias:null,args:null,kind:"ScalarField",name:"itemId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"itemSetId",storageKey:null},x,_,w,k],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:[P,j,I],storageKey:null},o,{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryPinMetadataField",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"pinTitle",storageKey:null}],storageKey:null},I,i],storageKey:null},{alias:null,args:null,concreteType:"PinJoin",kind:"LinkedField",name:"pinJoin",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"visualAnnotation",storageKey:null}],storageKey:null},F,{alias:null,args:null,kind:"ScalarField",name:"domain",storageKey:null},{alias:null,args:null,concreteType:"Embed",kind:"LinkedField",name:"embed",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"src",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null}],storageKey:null},h,{alias:"imageSpec_60x60",args:[{kind:"Literal",name:"spec",value:"60x60"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:T,storageKey:'images(spec:"60x60")'},{alias:"imageSpec_136x136",args:[{kind:"Literal",name:"spec",value:"136x136"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:T,storageKey:'images(spec:"136x136")'},{alias:"imageSpec_170x",args:[{kind:"Literal",name:"spec",value:"170x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:T,storageKey:'images(spec:"170x")'},{alias:"imageSpec_600x315",args:[{kind:"Literal",name:"spec",value:"600x315"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:T,storageKey:'images(spec:"600x315")'},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackedLink",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[F,y,{alias:null,args:null,kind:"ScalarField",name:"privacy",storageKey:null},c,I],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[F,j,{alias:null,args:null,kind:"ScalarField",name:"imageMediumUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSmallUrl",storageKey:null},P,I],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPdp",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isOosProduct",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isStaleProduct",storageKey:null},{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[{alias:null,args:null,concreteType:"PinCarouselSlot",kind:"LinkedField",name:"carouselSlots",plural:!0,selections:b,storageKey:null},I],storageKey:null},{alias:null,args:null,concreteType:"ProductMetadataV2",kind:"LinkedField",name:"productPinData",plural:!1,selections:[{alias:null,args:null,concreteType:"ItemMetadata",kind:"LinkedField",name:"items",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"additionalImagesLength",storageKey:null}],storageKey:null},I],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shoppingFlags",storageKey:null},{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isShopTheLook",storageKey:null},I],storageKey:null},I],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"4f98fda893ba1980532b9905b28f196e419e75b106a6485f5f63653917b888e1",metadata:{},name:"UnauthDesktopFlashlightPageFetchDataPinQuery",operationKind:"query",text:null}});C.hash="c1c702b23a1454b46f8e2fa9d8036257",n.default=C},887492:function(e,n,t){t.r(n);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UnauthDesktopFlashlightPageFetchData_pin",selections:[{args:null,kind:"FragmentSpread",name:"UnauthDesktopFlashlightPage_pin"}],type:"Pin",abstractKey:null};r.hash="01839fc3bcd9cdaf206873364167d157",n.default=r},136209:function(e,n,t){t.r(n);var r,a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UnauthDesktopFlashlightPage_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null}],storageKey:null},{alias:"imageSpec_564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:r=[{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null}],storageKey:'images(spec:"564x")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:r,storageKey:'images(spec:"orig")'},{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"},{args:null,kind:"FragmentSpread",name:"BestPinCardBody_pin"},{args:null,kind:"FragmentSpread",name:"UnauthCropperContainer_pin"}],type:"Pin",abstractKey:null};a.hash="93612431e09eadc717c32d98e8d91e06",n.default=a},292297:function(e,n,t){t.r(n);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualSearchCarousel_story",selections:[{alias:null,args:null,concreteType:"StoryAction",kind:"LinkedField",name:"action",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"contentIds",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"objects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:"storyId",args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyType",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{args:null,kind:"FragmentSpread",name:"CSSCarouselModule_story"}],type:"Story",abstractKey:null};r.hash="b1061aefab46af37d4c9716916386af2",n.default=r},441370:function(e,n,t){t.r(n);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualSearchContainer_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"},{args:null,kind:"FragmentSpread",name:"RelatedProductsImageContent_pin"},{args:null,kind:"FragmentSpread",name:"RelatedProductsUnifiedFeed_pin"}],type:"Pin",abstractKey:null};r.hash="3a9a747c3135f426fe0cf32ca9147a5d",n.default=r},911486:function(e,n,t){t.r(n);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualSearchCropper_pin",selections:[{alias:"image",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'images(spec:"564x")'},{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"},{args:null,kind:"FragmentSpread",name:"useSamSegmentation_pin"}],type:"Pin",abstractKey:null};r.hash="fbf2d3b93402a9dd783073db316c0f92",n.default=r},97004:function(e,n,t){t.r(n);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualSearchImageContainer_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:"image",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"564x")'},{args:null,kind:"FragmentSpread",name:"VisualSearchCropper_pin"},{args:null,kind:"FragmentSpread",name:"Descriptors_pin"}],type:"Pin",abstractKey:null};r.hash="8250aa2ed9c603023c2f2a226d0b9fbb",n.default=r},716635:function(e,n,t){t.r(n);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualSearchLayout_pin",selections:[{args:null,kind:"FragmentSpread",name:"VisualSearchImageContainer_pin"}],type:"Pin",abstractKey:null};r.hash="3c3f391c3bf9eec79c18ed9a3fe63800",n.default=r},261717:function(e,n,t){t.r(n);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualSearchPageWithPinData_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{alias:"image",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"564x")'},{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"},{args:null,kind:"FragmentSpread",name:"VisualSearchContainer_pin"},{args:null,kind:"FragmentSpread",name:"VisualSearchLayout_pin"}],type:"Pin",abstractKey:null};r.hash="ece11b62e2de551b92d24a2389316249",n.default=r},719962:function(e,n,t){t.r(n);var r,a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useNormalizePinData_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'images(spec:"orig")'},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:r=[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"OfferSummary",kind:"LinkedField",name:"offerSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:r,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackedLink",storageKey:null}],type:"Pin",abstractKey:null};a.hash="01a93671cde480baa2cfd8b781589acd",n.default=a},423540:function(e,n,t){t.r(n);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useSamSegmentation_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],type:"Pin",abstractKey:null};r.hash="50c726067ab8af873ed4afded90b7bed",n.default=r},17667:function(e,n,t){t.r(n),t.d(n,{default:function(){return w}});var r,a=t(387784),i=t(115821),l=t(653551),o=t(20256),s=t(938545),u=t(996822),c=t(320197),d=t(562400),p=t(24246),f=t(609252),m=t(936367),g=t(774838),y=t(902123),h=t(680811);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,n,t){var r;return(r=function(e,n){if("object"!=v(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!=v(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(n,"string"),(n="symbol"==v(r)?r:r+"")in e)?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function S(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,i,l,o=[],s=!0,u=!1;try{if(i=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=i.call(t)).done)&&(o.push(r.value),o.length!==n);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(u)throw a}}return o}}(e,n)||function(e,n){if(e){if("string"==typeof e)return x(e,n);var t=({}).toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?x(e,n):void 0}}(e,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var _=(void 0!==r||(r=t(781323)).hash&&"45cea1099e24f55ebce4abebdb411447"!==r.hash&&console.error("The definition of 'OneBar_oneBarModules' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r);function w(e){var n,t,r,v=e.center,x=e.hasProductFiltersApplied,w=e.hrefOverride,k=e.itemHeight,P=void 0===k?s.Lu:k,j=e.marginBottom,I=void 0===j?s.JC:j,F=e.oneBarModulesKey,T=e.oneBarModulesRest,C=e.onFilterButtonClick,A=e.paddingBottom,O=void 0===A?s.uS:A,R=e.paddingX,E=void 0===R?s.jf:R,D=e.variant,K=e.viewParameter,M=e.viewType,L=(0,a.useRef)(null),Z=null==(n=L.current)||null==(t=n.firstElementChild)||null==(r=t.firstElementChild)?void 0:r.firstElementChild,B=S((0,a.useState)(0),2),U=B[0],N=B[1],z=S((0,a.useState)(0),2),H=z[0],W=z[1],G=S((0,a.useState)(!1),2),V=G[0],Y=G[1],X=S((0,a.useState)(!1),2),q=X[0],$=X[1],J=S((0,a.useState)(0),2),Q=J[0],ee=J[1],en=(0,l.TH)(),et=(0,p.Z)(),er=(0,g.B)().isRTL,ea=(0,a.useRef)(!1),ei=new m.ZP,el=(0,i.useFragment)(_,F),eo=el&&[el]||T,es=void 0!==v&&v&&((null==Z?void 0:Z.clientWidth)||0)>=((null==Z?void 0:Z.scrollWidth)||0);(0,a.useEffect)(function(){var e=function(e){"Tab"===e.key&&(ea.current=!1)};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}},[]),(0,a.useEffect)(function(){N(0)},[en]),(0,a.useEffect)(function(){W((null==Z?void 0:Z.clientWidth)||0);var e=(0,d.Z)(function(){W((null==Z?void 0:Z.clientWidth)||0)},100,{maxWait:200});return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}},[Z]),(0,a.useEffect)(function(){var e=L.current;return e&&f.Z.addObstruction("top",e),function(){e&&f.Z.removeObstruction("top",e)}}),(0,a.useEffect)(function(){for(var e,n=(null==Z?void 0:Z.scrollWidth)||0,t=0,r=0;r<U;r+=1)t+=(null==Z||null==(e=Z.children[r])?void 0:e.offsetWidth)||0;var a=n-t,i=H>=n;i&&N(0),Y(U>0&&!i),$(a>H&&U<eo.length&&!i),ee(t)},[Z,U,eo.length,H,Q,er]);var eu=function(){U+3<eo.length?N(U+3):N(eo.length-1)},ec=function(){U-3>=0?N(U-3):N(0)},ed=(0,a.useRef)(null),ep=((0,u.e)()||{isFiltersDrawerFocused:!1}).isFiltersDrawerFocused,ef=S((0,a.useState)(ep),2),em=ef[0],eg=ef[1];return(0,a.useEffect)(function(){if(!ep&&em){var e;null==(e=ed.current)||e.focus()}eg(ep)},[ep,em]),eo.length>0&&(0,h.jsx)(y.q,{children:function(e){var n,t=e.hovered,r=e.onMouseEnter,a=e.onMouseLeave;return(0,h.jsxs)(o.xu,{ref:L,color:"default",dangerouslySetInlineStyle:{__style:{paddingBottom:O}},"data-root-margin":"search-one-bar","data-test-id":"scrollable-one-bar-root",marginBottom:I,onMouseEnter:r,onMouseLeave:a,position:"relative",children:[(0,h.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{overflowX:"clip"}},paddingX:E,position:"relative",children:(0,h.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:(b(n={},er?"right":"left","-".concat(Q,"px")),b(n,"transition","left 0.3s, right 0.3s"),n)},position:"relative",children:(0,h.jsx)(o.kC,{alignItems:"center",gap:{row:2,column:0},height:P,justifyContent:es?"center":void 0,children:eo.map(function(e,n){return(0,h.jsx)(o.xu,{ref:1===n?ed:void 0,onFocus:function(){ea.current||N(n)},onMouseDown:function(){return ea.current=!0},tabIndex:1===n?-1:void 0,children:(0,h.jsx)(c.Z,{hasProductFiltersApplied:x,hrefOverride:w,impressionsFramework:ei,index:n,module:e,oneBarModulesKey:null!=el?el:null,onFilterButtonClick:C,variant:D,viewParameter:K,viewType:M})},"OneBarModule-".concat(e.entityId||e.id||""))})})})}),t&&(0,h.jsxs)(o.xu,{alignItems:"center",bottom:!0,dangerouslySetInlineStyle:{__style:{background:(0,s.KC)(er,V,q),paddingBottom:s.uS,paddingLeft:s.EA,paddingRight:s.EA,pointerEvents:"none"}},"data-test-id":"one-bar-navigation-arrows",display:"flex",justifyContent:"between",left:!0,position:"absolute",right:!0,top:!0,children:[(0,h.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"auto"}},children:V&&(0,h.jsx)(o.hU,{accessibilityLabel:et._('Back', 'oneBar.navArrow.back', 'Accessibility laber for a button that navigates back to previous search guides'),bgColor:"white",icon:"arrow-back",onClick:ec})}),(0,h.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"auto"}},children:q&&(0,h.jsx)(o.hU,{accessibilityLabel:et._('Forward', 'oneBar.navArrow.forward', 'Accessibility laber for a button that navigates forward to see more search guides'),bgColor:"white",icon:"arrow-forward",onClick:eu})})]})]})}})}},424367:function(e,n,t){t.d(n,{Z:function(){return l}});var r=t(501010),a=t(774838),i=t(739405);function l(){var e=(0,a.B)().isAuthenticated,n=(0,i.ml)(),t=(0,r.Z)().checkExperiment;return{mWebCloseupRedesignEnabled:e&&n&&t("mweb_closeup_redesign").anyEnabled,mWebCloseupRedesignExpGroup:t("mweb_closeup_redesign").group}}},226966:function(e,n,t){t.d(n,{n:function(){return r}});var r=20},480610:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(575820);function a(e,n,t){var a=(0,r.mB)(e.search),i=parseFloat(null!=(u=a.x)?u:""),l=parseFloat(null!=(c=a.y)?c:""),o=parseFloat(null!=(d=a.w)?d:""),s=parseFloat(null!=(p=a.h)?p:"");if(function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.every(function(e){return e>=0&&e<=1})}(i,l,o,s)&&n&&t)return{x:Math.floor(i*n),y:Math.floor(l*t),w:Math.floor(o*n),h:Math.floor(s*t)};var u,c,d,p,f,m,g,y,h=parseInt(null!=(f=a.x)?f:"",10),v=parseInt(null!=(m=a.y)?m:"",10),b=parseInt(null!=(g=a.w)?g:"",10),S=parseInt(null!=(y=a.h)?y:"",10);return!function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.every(Number.isInteger)}(h,v,b,S)?null:{x:h,y:v,w:b,h:S}}},116980:function(e,n,t){t.d(n,{Pw:function(){return r},SB:function(){return a},ZP:function(){return l},x9:function(){return i}});var r=80,a=55,i=function(e){return"phone"===e?a:r};function l(e,n){return n?0:i(e)}},735571:function(e,n,t){t.d(n,{k:function(){return r.kH}});var r=t(400850),a=t(774838);n.Z=function(e){var n=e.dateFormatType,t=e.useUTC,i=e.value,l=(0,a.B)();return(0,r.ZP)(l.locale,i,n,void 0===t||t)}},171556:function(e,n,t){var r=t(387784);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,n){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e})(e,n)}function l(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(o=function(){return!!e})()}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,n,t){return(n=c(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function c(e){var n=function(e,n){if("object"!=a(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!=a(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==a(n)?n:n+""}n.Z=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");p.prototype=Object.create(e&&e.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),Object.defineProperty(p,"prototype",{writable:!1}),e&&i(p,e);var n,t,d=(n=o(),function(){var e,t=s(p);return e=n?Reflect.construct(t,arguments,s(this).constructor):t.apply(this,arguments),function(e,n){if(n&&("object"==a(n)||"function"==typeof n))return n;if(void 0!==n)throw TypeError("Derived constructors may only return object or undefined");return l(e)}(this,e)});function p(){var e;if(!(this instanceof p))throw TypeError("Cannot call a class as a function");for(var n=arguments.length,t=Array(n),a=0;a<n;a++)t[a]=arguments[a];return u(l(e=d.call.apply(d,[this].concat(t))),"ref",(0,r.createRef)()),u(l(e),"observer",null),u(l(e),"handleVisibilityChanged",function(n,t){e.props.onVisibilityChange(n,t)}),e}return t=[{key:"componentDidMount",value:function(){this.ref&&this.ref.current&&(this.observer=new window.IntersectionObserver(this.handleVisibilityChanged,this.props.options),this.observer.observe(this.ref.current))}},{key:"componentWillUnmount",value:function(){this.observer&&(this.observer.unobserve(this.ref.current),delete this.observer)}},{key:"render",value:function(){return this.props.children(this.ref)}}],function(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}(p.prototype,t),Object.defineProperty(p,"prototype",{writable:!1}),p}(r.Component)},583845:function(e,n,t){t.d(n,{Rq:function(){return r},Vf:function(){return a},jd:function(){return i},oy:function(){return l}});var r=function(e){return"ios"===e&&(window.devicePixelRatio||1)*window.screen.height==2436},a=28,i=function(e){return window.innerHeight>=748&&r(e)},l=function(){return"undefined"!=typeof window&&!!window.navigator&&(/iPad/.test(navigator.platform)||"MacIntel"===navigator.platform&&"ontouchend"in document&&Math.min(window.screen.width,window.screen.height)>=700)}},134136:function(e,n,t){t.r(n);var r=t(20256),a=t(806513),i=t(583845),l=t(873438),o=t(774838),s=t(680811);n.default=function(e){var n=e.children,t=e.dataLayoutShiftBoundaryId,u=e.hasFixedHeader,c=e.hasGutter,d=void 0===c||c,p=e.height,f=e.showKeychainError,m=e.useViewport,g=(0,o.B)(),y=(0,i.jd)(g.userAgent.platform)?i.Vf:0;return(0,s.jsx)(r.xu,{"data-layout-shift-boundary-id":t||"PageContainer",height:void 0!==m&&m?"calc(100vh - ".concat(y,"px)"):p,paddingX:d?a.D6:void 0,paddingY:void 0!==u&&u||void 0!==f&&f?void 0:3,children:(0,s.jsx)(l.C,{value:!!d,children:n})})}},816438:function(e,n,t){t.d(n,{r:function(){return r}});function r(e,n,t){return!!(e&&e.trim().length>0&&n&&!t)}},228121:function(e,n,t){t(115821);var r,a=t(183e3),i=t(24246),l=(void 0!==r||(r=t(719962)).hash&&"01a93671cde480baa2cfd8b781589acd"!==r.hash&&console.error("The definition of 'useNormalizePinData_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r);n.Z=function(e){var n,t,r,o=(0,i.Z)(),s=(0,a.Z)(l,e),u=s.trackedLink||s.link||s.imageSpec_orig&&s.imageSpec_orig.url,c=s.richMetadata,d=s.richSummary,p=o._('Saved from ', 'Closeup pin annotation', 'Closeup pin annotation');return c&&c.products&&c.products[0]&&c&&c.products[0].name&&c.products[0].offerSummary&&(p=o._('Product sold by ', 'pin annotation', 'pin annotation'),n=null==(t=(null==(r=c.products)?void 0:r[0])||void 0)?void 0:t.offerSummary),!n&&d&&d&&d.products&&d.products[0]&&d&&d.products[0].name&&d.products[0].offerSummary&&(p=o._('Product sold by ', 'pin annotation', 'pin annotation')),{pinLink:u,pinCreditPrefix:p,pinTitle:s.closeupUnifiedTitle,pinDescription:s.closeupUnifiedDescription,pinCategory:s.category}}},250026:function(e,n,t){function r(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function a(e,n,t){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(-1===n||-1===t||n===t)return e;var i=t+a,l=n+a;if(i<0||i>=e.length||l<0||l>=e.length)return e;for(var o=function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return r(e,void 0);var t=({}).toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?r(e,void 0):void 0}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),s=o[l],u=l<i?1:-1,c=l;c!==i;c+=u)o[c]=e[c+u];return o[i]=s,o}t.d(n,{Z:function(){return a}})},70625:function(e,n,t){n.Z=(0,t(387784).createContext)("undefined"!=typeof window?window:null)},112658:function(e,n,t){var r=t(387784),a=t(20256),i=t(400962),l=t(171556),o=t(774838),s=t(907049),u=t(49932),c=t(141483),d=t(623222),p=t(228612),f=t(680811);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function y(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?g(Object(t),!0).forEach(function(n){x(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):g(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function h(e,n){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e})(e,n)}function v(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(b=function(){return!!e})()}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,n,t){return(n=_(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function _(e){var n=function(e,n){if("object"!=m(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!=m(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==m(n)?n:n+""}var w=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&h(o,e);var n,t,i=(n=b(),function(){var e,t=S(o);return e=n?Reflect.construct(t,arguments,S(this).constructor):t.apply(this,arguments),function(e,n){if(n&&("object"==m(n)||"function"==typeof n))return n;if(void 0!==n)throw TypeError("Derived constructors may only return object or undefined");return v(e)}(this,e)});function o(e){var n;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");return x(v(n=i.call(this,e)),"componentWillUnmount",function(){n.unregisterComponent()}),x(v(n),"getContext",function(){var e=n.props,t=e.clientTrackingParams,r=e.component,a=e.element,i=e.objectId,l=e.timeSpentContext,o=e.view,s=e.viewParameter;return{view:o||(null==l?void 0:l.view),viewParameter:s||(null==l?void 0:l.viewParameter),component:r||(null==l?void 0:l.component),element:a,objectId:i||(null==l?void 0:l.objectId),clientTrackingParams:t||(null==l?void 0:l.clientTrackingParams),getParentUuid:function(){return n.getUuid()},getGrandparentUuid:function(){return n.getParentId()}}}),x(v(n),"getLoggerContext",function(){var e=y({},n.getContext());return delete e.getParentUuid,e}),x(v(n),"getParentId",function(){var e,t=n.props,r=t.timeSpentContext,a=t.shouldUseGrandparentId;if(void 0!==a&&a&&r&&r.getGrandparentUuid){var i=r.getGrandparentUuid();if(i)return i}return null==r||null==(e=r.getParentUuid)?void 0:e.call(r)}),x(v(n),"getUuid",function(){return n.state.timedPair?n.state.timedPair.uuid:void 0}),x(v(n),"getTimedPair",function(){return n.state.timedPair}),x(v(n),"setTimedPair",function(e,t){n.setState({timedPair:e},function(){t&&t()})}),x(v(n),"isRegistered",!1),x(v(n),"registerComponent",function(){n.props.timeSpentManager.registerComponent(v(n)),n.isRegistered=!0}),x(v(n),"unregisterComponent",function(){n.isRegistered&&(n.props.timeSpentManager.unregisterComponent(v(n)),n.isRegistered=!1)}),x(v(n),"handleVisibilityChange",function(e){var t=e[0].intersectionRatio,r=e[0].intersectionRect,a=r.bottom,i=r.left,l=r.right,o=r.top;t>0?n.registerComponent():0===t&&(0===a&&0===i&&0===l&&0===o?n.unregisterComponent():n.registerComponent())}),n.state={timedPair:new c.Z(n.getLoggerContext())},n}return t=[{key:"componentDidUpdate",value:function(e){!this.isRegistered||e.view===this.props.view&&e.viewParameter===this.props.viewParameter&&e.component===this.props.component&&e.element===this.props.element&&e.objectId===this.props.objectId&&(0,s.Z)(e.auxData,this.props.auxData)&&(0,s.Z)(e.viewData,this.props.viewData)||(this.unregisterComponent(),setTimeout(this.registerComponent))}},{key:"render",value:function(){var e=this.props,n=e.children,t=e.intersectionObserverBoxHeight;return(0,f.jsx)(d.$,{value:this.getContext(),children:(0,f.jsx)(l.Z,{onVisibilityChange:this.handleVisibilityChange,options:{threshold:0},children:function(e){return(0,f.jsx)(a.xu,{ref:e,height:null!=t?t:"100%",children:r.Children.only(n)})}})})}}],function(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_(r.key),r)}}(o.prototype,t),Object.defineProperty(o,"prototype",{writable:!1}),o}(r.Component);function k(e){var n,t=(0,i.ou)(),a=(0,d.a)(),l=(0,u.Z)(),s=(0,p.EQ)(),c=(0,o.B)().requestIdentifier,m=y({app_instance_id:(void 0===c?"":c).slice(0,8)},null!=(n=e.auxData)?n:{});return(0,r.useEffect)(function(){null==l||l.setHistoryStackContext(t)},[t,l]),(0,r.useEffect)(function(){null==l||l.setPins(null!=s?s:{})},[s,l]),l?(0,f.jsx)(w,y(y({},e),{},{auxData:m,timeSpentContext:a,timeSpentManager:l,children:e.children})):e.children}k.displayName="DeprecatedTimeSpent",n.Z=k},623222:function(e,n,t){t.d(n,{$:function(){return a},a:function(){return i}});var r=(0,t(213491).Z)("timeSpentContext"),a=r.Provider,i=r.getMaybe},141483:function(e,n,t){t.d(n,{h:function(){return s}});var r,a=t(347564),i=t(402164);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,n,t){return(n=function(e){var n=function(e,n){if("object"!=l(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!=l(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==l(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var s="undefined"!=typeof window&&window.performance&&window.performance.now?function(){return Math.floor((window.performance.timeOrigin+window.performance.now())*1e6)}:function(){return 1e6*Date.now()};Object.defineProperty(r=function e(n){var t=this;if(!(this instanceof e))throw TypeError("Cannot call a class as a function");o(this,"start",function(){return t.startTime=s(),t.startTime}),o(this,"end",function(){return t.endTime=s(),t.duration=t.startTime?t.endTime-t.startTime:null,t.duration});try{this.uuid=(0,a.Z)()}catch(e){this.uuid=(0,i.Z)()}n&&Object.assign(this,n)},"prototype",{writable:!1}),n.Z=r},383903:function(e,n,t){t.d(n,{Z:function(){return r}});function r(e){var n=e.cropArea,t=e.scaledWidth,r=e.scaledHeight;return{h:Math.floor((n.h||0)*r),w:Math.floor((n.w||0)*t),x:Math.floor((n.x||0)*t),y:Math.floor((n.y||0)*r)}}},958306:function(e,n,t){t.d(n,{Z:function(){return r}});function r(e){var n,t,r,a,i,l,o,s,u,c,d,p,f;return{h:null!=(n=null==e?void 0:e.h)?n:void 0,is_stela:null!=(t=null==e?void 0:e.isStela)?t:void 0,labelId:null!=(r=null==e?void 0:e.labelId)?r:void 0,label_x:null!=(a=null==e?void 0:e.labelX)?a:void 0,label_y:null!=(i=null==e?void 0:e.labelY)?i:void 0,label:null!=(l=null==e?void 0:e.label)?l:void 0,max_annotation_num_documents:null!=(o=null==e?void 0:e.maxAnnotationNumDocuments)?o:void 0,score:null!=(s=null==e?void 0:e.score)?s:void 0,show_on_closeup:null!=(u=null==e?void 0:e.showOnCloseup)?u:void 0,title:null!=(c=null==e?void 0:e.title)?c:void 0,w:null!=(d=null==e?void 0:e.w)?d:void 0,x:null!=(p=null==e?void 0:e.x)?p:void 0,y:null!=(f=null==e?void 0:e.y)?f:void 0}}},518112:function(e,n,t){t.r(n),t.d(n,{default:function(){return C}});var r=t(387784),a=t(653551),i=t(20256),l=t(230201),o=t(59111),s=t(575820),u=t(383903),c=t(371266),d=t(674610),p=t(893957),f=t(501010),m=t(312321),g=t(680811);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function v(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?h(Object(t),!0).forEach(function(n){var r,a;r=n,a=t[n],(r=function(e){var n=function(e,n){if("object"!=y(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!=y(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==y(n)?n:n+""}(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):h(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var b=Math.ceil(40),S=b+1;function x(e){var n,t=e.isHidden,a=e.isObjectLevelCrop,l=e.isSelected,s=e.maskHeight,u=e.maskId,c=e.maskUrl,p=e.maskWidth,y=e.maskX,h=e.maskY,x=(0,f.Z)().checkExperiment,_="enabled_once"===x("web_cutout_glow").group,w={insetIntensity:""===(n=x("web_cutout_glow_inset").group.split("_"))[0]||Number.isNaN(Number(n[0]))?void 0:Number(n[0]),debugMode:n.includes("debug"),showHiddenCutoutsinDebug:n.includes("all")},k=w.insetIntensity,P=w.debugMode,j=w.showHiddenCutoutsinDebug,I="glow-sweep-".concat(u),F=Math.round(.35*s),T=4*F,C=s/2+F/2,A=a?.25:.5,O=(0,m.Z)({debugMode:P,insetIntensity:k,kind:"glow",maskHeight:s,maskId:u,maskUrl:c,maskWidth:p}),R=O.svgElement,E=O.maskStyle;return(0,g.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:v(v({left:y,top:h},E),{},{visibility:l?"hidden":"visible"})},"data-test-id":"cutout-item",height:s,id:d.Ii,position:"absolute",width:p,children:(!t||j)&&(0,g.jsxs)(r.Fragment,{children:[R,(0,g.jsx)(o.Z,{unsafeCSS:"\n          @keyframes ".concat(I," {\n            0%                    { mask-position: 0 -").concat(C,"px; opacity: ").concat(A,"; }\n            ").concat(b,"% { mask-position: 0  ").concat(C,"px; opacity: ").concat(A,"; }\n            ").concat(S,"%      { mask-position: 0  ").concat(C,"px; opacity: 0; }\n            100%                  { mask-position: 0 -").concat(C,"px; opacity: 0; }\n          }")}),(0,g.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"none",animation:_?"".concat(I," ").concat(5,"s linear forwards"):"".concat(I," ").concat(5,"s linear infinite"),animationDelay:"1s",maskImage:"\n              radial-gradient(\n                ellipse ".concat(T,"px ").concat(F,"px at center,\n                white 0%,\n                white 15%,\n                rgba(255, 255, 255, 0.9) 30%,\n                rgba(255, 255, 255, 0.7) 45%,\n                rgba(255, 255, 255, 0.5) 55%,\n                rgba(255, 255, 255, 0.3) 65%,\n                rgba(255, 255, 255, 0.15) 72%,\n                rgba(255, 255, 255, 0.06) 80%,\n                rgba(255, 255, 255, 0.01) 90%,\n                transparent 100%\n              )"),maskPosition:"0 -".concat(C,"px"),maskSize:"100% 100%",maskRepeat:"no-repeat"}},"data-test-id":"cutout-glow-oval",height:"100%",opacity:0,width:"100%",children:(0,g.jsx)(i.Ee,{alt:"cutout-glow-background-image",color:"white",fetchPriority:"high",fit:"cover",loading:"eager",naturalHeight:s,naturalWidth:p,role:"presentation",src:a?void 0:"https://s.pinimg.com/webapp/cutout-glow-background-c870a580.jpg"})})]})})}var _=t(391746);function w(e){var n=e.isHovered,t=e.isObjectLevelCrop,a=e.isPinLevelCrop,i=e.isSelected,o=e.mask,s=e.pinImageHeight,u=e.pinImageUrl,c=e.pinImageWidth,d=e.viewParameter,f=e.viewType,m=(0,l.u)().logContextEvent,y=o.id,h=o.isHidden,v=o.maskHeight,b=o.maskUrl,S=o.maskWidth,w=o.maskX,k=o.maskY;return(0,p.Z)(function(){h||m({event_type:120,element:14154,view_parameter:d,view_type:f,aux_data:{commerce_data:JSON.stringify({pin_has_cutout:!0})}})}),(0,g.jsxs)(r.Fragment,{children:[(0,g.jsx)(_.Z,{imageHeight:s,imageUrl:u,imageWidth:c,isHovered:n,isPinLevelCrop:a,isSelected:i,maskHeight:v,maskId:y,maskUrl:b,maskWidth:S,maskX:w,maskY:k}),(0,g.jsx)(x,{isHidden:h,isObjectLevelCrop:t,isSelected:i,maskHeight:v,maskId:y,maskUrl:b,maskWidth:S,maskX:w,maskY:k})]})}var k=t(225580);function P(e,n,t,r,a,i,l){try{var o=e[i](l),s=o.value}catch(e){return void t(e)}o.done?n(s):Promise.resolve(s).then(r,a)}function j(e){return function(){var n=this,t=arguments;return new Promise(function(r,a){var i=e.apply(n,t);function l(e){P(i,r,a,l,o,"next",e)}function o(e){P(i,r,a,l,o,"throw",e)}l(void 0)})}}function I(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,i,l,o=[],s=!0,u=!1;try{if(i=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=i.call(t)).done)&&(o.push(r.value),o.length!==n);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(u)throw a}}return o}}(e,n)||function(e,n){if(e){if("string"==typeof e)return F(e,n);var t=({}).toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?F(e,n):void 0}}(e,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function T(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function C(e){var n,t,p,m,y,h,v,b,S,x,_,P,F,C,A,O,R,E,D,K,M,L,Z,B,U,N=e.bitmapMasks,z=e.hoveredCutoutIndex,H=e.imageContainerX,W=e.imageContainerY,G=e.onCropperUpdate,V=e.pinImageHeight,Y=e.pinImageUrl,X=e.pinImageWidth,q=e.selectedCutoutIndex,$=e.setHoveredCutoutIndex,J=e.setSelectedCutoutIndex,Q=e.trafficSource,ee=e.viewParameter,en=e.viewType,et=(0,l.u)().logContextEvent,er=(0,a.TH)(),ea=(0,a.s0)(),ei=(0,r.useRef)(null),el=function(e){if(Array.isArray(e))return e}(n=(0,r.useState)(!1))||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,i,l,o=[],s=!0,u=!1;try{for(i=(t=t.call(e)).next;!(s=(r=i.call(t)).done)&&(o.push(r.value),2!==o.length);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(u)throw a}}return o}}(n,2)||function(e,n){if(e){if("string"==typeof e)return T(e,2);var t=({}).toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?T(e,2):void 0}}(n,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),eo=el[0],es=el[1],eu=(0,s.mB)(er.search),ec=eu.w,ed=eu.h,ep=eu.cropSource,ef=(0,r.useMemo)(function(){return Number(ec)===X&&Number(ed)===V||void 0===ec&&void 0===ed},[ed,V,X,ec]),em=(0,r.useMemo)(function(){return 9===Number(ep)},[ep]),eg=(p=(t=I((0,r.useState)([]),2))[0],m=t[1],h=(y=I((0,r.useState)([]),2))[0],v=y[1],S=(b=I((0,r.useState)(!1),2))[0],x=b[1],(0,r.useEffect)(function(){var e,n=N.reduce(function(e,n){var t=(0,k.Fk)(n,X,V);return t&&(e.maskData.push(t.maskData),e.urls.push(t.maskUrl)),e},{maskData:[],urls:[]}),t=n.maskData,r=n.urls;if(v(t),0===t.length)return m([]),x(!1),function(){return r.forEach(function(e){return URL.revokeObjectURL(e)})};var a=!1;return x(!0),(e=j(regeneratorRuntime.mark(function e(){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map(function(){var e=j(regeneratorRuntime.mark(function e(n){var t,r,i,l,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(t=document.createElement("canvas")).getContext("2d",{willReadFrequently:!0})){e.next=4;break}return e.abrupt("return",null);case 4:return i=n.maskWidth,l=n.maskHeight,t.width=i,t.height=l,e.prev=7,(o=new Image).crossOrigin="anonymous",e.abrupt("return",new Promise(function(e){o.onload=function(){if(a)return void e(null);r.drawImage(o,0,0,i,l),e(r)},o.onerror=function(){return e(null)},o.src=n.maskUrl}));case 13:return e.prev=13,e.t0=e.catch(7),e.abrupt("return",null);case 16:case"end":return e.stop()}},e,null,[[7,13]])}));return function(n){return e.apply(this,arguments)}}()),e.next=3,Promise.all(n);case 3:r=e.sent,a||(m(r),x(!1));case 5:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)})(),function(){a=!0,r.forEach(function(e){return URL.revokeObjectURL(e)})}},[N,X,V]),{cutoutContexts:p,maskData:h,isLoading:S}),ey=eg.cutoutContexts,eh=eg.maskData,ev=(P=(_={maskData:eh,cutoutContexts:ey,imageContainerX:H,imageContainerY:W,setHoveredCutoutIndex:$,viewParameter:ee,viewType:en}).maskData,F=_.cutoutContexts,C=_.imageContainerX,A=_.imageContainerY,O=_.setHoveredCutoutIndex,R=_.viewParameter,E=_.viewType,D=(0,l.u)().logContextEvent,M=(K=(0,(0,f.Z)().checkExperiment)("web_cutout_hit_detection_cache")).anyEnabled,Z="control"===(L=K.group)?1:"employees"===L?5:Number(L.split("_")[1]||5),B=(0,r.useRef)(new Map),(0,r.useEffect)(function(){B.current.clear()},[P]),U=(0,r.useCallback)(function(e,n){e!==n&&(O(e),null!==e&&D({event_type:105,element:14154,view_parameter:R,view_type:E,aux_data:{commerce_data:JSON.stringify({pin_has_cutout:!0})}}))},[O,D,R,E]),(0,r.useCallback)(function(e,n,t){var r,a=M?"".concat(Math.round(e.clientX/Z)*Z,",").concat(Math.round(e.clientY/Z)*Z):"";if(M&&B.current.has(a))return void U(null!=(r=B.current.get(a))?r:null,n);for(var i=e.clientX-C,l=e.clientY-A,o=P.length-1;o>=0;o-=1){var s=P[o],u=F[o];if(u&&s&&o!==t&&(0,k.Of)(i,l,s)){var c=i-s.maskX,d=l-s.maskY;if((0,k.Bt)(u,c,d)){M&&B.current.set(a,o),U(o,n);return}}}M&&B.current.set(a,null),U(null,n)},[M,F,C,A,P,Z,U])),eb=(0,r.useCallback)(function(){return es(!1)},[]),eS=(0,r.useCallback)(function(e){(e.movementX||e.movementY)&&es(!0),0===e.buttons?ev(e,z,q):null==$||$(null)},[ev,z,q,$]),ex=(0,r.useCallback)(function(e){return ev(e,z,q)},[ev,z,q]),e_=(0,r.useCallback)(function(){return $(null)},[$]),ew=(0,r.useCallback)(function(){if(eo||null===z)return void es(!1);if($(null),J(z),eh[z]){var e=eh[z],n=e.maskXRatio,t=e.maskYRatio,r=e.maskWidthRatio,a=e.maskHeightRatio,i=(0,u.Z)({cropArea:{x:n,y:t,w:r,h:a},scaledWidth:X,scaledHeight:V});if(G)G({cropArea:i,cropSource:9}),et({event_type:101,element:14154,view_parameter:ee,view_type:en});else{var l=(0,c.Z)({cropArea:i,cropSource:9,trafficSource:Q});window.location.search!==l&&(et({event_type:101,element:14154,view_parameter:ee,view_type:en,aux_data:{commerce_data:JSON.stringify({pin_has_cutout:!0})}}),ea("".concat(window.location.pathname).concat(l),{replace:!0}))}}},[eo,z,$,J,eh,X,V,G,Q,et,ee,en,ea]);return(0,r.useEffect)(function(){var e=ei.current;if(e)return e.addEventListener("mousedown",eb),e.addEventListener("mousemove",eS),e.addEventListener("mouseup",ex),e.addEventListener("mouseleave",e_),e.addEventListener("click",ew),function(){e.removeEventListener("mousedown",eb),e.removeEventListener("mousemove",eS),e.removeEventListener("mouseup",ex),e.removeEventListener("mouseleave",e_),e.removeEventListener("click",ew)}},[eb,eS,ex,e_,ew]),(0,g.jsxs)(i.xu,{ref:ei,bottom:!0,dangerouslySetInlineStyle:{__style:{cursor:"number"==typeof z?"pointer":"auto"}},"data-bitmaps-ready":eh.length>0,"data-test-id":"cutouts-container",left:!0,position:"absolute",right:!0,role:"none",top:!0,children:[(0,g.jsx)(o.Z,{unsafeCSS:d.iF}),eh.map(function(e,n){return(0,g.jsx)(w,{isHovered:z===n,isObjectLevelCrop:em,isPinLevelCrop:ef,isSelected:q===n,mask:e,pinImageHeight:V,pinImageUrl:Y,pinImageWidth:X,viewParameter:ee,viewType:en},e.id)})]})}},509307:function(e,n,t){t.d(n,{Z:function(){return r}});function r(e,n){for(var t=e.x,r=e.y,a=!1,i=0,l=n.length-1;i<n.length;){var o=n[i],s=o.x,u=o.y,c=n[l],d=c.x,p=c.y;u>r!=p>r&&t<(d-s)*(r-u)/(p-u)+s&&(a=!a),l=i,i+=1}return a}},415349:function(e,n,t){t.d(n,{Z:function(){return v}});var r,a=t(387784);t(115821);var i=t(877762);function l(e,n,t,r,a,i,l){try{var o=e[i](l),s=o.value}catch(e){return void t(e)}o.done?n(s):Promise.resolve(s).then(r,a)}function o(){var e;return e=regeneratorRuntime.mark(function e(n){var t,r,a,l,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.imageBlob,r=n.boundingBox,(a=new FormData).append("image",t),r&&a.append("bounding_box",r),l=(0,i.Z)({url:"/camera-sam-segmentation/",type:"PUT",data:a}).promise,e.next=7,l;case 7:return o=e.sent,e.next=10,o.json();case 10:return s=e.sent.responsePayload.resourceResponse.data,e.abrupt("return",s);case 13:case"end":return e.stop()}},e)}),(o=function(){var n=this,t=arguments;return new Promise(function(r,a){var i=e.apply(n,t);function o(e){l(i,r,a,o,s,"next",e)}function s(e){l(i,r,a,o,s,"throw",e)}o(void 0)})}).apply(this,arguments)}function s(e,n,t,r,a,i,l){try{var o=e[i](l),s=o.value}catch(e){return void t(e)}o.done?n(s):Promise.resolve(s).then(r,a)}function u(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var c=t(183e3),d=t(661376),p=t(198861);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function g(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?m(Object(t),!0).forEach(function(n){var r,a;r=n,a=t[n],(r=function(e){var n=function(e,n){if("object"!=f(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!=f(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==f(n)?n:n+""}(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var y=(void 0!==r||(r=t(423540)).hash&&"50c726067ab8af873ed4afded90b7bed"!==r.hash&&console.error("The definition of 'useSamSegmentation_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r),h=function(e){return JSON.stringify({x:Math.min(Math.max(e.x||0,0),1),y:Math.min(Math.max(e.y||0,0),1),width:Math.min(Math.max(e.w||1,0),1),height:Math.min(Math.max(e.h||1,0),1)})};function v(e){var n,t,r,i,l,f,m,v,b,S=e.pinKey,x=e.isVisualSearch,_=e.boundingBox,w=e.imageBlob,k=e.isCollage,P=e.isCustomImage,j=void 0!==P&&P,I=(0,c.Z)(y,S),F=(0,p.Z)(),T=(0,a.useMemo)(function(){return g({client:"visual_cutout",cleanup_masks:!0},_&&{bounding_box:h(_),use_gss:!1,write_to_galaxy:!1})},[_]),C=(0,d.Z)(I&&I.entityId?{name:"ApiResource",options:{url:"/v3/pins/".concat(I.entityId,"/segmentation/sam/"),data:g(g({},void 0!==x&&x&&F),void 0!==k&&k&&T)}}:null).data,A=(t=(n={imageBlob:w,isCustomImage:j,boundingBox:_?h(_):void 0}).imageBlob,i=void 0!==(r=n.isCustomImage)&&r,l=n.boundingBox,v=(m=function(e){if(Array.isArray(e))return e}(f=(0,a.useState)(null))||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,i,l,o=[],s=!0,u=!1;try{for(i=(t=t.call(e)).next;!(s=(r=i.call(t)).done)&&(o.push(r.value),2!==o.length);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(u)throw a}}return o}}(f,2)||function(e,n){if(e){if("string"==typeof e)return u(e,2);var t=({}).toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?u(e,2):void 0}}(f,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],b=m[1],(0,a.useEffect)(function(){var e,n;(e=regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i&&t)){e.next=5;break}return e.next=3,function(e){return o.apply(this,arguments)}({imageBlob:t,boundingBox:l});case 3:b(e.sent);case 5:case"end":return e.stop()}},e)}),n=function(){var n=this,t=arguments;return new Promise(function(r,a){var i=e.apply(n,t);function l(e){s(i,r,a,l,o,"next",e)}function o(e){s(i,r,a,l,o,"throw",e)}l(void 0)})},function(){return n.apply(this,arguments)})()},[i,t,l]),v);return j?A:C}},471310:function(e,n,t){t.d(n,{Z:function(){return c}});var r=t(20256),a=t(230201),i=t(24246),l=t(387784);function o(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,i,l,o=[],s=!0,u=!1;try{if(i=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=i.call(t)).done)&&(o.push(r.value),o.length!==n);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(u)throw a}}return o}}(e,n)||function(e,n){if(e){if("string"==typeof e)return s(e,n);var t=({}).toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?s(e,n):void 0}}(e,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var u=t(680811);function c(e){var n,t,s,c,d,p,f,m,g,y,h,v,b,S,x=e.auxData,_=e.enabled,w=e.onPull,k=e.refreshing,P=e.viewParameter,j=(0,i.Z)(),I=(0,a.u)().logContextEvent,F=4079===P,T=(t=(n={enabled:_,onSelect:function(e){var n=e.pullDistance,t=e.resetState;n>=120&&(I({view_type:1,event_type:158,view_parameter:F?4079:92,aux_data:F?x:{}}),w()),t()},refreshing:k}).enabled,s=n.onSelect,c=n.refreshing,d=(0,l.useRef)(null),f=(p=o((0,l.useState)(0),2))[0],m=p[1],y=(g=o((0,l.useState)(!1),2))[0],h=g[1],b=(v=c?0:f/250)>0,S=function(){h(!1),m(0)},(0,l.useEffect)(function(){if(t){var e=function(e){window.scrollY<=0&&!c&&(d.current=e.touches[0].clientY)},n=function(e){if(d.current){var n=(e.touches[0].clientY-d.current)*.5;n>0&&(m(n),e.preventDefault())}},r=function(){d.current&&(h(!0),s({pullDistance:f,position:v,resetState:S}),d.current=null)};return window.addEventListener("touchstart",e),window.addEventListener("touchmove",n,{passive:!1}),window.addEventListener("touchend",r),function(){window.removeEventListener("touchstart",e),window.removeEventListener("touchmove",n),window.removeEventListener("touchend",r)}}},[t,s,f,c,v]),{pullDistance:f,hasStartPulling:b,position:v,startYRefCurrent:d.current,PULL_MENU_DISTANCE:250,isExecuted:y}),C=T.position,A=T.startYRefCurrent,O=T.pullDistance,R=Math.min(C,1),E=j._('Pull to refresh', 'Pull down on grid to refresh items', 'Pull down on grid to refresh items');return(0,u.jsx)(r.xu,{children:_&&(0,u.jsx)(r.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{opacity:R,transition:null===A?"all .3s ease-out":void 0}},display:"flex",height:120*C,justifyContent:"center",children:(0,u.jsx)(r.JO,{accessibilityLabel:E,icon:A&&O<120?"arrow-circle-down":"arrow-circle-up",size:40})})})}},989045:function(e,n,t){var r=t(20256),a=t(739405),i=t(680811);n.Z=function(){var e=(0,a.HG)();return(0,i.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:e?{paddingTop:"0px",paddingBottom:"0px",marginTop:"0px",marginBottom:"0px"}:{paddingTop:"4px",paddingBottom:"4px",marginTop:"-4px",marginBottom:"-4px"}},"data-test-id":"initial-feed-fetch"})}},838855:function(e,n,t){t.d(n,{G:function(){return b},Z:function(){return S}});var r=t(387784),a=t(20256),i=t(261954),l=t(309947),o=t(806513),s=t(906127),u=t(70625),c=t(739405),d=t(893957),p=t(596663),f=t(471310),m=t(989045),g=t(759302),y=t(589247),h=t(680811);function v(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var b=25;function S(e){var n,t=e.align,b=e.customLayoutType,S=e.getColumnSpanConfig,x=e.getResponsiveModuleConfigForSecondItem,_=e.emptyState,w=e.feedItems,k=e.feedKey,P=e.maxColumns,j=e.minColumns,I=e.pagination,F=I.hasNext,T=I.isLoadingNext,C=I.loadNext,A=I.refetch,O=e.pullToRefresh,R=e.renderFeedItem,E=e.serverRender,D=e.isLoadingStateEnabled,K=e.isLoadingAccessibilityLabel,M=e.isLoadedAccessibilityLabel,L=e.layout,Z=e.forceShowLoadingState,B=(0,c.HG)(),U=(0,l.Z)(),N=U.experimentalColumnWidth,z=U.experimentalGutter,H=function(e){if(Array.isArray(e))return e}(n=(0,r.useState)(!1))||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,i,l,o=[],s=!0,u=!1;try{for(i=(t=t.call(e)).next;!(s=(r=i.call(t)).done)&&(o.push(r.value),2!==o.length);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(u)throw a}}return o}}(n,2)||function(e,n){if(e){if("string"==typeof e)return v(e,2);var t=({}).toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?v(e,2):void 0}}(n,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),W=H[0],G=H[1],V=1===P?window.innerWidth:void 0,Y="userSearch"===b?window.innerWidth-16:200,X=T&&0===w.length&&!W&&!D,q="desktopFlashlight"===b||"ideaPage"===b&&B?-2:o.qG,$=null!=j?j:2;return"userSearch"===b&&($=1),(0,d.Z)(function(){return window.addEventListener("online",C),function(){return window.removeEventListener("online",C)}}),(0,h.jsxs)(a.xu,{"data-test-id":"MobileFeed",children:[(0,h.jsx)(f.Z,{enabled:!!O,onPull:function(){A(),G(!0)},refreshing:W}),(0,h.jsxs)(a.xu,{"data-test-id":"grid",marginEnd:q,marginStart:q,opacity:W?.5:1,children:[(0,h.jsx)(s.Z,{isAtEndOfFeed:!F,isPlaceholderGrid:D&&T&&!w.length,itemCount:w.length,children:w.length?(0,h.jsx)(a.xu,{"data-test-id":"feed",marginTop:(0,p.kk)({isDesktop:B}),children:(0,h.jsx)(u.Z.Consumer,{children:function(e){return(0,h.jsx)(r.Fragment,{children:(0,h.jsx)(y.Z,{children:(0,h.jsx)(i.default,{_getResponsiveModuleConfigForSecondItem:x,align:t||("ideaPage"===b?"start":void 0),cacheKey:k,columnWidth:B?null!=N?N:o.yF:null!=V?V:Y,getColumnSpanConfig:S,gutterWidth:B?null!=z?z:4*o.jC:void 0,id:E?k:void 0,isFetching:null!=Z?Z:T,isLoadedAccessibilityLabel:null!=M?M:"",isLoadingAccessibilityLabel:null!=K?K:"",isLoadingStateEnabled:null!=Z?Z:!!D,items:Z?[]:w,layout:null!=L?L:void 0,loadItems:C,maxColumns:P,minCols:$,optOutFluidGridExperiment:null!=P,renderItem:function(e){return R(e.data,e.itemIdx)},scrollContainerRef:e,serverRender:E})})})}})}):T?(0,h.jsx)(m.Z,{}):null!=_?_:null}),X&&(0,h.jsx)(a.xu,{column:12,paddingY:2,children:(0,h.jsx)(g.Z,{partialViewportWidth:"desktopFlashlight"===b})})]})]})}},589247:function(e,n,t){var r=t(935059),a=t(739405),i=t(153040),l=t(680811);n.Z=function(e){var n=e.children,t=(0,a.HG)();return!(0,r.Z)().isAuth&&t?(0,l.jsx)(i.x,{children:n}):n}},728746:function(e,n,t){t.d(n,{Z:function(){return nl}});var r,a,i,l,o,s,u,c,d=t(387784);t(115821);var p=t(20256),f=t(183e3),m=t(281215),g=t(24246),y=t(661376),h=t(854897),v=t(653551),b=t(226966),S=t(480610),x=t(680811);function _(e){var n,t,r=e.isTopRow,a=e.image;return(0,x.jsxs)(p.zd,{height:r?217:168,wash:!0,width:r?236:117,children:[a.url&&(0,x.jsx)(p.Ee,{alt:a.alt||"",fit:"cover",naturalHeight:null!=(n=a.height)?n:1,naturalWidth:null!=(t=a.width)?t:1,src:a.url}),!!a.price&&(0,x.jsx)(p.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(255, 255, 255, 0.8)",borderRadius:"18px",color:"#111",fontSize:"10px",fontWeight:"600",lineHeight:"24px",padding:"06px"}},"data-test-id":"shopping-upsell-price",height:24,left:!0,margin:1,paddingX:2,paddingY:1,position:"absolute",top:!0,children:a.price})]})}var w=t(230201),k=t(583875),P=t(79271),j=t(78835),I=t(748336),F=t(594502),T=t(227866);function C(e,n){if(e){if("string"==typeof e)return A(e,n);var t=({}).toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?A(e,n):void 0}}function A(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var O={container:{borderRadius:"".concat(j.Oc,"px ").concat(j.Oc,"px 25px 25px"),WebkitMaskImage:"-webkit-radial-gradient(white, black)"},content:{marginBottom:"2px"},visualOverlay:{backgroundColor:"rgba(0, 0, 0, .1)"}},R=function(e){var n=e.images,t=e.firstImageIndex,r=t+1,a=t+2;return(0,x.jsxs)(p.xu,{overflow:"hidden",rounding:4,children:[(0,x.jsx)(p.xu,{dangerouslySetInlineStyle:{__style:O.content},children:n.at(t)?(0,x.jsx)(_,{image:n[t],isTopRow:!0}):null}),n.length>a?(0,x.jsxs)(p.kC,{alignItems:"stretch",justifyContent:"between",children:[(0,x.jsx)(_,{image:n[r]}),(0,x.jsx)(_,{image:n[a]})]}):null]})};function E(e){var n,t,r,a,i,l,o=e.dangerouslySetActionUrl,s=e.query,u=e.story,c=e.slotIndex,f=(0,w.u)().logContextEvent,m=u.action,g=u.id,y=u.objects,h=u.story_type,v=u.subtitle,b=m||{},S=b.text,_=b.url,j=function(e){if(Array.isArray(e))return e}(n=(0,d.useState)(!1))||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,i,l,o=[],s=!0,u=!1;try{for(i=(t=t.call(e)).next;!(s=(r=i.call(t)).done)&&(o.push(r.value),2!==o.length);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(u)throw a}}return o}}(n,2)||C(n,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),E=j[0],D=j[1],K=(0,d.useCallback)(function(){return D(!0)},[D]),M=(0,d.useCallback)(function(){return D(!1)},[D]),L=(y||[]).reduce(function(e,n){var t,r,a,i,l,o,s,u,c;return"pin"!==n.type?e:[].concat(function(e){if(Array.isArray(e))return A(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||C(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[{domain:n.domain,image:{alt:n.title||n.description,height:null==(t=n.images)||null==(r=t["474x"])?void 0:r.height,url:null==(a=n.images)||null==(i=a["474x"])?void 0:i.url,width:null==(l=n.images)||null==(o=l["474x"])?void 0:o.width,price:null==(s=((null==(u=n.rich_summary)||null==(c=u.products)?void 0:c[0])||{}).offer_summary)?void 0:s.price}}])},[]),Z=(L[0]||{}).domain||void 0;["search_product_collage_story","shop_article_story"].includes(h||"")?(t=2,r=43,a={story_id:g,story_type:h,entered_query:s}):"shop_brand_story"===h||"shop_brand_affinity_story"===h?(t=1,r=92,Z&&(a={story_type:h,commerce_data:JSON.stringify({domain:Z})})):["stela_in_flashlight_card","stela_in_flashlight_onecol"].includes(h||"")?(t=72,r=3050):"related_domain_collage"===h?(t=72,r=3455):"related_products_collage"===h&&(t=1,r=3177);var B=function(){return f({event_type:101,element:372,component:200,view_type:t,view_parameter:r,aux_data:{story_type:h}})},U=v?4:2;if(["related_domain_collage","shop_brand_story","shop_brand_affinity_story"].includes(h||"")&&m){var N=m.user;i=N&&(N.image_medium_url||N.image_large_url),l=N&&N.full_name}var z=o||_;if(!z)return null;var H=(0,I.Z)({url:z})?"nofollow":"none";return(0,x.jsx)(P.Fw,{componentType:200,contextLogData:a||{},impressionType:"Story",loggingId:h,slotIndex:c,viewParameter:r,viewType:t,children:function(e){var n=e.impressionTrackerRef;return(0,x.jsx)(p.xu,{ref:n,children:(0,x.jsx)(p.Tg,{href:z,onTap:B,rel:H,children:(0,x.jsxs)(p.xu,{dangerouslySetInlineStyle:{__style:O.container},onMouseEnter:K,onMouseLeave:M,overflow:"hidden",position:"relative",children:[(0,x.jsx)(R,{firstImageIndex:+!!["related_domain_collage","related_products_collage"].includes(h||""),images:L.map(function(e){return e.image})}),(0,x.jsx)(p.xu,{alignItems:"center",color:"secondary",display:"flex",justifyContent:"center",marginTop:2,paddingX:3,paddingY:U,rounding:"pill",children:(0,x.jsxs)(p.xu,{alignContent:"start",direction:"column",display:"flex",justifyContent:"center",margin:2,children:[v?(0,x.jsx)(p.xu,{marginBottom:1,children:(0,x.jsx)(p.xv,{align:"start",color:"subtle",children:v.format})}):null,(0,x.jsx)(p.xv,{align:"start",weight:"bold",children:S})]})}),l&&i&&(0,x.jsx)(p.xu,{margin:2,position:"absolute",right:!0,top:!0,children:(0,x.jsx)(k.qE,{name:l,outline:!0,size:"md",src:i})}),(0,x.jsx)(F.Z,{visibility:E?"visible":"none",children:(0,x.jsx)(T.Z,{additionalStyles:O.visualOverlay})})]})})})}})}var D=t(216975),K=t(865043),M=(void 0!==r||(r=t(248894)).hash&&"610a35d46510240eb58e262c1909310c"!==r.hash&&console.error("The definition of 'BestPinCardAttribution_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r),L=function(){(0,K.NC)("click_best_pin_board",!0)},Z=function(){(0,K.NC)("click_best_pin_profile",!0)},B=function(e){var n=e.pin.pinner,t=null!=n?n:{},r=t.username,a=t.fullName,i=(null==n?void 0:n.imageMediumUrl)||(null==n?void 0:n.imageSmallUrl);return(0,x.jsx)(p.Tg,{fullWidth:!1,href:"/".concat(null!=r?r:"","/"),onTap:Z,rounding:"circle",children:(0,x.jsx)(k.qE,{name:null!=a?a:"",outline:!0,size:"sm",src:null!=i?i:""})})},U=function(e){var n=e.pin,t=(0,g.Z)(),r=n.board,a=n.pinner,i=null!=r?r:{},l=i.name,o=i.privacy,s=i.url,u=(null==r?void 0:r.entityId)||"",c=null!=a?a:{},d=c.username,f=c.fullName,m=(0,x.jsx)(p.xv,{inline:!0,size:"200",weight:"bold",children:(0,x.jsx)(p.rU,{display:"inlineBlock",href:"/".concat(null!=d?d:"","/"),onClick:Z,underline:"hover",children:f})},f);return"protected"===o?(0,D.nk)(t._('{{ pinnerName }} saved this Pin', 'Showing who saved this pin, but not which board (private board), on closeup', 'Showing who saved this pin, but not which board (private board), on closeup'),{pinnerName:m}):(0,D.nk)(t._('{{ pinnerName }} saved to {{ boardName }}', 'Showing who saved this pin to which board on closeup', 'Showing who saved this pin to which board on closeup'),{pinnerName:m,boardName:(0,x.jsx)(p.xv,{inline:!0,size:"200",weight:"bold",children:(0,x.jsx)(p.rU,{href:null!=s?s:"",onClick:L,children:l},"board")},u)})},N=function(e){var n=e.pinKey,t=(0,f.Z)(M,n);return(0,x.jsxs)(p.xu,{alignItems:"center","data-test-id":"pin-attribution",direction:"row",display:"flex",marginTop:3,children:[(0,x.jsx)(B,{pin:t}),(0,x.jsx)(p.xu,{marginEnd:2}),(0,x.jsx)(p.xv,{size:"200",children:(0,x.jsx)(U,{pin:t})})]})},z=function(e){e.target&&e.target instanceof HTMLElement&&(e.target.style.textDecoration="underline")},H=function(e){e.target&&e.target instanceof HTMLElement&&(e.target.style.textDecoration="none")},W=t(104999);function G(e){var n,t,r=e.pageType,a=e.pinCreditPrefix,i=e.pin,l=e.pinLink,o=e.viewParameter,s=(0,g.Z)(),u=(0,W.Z)();if("topic"!==r.page&&(!i.domain||"Uploaded by user"===i.domain))return null;var c="topic"!==r.page||r.isAuth?"100":"200",d="topic"===r.page&&!!i.nativeCreator,f=d?null==(n=i.nativeCreator)?void 0:n.fullName:i.domain;return(0,x.jsx)(p.xu,{display:"flex",flex:"none",justifyContent:"start",marginBottom:2,children:(0,x.jsx)(p.rU,{display:"inlineBlock",href:d?"/".concat((null==(t=i.nativeCreator)?void 0:t.username)||"","/"):l,onClick:function(){"topic"===r.page?(0,K.NC)("click_topic_best_pin_link"):u({event_type:12,view_type:3,object_id_str:i.entityId,component:85,view_parameter:o})},rel:"nofollow",target:"blank",underline:"hover",children:(0,x.jsx)(p.xv,{size:c,children:(0,D.nk)(s._('{{ pinCreditPrefix }} {{ pinCredit }}', 'Tells the user where the pin is from in the form of "Saved from <website>"', 'Tells the user where the pin is from in the form of "Saved from <website>"'),{pinCreditPrefix:a,pinCredit:(0,x.jsx)(p.xv,{inline:!0,size:c,weight:"bold",children:"topic"!==r.page?(0,x.jsxs)("span",{"data-gestalt-valid-html":"Text",onBlur:H,onFocus:z,onMouseLeave:H,onMouseOver:z,children:[" ",i.domain]}):f},d?"creatorProfile":"pinLinkDomain")})})})})}var V=t(735571),Y=t(124631),X=t(816438),q=t(331506),$=t(228121),J=t(455211),Q=t(891851),ee=t(64151),en=t(132781),et=(void 0!==a||(a=t(426344)).hash&&"12f77507a9fdec344b44b7e659fa5ac1"!==a.hash&&console.error("The definition of 'RecipeMetadata_recipe' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a);function er(e){var n=e.recipeKey,t=(0,f.Z)(et,n);if(null!=t&&null!=(r=t.aggregateRating)&&r.ratingValue&&t.aggregateRating.reviewCount){var r,a,i,l,o="number"==typeof(null==(a=t.cookTimes)||null==(i=a.cook)?void 0:i.m)&&"number"==typeof(null==(l=t.cookTimes.prep)?void 0:l.m)?"".concat(t.cookTimes.cook.m+t.cookTimes.prep.m," minutes \xb7 "):"";return(0,x.jsxs)(d.Fragment,{children:[(0,x.jsx)(en.Z,{max_rating:t.aggregateRating.bestRating,rating:t.aggregateRating.ratingValue},t.aggregateRating.ratingValue),(0,x.jsx)(p.xv,{inline:!0,size:"200",children:" ".concat(t.aggregateRating.reviewCount," \xb7 ").concat(o)})]})}return null}var ea=t(774838),ei=(void 0!==i||(i=t(981838)).hash&&"81db65fd15680cc0281b801ed4a8cb94"!==i.hash&&console.error("The definition of 'BestPinCardBody_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),el=function(e){var n=null;e.lastRepinDate&&(n=new Date(e.lastRepinDate));var t=null;return(e.createdAt&&(t=new Date(e.createdAt)),n)?t?n>t?n:t:n:t},eo=function(e){var n="";if(e.richMetadata&&e.richMetadata.article&&e.richMetadata.article.datePublished)return n;var t=el(e);if(t&&t.getFullYear()===new Date().getFullYear()){var r=new Set(["film_music_books","art","home_decor","food_drink","womens_fashion","travel","weddings","hair_beauty","holidays_events","mens_fashion","products","celebrities","technology"]),a=e.category;r.has(a)&&(n=t?(0,x.jsx)(V.Z,{dateFormatType:V.k.LONG_MONTH_YEAR,useUTC:!1,value:t}):"")}return n},es=function(e,n){var t,r,a,i=new Date(null!=(t=null==(r=(null!=(a=e.richMetadata)?a:{}).article)?void 0:r.datePublished)?t:Date.now()),l=i.getTime(),o=new Date().getTime();return null==n||o-l<=31536e6*n?(0,x.jsx)(V.Z,{dateFormatType:V.k.LONG_MONTH_YEAR,useUTC:!1,value:i}):""};function eu(e){var n,t,r,a,i,l,o,s,u,c,d,m,g,y,h,v,b,S,_,w,k,P,j,I=e.pinKey,F=e.viewportSize,T=e.pageType,C=(0,f.Z)(ei,I),A=(0,$.Z)(C),O=A.pinCreditPrefix,R=A.pinLink,E=(0,J.Z)(C),D=(0,q.eK)({richMetadataDescription:null==(n=C.richMetadata)?void 0:n.description,richSummaryDisplayName:null==(t=C.richSummary)?void 0:t.displayName,closeupUnifiedDescription:C.closeupUnifiedDescription}).description;"videos_category"===T.page&&(D=(0,q.kt)(D,(null==(j=C.nativeCreator)?void 0:j.username)||""));var K="wide"===F,M=(0,q.Ly)({pinTitle:C.title,gridTitle:C.gridTitle,richSummaryDisplayName:null!=(r=null==(a=C.richSummary)?void 0:a.displayName)?r:"",richMetadataTitle:null!=(i=null==(l=C.richMetadata)?void 0:l.title)?i:"",storyPinDataId:C.storyPinDataId,storyPinDataMetadataPinTitle:null==(o=C.storyPinData)||null==(s=o.metadata)?void 0:s.pinTitle,pinJoinVisualAnnotation:null==(u=C.pinJoin)?void 0:u.visualAnnotation});(C.gridTitle||"").trim()&&M!==C.gridTitle&&(M=(0,q.EU)(C.gridTitle,200));var L=(0,X.r)(null==(c=C.richMetadata)||null==(d=c.recipe)?void 0:d.name,!!(null!=(m=C.richMetadata)&&null!=(g=m.recipe)&&g.categorizedIngredients),null!=(y=null==(h=C.richMetadata)||null==(v=h.recipe)?void 0:v.fromAggregatedData)&&y)?null==(b=C.richMetadata)?void 0:b.recipe:null,Z=!!(C.richMetadata&&C.richMetadata.article&&C.richMetadata.article.datePublished)&&es(C,2),B=eo(C)||Z,U=(0,ea.B)(),z=U.isBot,H=U.isSocialBot;return(0,x.jsx)(p.xu,{alignContent:"between","data-test-id":"UnauthBestPinCardBodyContainer",direction:"column",display:"flex",flex:"grow",padding:8,position:"relative",width:"100%",children:(0,x.jsxs)(p.xu,{direction:"column",display:"flex",flex:"grow",position:"relative",children:[(0,x.jsx)(G,{pageType:T,pin:{entityId:C.entityId,domain:C.domain||"",nativeCreator:C.nativeCreator&&{fullName:C.nativeCreator.fullName,username:C.nativeCreator.username}},pinCreditPrefix:"topic"===T.page&&C.nativeCreator?"Created by":O,pinLink:null!=R?R:"",viewParameter:(0,Q.Z)({hasPin:!0,hasPinRichMetadata:!!C.richMetadata,hasPinRichMetadataProducts:!!(null!=(S=C.richMetadata)&&S.products),hasPinRichMetadataArticle:!!(null!=(_=C.richMetadata)&&_.article),hasPinRichMetadataRecipe:!!(null!=(w=C.richMetadata)&&w.recipe),hasPinStoryPinData:!!C.storyPinData})}),(0,x.jsx)(p.kC,{direction:"row",justifyContent:"between",children:(0,x.jsx)(p.xu,{display:"flex",marginEnd:3*!K,marginTop:3*!!K,overflow:"hidden",children:M&&(0,x.jsx)("h2",{"data-test-id":"UnauthBestPinCardTitle",style:{fontWeight:600,fontSize:"28px",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:M})})}),B?(0,x.jsx)(p.xu,{marginTop:1,children:(0,x.jsx)(p.xv,{color:"subtle",children:B})}):null,D&&(0,x.jsx)(p.xu,{display:"flex",marginTop:3,overflow:"hidden",children:(0,x.jsxs)("h3",{style:{fontWeight:"normal",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",fontSize:"14px"},children:[L&&(0,x.jsx)(er,{recipeKey:L}),D]})}),L&&(0,x.jsx)(ee.Z,{marginOverrides:L?{outerMarginTop:32,ingredientMarginBottom:4}:null,recipeProps:{recipe:{categorizedIngredients:L.categorizedIngredients,name:L.name,image:(0,Y.Z)({imagesUrls:E,embedSrc:null==(k=C.embed)?void 0:k.src,embedType:null==(P=C.embed)?void 0:P.type,excludeOriginals:!z&&!H})}}}),(0,x.jsx)(p.xu,{alignItems:"center",direction:"row",display:"flex",justifyContent:"between",marginTop:2,children:(0,x.jsx)(N,{pinKey:C})})]})})}var ec=t(221175),ed=t(302407);function ep(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var ef={nw:0,ne:90,se:180,sw:270},em={ne:[7,-7],se:[7,7],sw:[-7,7],nw:[-7,-7]},eg={nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},ey=function(e,n,t,r){if("rounded"!==r)return"translate(".concat(n,", ").concat(t,"), rotate(").concat(ef[e],")");var a,i=function(e){if(Array.isArray(e))return e}(a=em[e])||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,i,l,o=[],s=!0,u=!1;try{for(i=(t=t.call(e)).next;!(s=(r=i.call(t)).done)&&(o.push(r.value),2!==o.length);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(u)throw a}}return o}}(a,2)||function(e,n){if(e){if("string"==typeof e)return ep(e,2);var t=({}).toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ep(e,2):void 0}}(a,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),l=i[0],o=i[1];return"translate(".concat(n+l,", ").concat(t+o,"), rotate(").concat(ef[e],")")};function eh(e){var n=e.corner,t=e.x,r=e.y,a=e.size,i=e.cornerStyle;return(0,x.jsxs)("g",{"data-test-id":"cropper-corner-".concat(n),style:{cursor:eg[n],pointerEvents:"auto"},transform:ey(n,t,r,i),children:[(0,x.jsx)("rect",{className:"cropperHandle ".concat(n),fill:"rgba(0,0,0,0)",height:a,stroke:"none",width:a,x:0,y:0}),"rounded"===i?(0,x.jsx)("path",{className:"cropperHandle ".concat(n),d:"M16 0H24V8H16C11.5817 8 8 11.5817 8 16V24H0V16C0 7.16343 7.16345 0 16 0Z",fill:"#fff"}):(0,x.jsx)("path",{className:"cropperHandle ".concat(n),d:"M ".concat(a," 0 L 0 0 L 0 ").concat(a),fill:"none",stroke:"#fff",strokeWidth:6})]})}var ev={n:"ns-resize",s:"ns-resize",e:"ew-resize",w:"ew-resize"};function eb(e){var n=e.edge,t=e.x,r=e.y,a=e.w,i=e.h;return(0,x.jsx)("rect",{className:"cropperHandle ".concat(n),fill:"rgba(0,0,0,0)",height:i,stroke:"none",style:{cursor:ev[n],pointerEvents:"auto"},width:a,x:t,y:r})}function eS(e){var n=e.x,t=e.y,r=e.w,a=e.h,i="rounded";return(0,x.jsxs)(d.Fragment,{children:[(0,x.jsx)(eh,{corner:"nw",cornerStyle:i,size:20,x:n,y:t}),(0,x.jsx)(eh,{corner:"ne",cornerStyle:i,size:20,x:n+r,y:t}),(0,x.jsx)(eh,{corner:"sw",cornerStyle:i,size:20,x:n,y:t+a}),(0,x.jsx)(eh,{corner:"se",cornerStyle:i,size:20,x:n+r,y:t+a}),(0,x.jsx)(eb,{edge:"n",h:30,w:Math.max(r-40,0),x:n+20,y:t-10}),(0,x.jsx)(eb,{edge:"e",h:Math.max(a-40,0),w:30,x:n+r-20,y:t+20}),(0,x.jsx)(eb,{edge:"s",h:30,w:Math.max(r-40,0),x:n+20,y:t+a-10}),(0,x.jsx)(eb,{edge:"w",h:Math.max(a-40,0),w:30,x:n-20,y:t+20})]})}var ex=t(325574),e_=t(480706),ew=t(59111),ek=t(893957),eP=t(979173);function ej(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,i,l,o=[],s=!0,u=!1;try{if(i=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=i.call(t)).done)&&(o.push(r.value),o.length!==n);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(u)throw a}}return o}}(e,n)||function(e,n){if(e){if("string"==typeof e)return eI(e,n);var t=({}).toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?eI(e,n):void 0}}(e,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eI(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function eF(e){var n,t,r=e.children,a=e.cropArea,i=e.imageSize,l=e.objectDetection,o=e.onChange,s=e.previewCropArea,u=e.showPreviewArea,c=e.viewParameter,f=e.viewType,m=(0,W.Z)(),g=(0,d.useRef)(null),y=(0,d.useRef)(null),h=ej((0,d.useState)(0),2),v=h[0],b=h[1],S=ej((0,d.useState)(0),2),_=S[0],w=S[1],k=ej((0,d.useState)(0),2),P=k[0],j=k[1],I=ej((0,d.useState)(0),2),F=I[0],T=I[1],C=ej((0,d.useState)((0,ex.Z)({cropArea:a,imageSize:i})),2),A=C[0],O=C[1],R=ej((0,d.useState)(null),2),E=R[0],D=R[1],K=ej((0,d.useState)(null),2),M=K[0],L=K[1],Z=ej((0,d.useState)(!1),2),B=Z[0],U=Z[1],N=ej((0,d.useState)(!1),2),z=N[0],H=N[1],G=function(e){e.preventDefault(),e.stopPropagation();var n=e.clientX,t=e.clientY,r=n-v,a=t-_;H(!1),j(r),T(a);var i=e.target,l=i.classList.contains("cropperHandle"),o="shadowMask"===i.id,s="cropSection"===i.id,u=i.id===e_.P,c=i.id===eP.I;l?(D("resize"),i.classList.contains("ne")?L("ne"):i.classList.contains("nw")?L("nw"):i.classList.contains("se")?L("se"):i.classList.contains("sw")?L("sw"):i.classList.contains("n")?L("n"):i.classList.contains("s")?L("s"):i.classList.contains("e")?L("e"):i.classList.contains("w")&&L("w")):o?(D("select"),O(ec.OI)):s?D("move"):(A.x<r&&r<A.x+A.w&&A.y<a&&a<A.y+A.h?D("move"):(D("select"),O(ec.OI)),U(u||c))},V=function(e){if(E){U(!1);var n=e.clientX,t=e.clientY,r=n-v,a=t-_;if("resize"===E){var l,o,s=Math.max(Math.min(r,(null!=(l=i.width)?l:1)-ec.SP),ec.SP),u=Math.max(Math.min(a,(null!=(o=i.height)?o:1)-ec.SP),ec.SP),c=A.x,d=A.y,p=A.w,f=A.h;switch(M){case"ne":s<c&&u>d+f?L("sw"):s<c?L("nw"):u>d+f&&L("se");break;case"nw":s>c+p&&u>d+f?L("se"):s>c+p?L("ne"):u>d+f&&L("sw");break;case"se":s<c&&u<d?L("nw"):s<c?L("sw"):u<d&&L("ne");break;case"sw":s>c+p&&u<d?L("ne"):s>c+p?L("se"):u<d&&L("nw");break;case"n":u>d+f&&L("s");break;case"s":u<d&&L("n");break;case"e":s<c&&L("w");break;case"w":s>c+p&&L("e")}switch(M){case"ne":O(function(e){var n=e.x,t=e.y,r=e.h,a=Math.max(s-n,ec.xZ),i=Math.max(r+(t-u),ec.xZ);return{x:n,y:i<=ec.xZ?t:u,w:a,h:i}});break;case"nw":O(function(e){var n=e.x,t=e.y,r=e.w,a=e.h,i=Math.max(r+(n-s),ec.xZ),l=Math.max(a+(t-u),ec.xZ);return{x:i===ec.xZ?n:s,y:l===ec.xZ?t:u,w:i,h:l}});break;case"se":O(function(e){var n=e.x,t=e.y,r=Math.max(s-n,ec.xZ),a=Math.max(u-t,ec.xZ);return{x:n,y:t,w:r,h:a}});break;case"sw":O(function(e){var n=e.x,t=e.y,r=Math.max(e.w+(n-s),ec.xZ),a=Math.max(u-t,ec.xZ);return{x:r===ec.xZ?n:s,y:t,w:r,h:a}});break;case"n":O(function(e){var n=e.x,t=e.y,r=e.w,a=Math.max(t-u+e.h,ec.xZ);return{x:n,y:a===ec.xZ?t:u,w:r,h:a}});break;case"s":O(function(e){var n=e.x,t=e.y,r=e.w,a=Math.max(u-t,ec.xZ);return{x:n,y:t,w:r,h:a}});break;case"e":O(function(e){var n=e.x,t=e.y,r=e.h,a=Math.max(s-n,ec.xZ);return{x:n,y:t,w:a,h:r}});break;case"w":O(function(e){var n=e.x,t=e.y,r=e.w,a=e.h,i=Math.max(r-s+n,ec.xZ);return{x:i===ec.xZ?n:s,y:t,w:i,h:a}})}}else if("move"===E){var m,g,y=r-P,h=a-F,b=Math.max(Math.min(A.x+y,(null!=(m=i.width)?m:1)-A.w-ec.SP),ec.SP),S=Math.max(Math.min(A.y+h,(null!=(g=i.height)?g:1)-A.h-ec.SP),ec.SP);j(r),T(a),O(function(e){return{x:b,y:S,w:e.w,h:e.h}})}else if("select"===E){var x,w,k=Math.max(Math.min(r,null!=(x=i.width)?x:1),0),I=Math.max(Math.min(a,null!=(w=i.height)?w:1),0);O({x:Math.min(P,k),y:Math.min(F,I),w:Math.abs(k-P),h:Math.abs(I-F)})}}},Y=function(){if(D(null),L(null),U(!1),E){if(B&&"dots"===l)return void H(!0);if(0===A.w&&0===A.h){var e,n;o({cropArea:{x:ec.SP,y:ec.SP,w:(null!=(e=i.width)?e:1)-2*ec.SP,h:(null!=(n=i.height)?n:1)-2*ec.SP},cropSource:5}),m({event_type:16586,view_type:f,view_parameter:c})}else{var t,r,a,s,u,d,p,g,y=Math.max(Math.min(A.x,(null!=(t=i.width)?t:1)-ec.xZ-ec.SP),ec.SP),h=Math.max(Math.min(A.y,(null!=(r=i.height)?r:1)-ec.xZ-ec.SP),ec.SP);u=A.h<ec.xZ?ec.xZ:h+A.h>(null!=(a=i.height)?a:1)-ec.SP?(null!=(p=i.height)?p:1)-h-ec.SP:A.h,d=A.w<ec.xZ?ec.xZ:y+A.w>(null!=(s=i.width)?s:1)-ec.SP?(null!=(g=i.width)?g:1)-y-ec.SP:A.w,"move"===E?m({event_type:7603,view_type:f,view_parameter:c}):"resize"===E?m({event_type:7604,view_type:f,view_parameter:c}):"select"===E&&m({event_type:16584,view_type:f,view_parameter:c}),o({cropArea:{x:y,y:h,w:d,h:u},cropSource:6})}}};return(0,ek.Z)(function(){if(y.current){var e=y.current.getBoundingClientRect(),n=e.x,t=e.y;b(n),w(t)}}),(0,d.useEffect)(function(){z&&O(null!=a?a:ec.OI)},[a,z]),(0,d.useEffect)(function(){var e=y.current;return e&&(e.addEventListener("mousedown",G),window.addEventListener("mousemove",V),window.addEventListener("mouseup",Y)),function(){e&&(e.removeEventListener("mousedown",G),window.removeEventListener("mousemove",V),window.removeEventListener("mouseup",Y))}}),(0,x.jsxs)(p.xu,{ref:y,dangerouslySetInlineStyle:{__style:{cursor:"crosshair"}},"data-test-id":"visual-search-cropper",height:"100%",left:!0,position:"absolute",top:!0,width:"100%",children:[(0,x.jsx)(ew.Z,{unsafeCSS:ec.iC}),(0,x.jsxs)("svg",{"data-gestalt-valid-html":"Box",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},children:[(0,x.jsx)("defs",{children:(0,x.jsxs)("mask",{id:"Mask",children:[(0,x.jsx)("rect",{fill:"white",height:null!=(n=i.height)?n:"100%",rx:"0",ry:"0",width:null!=(t=i.width)?t:"100%",x:"0",y:"0"}),(0,x.jsx)("rect",{height:A.h,id:"hole",rx:0,ry:0,width:A.w,x:A.x,y:A.y},"".concat(A.x).concat(A.y)),(0,x.jsx)(ed.Z,{classNames:"preview-crop-area",in:u&&!E,mountOnEnter:!0,nodeRef:g,timeout:300,unmountOnExit:!0,children:(0,x.jsx)(p.xu,{ref:g,children:(0,x.jsx)("rect",{height:s.h,id:"preview",rx:4,ry:4,width:s.w,x:s.x,y:s.y},"".concat(s.x).concat(s.y))})})]})}),(0,x.jsx)("rect",{fill:"rgba(0,0,0,0.5)",height:"100%",id:"shadowMask",mask:"url(#Mask)",width:"100%",x:"0",y:"0"}),(0,x.jsx)("use",{className:"v2cropSection","data-test-id":"cropper-section",fill:"rgba(0,0,0,0)",href:"#hole",id:"cropSection",stroke:"white",strokeWidth:"2",style:{cursor:"move"}})]}),r,(0,x.jsx)("svg",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none"},children:"select"!==E&&(0,x.jsx)(eS,{h:A.h,w:A.w,x:A.x,y:A.y})})]})}function eT(e){var n=e.showAnimation,t=e.auxData,r=e.index,a=e.isStela,i=e.onClick,l=e.onHover,o=e.onUnhover,s=e.spotlightCenter,u=e.viewParameter,c=e.viewType,d=(0,W.Z)(),p=a?1221:1260;(0,ek.Z)(function(){d({event_type:120,element:p,aux_data:t,view_parameter:u,view_type:c})});var f=parseFloat((.1*(r+1)).toFixed(2));return(0,x.jsx)(e_.Z,{onClick:function(){d({aux_data:t,element:p,event_type:101,view_parameter:u,view_type:c}),i(r)},onMouseEnter:function(e){var n=e.event;n&&(n.stopPropagation(),n.preventDefault()),null==l||l(r)},onMouseLeave:function(e){var n=e.event;n&&(n.stopPropagation(),n.preventDefault()),null==o||o()},style:{animation:n?"spotlightDotPop 0.6s ease-out ".concat(f,"s both"):"none"},x:s.x,y:s.y})}var eC=t(575647),eA=t(383903);function eO(e){return(eO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eR(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function eE(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?eR(Object(t),!0).forEach(function(n){var r,a;r=n,a=t[n],(r=function(e){var n=function(e,n){if("object"!=eO(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!=eO(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==eO(n)?n:n+""}(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):eR(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var eD=(void 0!==l||(l=t(85729)).hash&&"3a8409077905af94eb39568e4a5a57fc"!==l.hash&&console.error("The definition of 'FlashlightSpotlightDots_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),l),eK=function(e){var n,t=e.showAnimation,r=e.pinKey,a=e.imageSignature,i=e.imageSize,l=e.currentSpotlightIdx,o=e.handleSpotlightClick,s=e.handleSpotlightHover,u=e.handleSpotlightUnhover,c=e.viewParameter,p=e.viewType,m=e.visualObjects,g=(0,f.Z)(eD,r),y=(0,eC.Z)(g),h=g?(null!=(n=g.visualObjects)?n:[]).filter(function(e){return e.isStela}):null!=m?m:[];return(0,x.jsxs)(d.Fragment,{children:[(0,x.jsx)(ew.Z,{unsafeCSS:"\n@keyframes spotlightDotPop {\n  0% {\n    transform: scale(0);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n}"}),h.map(function(e,n){if(n===l)return null;var r,d,f,m=e.x,h=e.y,v=e.w,b=e.h,S=(0,eA.Z)({cropArea:{x:m,y:h,w:v,h:b},scaledWidth:null!=(r=i.width)?r:0,scaledHeight:null!=(d=i.height)?d:0}),_={x:S.x+S.w/2,y:S.y+S.h/2},w=eE(eE({},y({override:{entrypoint:"flashlight"}})),{},{pin_id:null!=(f=null==g?void 0:g.entityId)?f:"",image_signature:a,visual_objects:JSON.stringify([{x:e.x,y:e.y,w:e.w,h:e.h}])}),k="".concat(_.x).concat(_.y);return(0,x.jsx)(eT,{auxData:w,index:n,isStela:!!(null!=e&&e.isStela),onClick:o,onHover:s,onUnhover:u,showAnimation:t,spotlightCenter:_,viewParameter:c,viewType:p},k)})]})},eM=t(128608),eL=t(246427),eZ=t(958306);function eB(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,i,l,o=[],s=!0,u=!1;try{if(i=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=i.call(t)).done)&&(o.push(r.value),o.length!==n);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(u)throw a}}return o}}(e,n)||function(e,n){if(e){if("string"==typeof e)return eU(e,n);var t=({}).toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?eU(e,n):void 0}}(e,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eU(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var eN=(void 0!==o||(o=t(60899)).hash&&"939d46d8644385a7918ed8179ce77a4c"!==o.hash&&console.error("The definition of 'UnauthCropperContainer_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),o);function ez(e){var n=e.cropArea,t=e.customCropper,r=e.imageSignature,a=e.imageSize,i=e.pinKey,l=e.showAnimation,o=e.trafficSource,s=e.viewParameter,u=e.viewType,c=(0,f.Z)(eN,i),p=eB((0,d.useState)("none"),2),m=p[0],g=p[1],y=eB((0,d.useState)(!1),2),h=(y[0],y[1]),v=eB((0,d.useState)({x:0,y:0,w:0,h:0}),2),b=v[0],S=v[1],_=eB((0,d.useState)({isCropAreaOnDotArea:!1,indexToHide:-1}),2),w=_[0],k=_[1],P=w.indexToHide,j=(0,d.useMemo)(function(){var e;return(null!=(e=c.visualObjects)?e:[]).filter(function(e){return e.isStela}).map(eZ.Z)},[c.visualObjects]);return(0,d.useEffect)(function(){var e,t,r=j&&!!j.length,i=(0,eL.Z)({cropArea:n,scaledHeight:null!=(e=a.height)?e:0,scaledWidth:null!=(t=a.width)?t:0});r&&(g("dots"),k((0,eM.Z)(j,i)))},[n,a.height,a.width,j]),(0,x.jsx)(eF,{cropArea:n,imageSize:a,objectDetection:m,onChange:t,previewCropArea:b,showPreviewArea:!1,viewParameter:s,viewType:u,children:"dots"===m&&(0,x.jsx)(eK,{currentSpotlightIdx:P,handleSpotlightClick:function(e){var n,r,i=j[e],l=i.x,s=i.y,u=i.w,c=i.h,d=i.title;t({cropArea:(0,eA.Z)({cropArea:{x:l,y:s,w:u,h:c},scaledHeight:null!=(n=a.height)?n:0,scaledWidth:null!=(r=a.width)?r:0}),cropSource:4,trafficSource:o,title:d||""})},handleSpotlightHover:function(e){if(e!==P){var n,t,r=j[e],i=r.x,l=r.y,o=r.w,s=r.h;S((0,eA.Z)({cropArea:{x:i,y:l,w:o,h:s},scaledWidth:null!=(n=a.width)?n:0,scaledHeight:null!=(t=a.height)?t:0})),h(!0)}},handleSpotlightUnhover:function(){h(!1)},imageSignature:r,imageSize:a,pinKey:c,showAnimation:l,viewParameter:s,viewType:u})},JSON.stringify(n))}var eH=t(173874),eW=t(382964),eG=t(112658),eV=t(736328),eY=t(116980),eX=t(575820),eq=t(371266),e$=t(619784),eJ=t(285676),eQ=t(254889),e0=t(838855),e1=t(520803);function e2(e){return(e2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function e3(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function e6(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?e3(Object(t),!0).forEach(function(n){var r,a;r=n,a=t[n],(r=function(e){var n=function(e,n){if("object"!=e2(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!=e2(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==e2(n)?n:n+""}(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):e3(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var e5=0,e8="",e4=(void 0!==s||(s=t(136209)).hash&&"93612431e09eadc717c32d98e8d91e06"!==s.hash&&console.error("The definition of 'UnauthDesktopFlashlightPage_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),s);function e7(e){var n,t,r=e.imageSpec_564x,a=e.imageSpec_orig,i=e.imageSignature,l=r&&a,o=(null!=l?l:{}).url,s=null!=(n=null==l?void 0:l.width)?n:1,u=null!=(t=null==l?void 0:l.height)?t:void 0;return"number"==typeof s&&"number"==typeof u&&s>564&&(u*=564/s,s=564),{width:s,height:u,url:o,imageSignature:i}}var e9=function(e){var n=e.data,t=e.index,r=e.viewParameter,a=e.productsURL;switch(n.type){case"pin":return(0,x.jsx)(eJ.Z,{duploQueryRef:null,pinId:n.id,slotIndex:t,viewParameter:r,viewType:72});case"story":return a&&(0,x.jsx)(E,{dangerouslySetActionUrl:a,slotIndex:t,story:n});default:return null}},ne=function(e){var n=e.resourceOptions,t=(0,g.Z)(),r=(0,y.Z)({name:"VisualLiveSearchResource",options:n}),a=r.data,i=r.isAtEnd,l=r.isFetching,o=r.fetchMore,s=(0,v.TH)(),u="".concat(s.pathname,"products/").concat(s.search);return(0,x.jsxs)(d.Fragment,{children:[a&&(0,x.jsx)(e0.Z,{customLayoutType:"desktopFlashlight",feedItems:a.results||[],feedKey:"flashlight-dweb-unauth",pagination:{loadNext:o,hasNext:i,isLoadingNext:l,refetch:function(){}},renderFeedItem:function(e,n){return e9({data:e,index:n,viewParameter:3050,productsURL:u})}}),(0,x.jsx)(p.xH,{accessibilityLabel:t._('Loading visual search results...', 'unauthDesktopVisualSearch.flashlightFeed.loading', 'Accessibility label for loading visual search results'),show:l})]})},nn=function(e){var n=e.resourceOptions,t=(0,g.Z)(),r=(0,y.Z)({name:"VisualLiveSearchProductFeedResource",options:n}),a=r.data,i=r.isAtEnd,l=r.isFetching,o=r.fetchMore;return(0,x.jsxs)(d.Fragment,{children:[a&&(0,x.jsx)(e0.Z,{customLayoutType:"desktopFlashlight",feedItems:a||[],feedKey:"flashlight-products-dweb-unauth",pagination:{loadNext:o,hasNext:i,isLoadingNext:l,refetch:function(){}},renderFeedItem:function(e,n){return e9({data:e,index:n,viewParameter:3334})}}),(0,x.jsx)(p.xH,{accessibilityLabel:t._('Loading visual search product results...', 'unauthDesktopVisualSearch.flashlightProductFeed.loading', 'Accessibility label for loading visual search product results'),show:l})]})};function nt(e){var n=e.pinKey,t=(0,g.Z)(),r=(0,ea.B)().isRTL,a=(0,W.Z)(),i=(0,v.s0)(),l=(0,v.TH)(),o=(0,d.useRef)(null),s=(0,e1.Z)(),u=(0,eV.Z)(),c=(0,h.Z)(s.params.id||"").pinId,m=(0,eX.mB)(l.search),y=(0,S.Z)(l),_=function(e){var n=parseInt(null!=e?e:"",10);switch(n){case 1:case 2:case 3:case 4:case 5:case 6:return n;default:return}}(m.cropSource),w=(0,eH.hd)(l),k=(0,f.Z)(e4,n),P=(0,eW.Z)({pinKey:k}).getNormalizedPinImage;if((0,d.useEffect)(function(){if(!y&&k){var e=P(),n=e.width,t=e.height;i((0,e$.Z)({cropArea:{h:t-2*ec.SP,w:n-2*ec.SP,x:ec.SP,y:ec.SP},isProductPage:w,pinId:c,surfaceType:"flashlight"}),{replace:!0})}},[P,i,y,w,k,c]),(0,ek.Z)(function(){a({event_type:13,view_type:72,view_parameter:3050,view_data:{pin_id:c}})}),(0,d.useEffect)(function(){var e=o.current;return e&&e8===c&&(e.scrollTop=e5),function(){e&&(e5=e.scrollTop,e8=c)}}),!k)return(0,x.jsx)(eG.Z,{objectId:"",view:72,children:(0,x.jsx)(p.xu,{dangerouslySetInlineStyle:{__style:{top:eY.Pw}},position:"relative",children:(0,x.jsx)(p.xH,{accessibilityLabel:t._('Loading Pin data', 'unauthDesktopFlashlightPage.loadingPinData', 'accessibility label for pin loading spinner'),show:!0})})});var j=k.imageSignature,I=k.description,F=e7(k),T=F.width,C=F.height,A=F.url,O=function(e){var n,t,r,a,i,l=e.initialCropArea,o=e.pin;if(l)i=e6({},l);else{var s=o.visualObjects,u=e7(o),c=u.width,d=void 0===c?1:c,p=u.height,f=void 0===p?1:p;if(s&&s.length){var m=s[0],g=m.x,y=m.y,h=m.w,v=m.h;i=(0,eA.Z)({cropArea:{x:g,y:y,w:h,h:v},scaledWidth:d,scaledHeight:f})}else{var b=d/6,S=f/6,x=d-2*b,_=f-2*S;i={x:b,y:S,w:x,h:_}}}return{x:Math.floor(null!=(n=i.x)?n:0),y:Math.floor(null!=(t=i.y)?t:0),w:Math.floor(null!=(r=i.w)?r:0),h:Math.floor(null!=(a=i.h)?a:0)}}({initialCropArea:y,pin:k}),R=l.state&&l.state.internalNavigation,E=T+b.n,D=(null!=E?E:1)+24,K={pin_id:c,imageSignature:j,crop:(0,eL.Z)({cropArea:O,scaledWidth:T,scaledHeight:C}),crop_source:_||5},M={__style:{top:140}};return(0,x.jsx)(eG.Z,{objectId:"",view:72,children:(0,x.jsxs)(d.Fragment,{children:[(0,x.jsxs)(p.xu,{alignItems:"center",color:"default",dangerouslySetInlineStyle:{__style:{top:80}},display:"flex",height:60,position:"fixed",width:"100%",zIndex:new p.Ry(4),children:[!r&&(0,x.jsx)(p.xu,{left:!0,position:"absolute",children:(0,x.jsx)(eQ.default,{})}),(0,x.jsx)(p.xu,{flex:"grow",children:(0,x.jsx)(p.X6,{align:"center",size:"400",children:w?t._('Shop similar items', 'unauthDesktopFlashlightPage.flashlightProductsFeed.header', 'Header explaining results of flashlight products search'):t._('Visually similar results', 'unauthDesktopFlashlightPage.flashlightFeed.header', 'Header explaining results of flashlight search')})}),r&&(0,x.jsx)(p.xu,{position:"absolute",right:!0,children:(0,x.jsx)(eQ.default,{icon:"directional-arrow-left"})})]}),w?(0,x.jsx)(p.xu,{dangerouslySetInlineStyle:M,position:"relative",children:(0,x.jsx)(nn,{resourceOptions:K})}):(0,x.jsxs)(p.xu,{display:"flex",paddingX:12,children:[(0,x.jsxs)(p.xu,{ref:o,dangerouslySetInlineStyle:M,height:"calc(100% - ".concat(140,"px)"),marginEnd:3,marginStart:3,overflow:"auto",position:"fixed",width:E,zIndex:new p.Ry(4),children:[(0,x.jsx)(p.xu,{dangerouslySetInlineStyle:{__style:{width:T,height:C}},"data-test-id":"flashlight-enabled-image",children:(0,x.jsxs)(p.zd,{height:C,rounding:2,width:T,children:[A&&(0,x.jsx)(p.Ee,{alt:null!=I?I:"",naturalHeight:null!=C?C:1,naturalWidth:null!=T?T:1,src:A}),(0,x.jsx)(ez,{cropArea:O,customCropper:function(e){var n=e.cropArea,t=e.cropSource,r=window.location.pathname+window.location.search,a=(0,e$.Z)({cropArea:n,cropSource:null!=t?t:6,isProductPage:w,pinId:c,surfaceType:"flashlight"});u({action:"trigger",item:"cropper-changed",within:"flashlight-page"}),a!==r&&c&&i({pathname:"/pin/".concat(c,"/visual-search/"),search:(0,eq.Z)({cropArea:n,cropSource:null!=t?t:6,surfaceType:"flashlight"})},{state:{internalNavigation:!0}})},imageSignature:null!=j?j:void 0,imageSize:{height:C,width:T},pinKey:k,showAnimation:!R,surfaceType:"flashlight",viewParameter:3050,viewType:72})]})}),(0,x.jsx)(p.xu,{"data-test-id":"closeupDescription",direction:"column",display:"flex",margin:5,maxWidth:null!=T?T:1,position:"relative",children:(0,x.jsx)(eu,{pageType:{isAuth:!1,page:"flashlight"},pinKey:k,viewportSize:"narrow"})})]}),(0,x.jsx)(p.xu,{dangerouslySetInlineStyle:{__style:e6(e6({},M.__style),r?{marginRight:"".concat(D,"px")}:{marginLeft:"".concat(D,"px")})},position:"relative",width:"100%",children:(0,x.jsx)(ne,{resourceOptions:K})})]})]})})}var nr=(void 0!==u||(u=t(887492)).hash&&"01839fc3bcd9cdaf206873364167d157"!==u.hash&&console.error("The definition of 'UnauthDesktopFlashlightPageFetchData_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),u),na=(void 0!==c||(c=t(854734)).hash&&"c1c702b23a1454b46f8e2fa9d8036257"!==c.hash&&console.error("The definition of 'UnauthDesktopFlashlightPageFetchDataPinQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),c);function ni(){var e,n=(0,e1.Z)(),t=(0,h.Z)(n.params.id||"").pinId,r=(0,m.Z)({strategy:"Legacy",query:na,variables:{pinId:t},useGetLegacyData:function(e){var n=e.pinId;return(0,y.Z)({name:"PinResource",options:{id:n,field_set_key:"detailed",fetch_visual_search_objects:!0}}).data}}),a=(null==r||null==(e=r.v3GetPinQuery)?void 0:e.__typename)==="V3GetPin"?r.v3GetPinQuery.data:null,i=(0,f.Z)(nr,a);return(0,x.jsx)(nt,{pinKey:i})}function nl(){var e=(0,g.Z)();return(0,x.jsx)(d.Suspense,{fallback:(0,x.jsx)(p.xH,{accessibilityLabel:e._('Loading Pin data', 'unauthDesktopFlashlightPage.loadingPinData', 'accessibility label for pin loading spinner'),show:!0}),children:(0,x.jsx)(ni,{})})}},67854:function(e,n,t){t.d(n,{$V:function(){return a},M:function(){return r},Qs:function(){return s},nn:function(){return i},qN:function(){return o},tX:function(){return l}});var r=520,a=6,i=16,l=4,o=2,s=6},603284:function(e,n,t){t.d(n,{Z:function(){return y}});var r=t(387784),a=t(746868),i=t(360033),l=t(495773),o=t(680811);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?u(Object(t),!0).forEach(function(n){var r,a;r=n,a=t[n],(r=d(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function d(e){var n=function(e,n){if("object"!=s(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!=s(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==s(n)?n:n+""}function p(e,n){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e})(e,n)}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(f=function(){return!!e})()}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),e&&p(a,e);var n,t,r=(n=f(),function(){var e,t=m(a);return e=n?Reflect.construct(t,arguments,m(this).constructor):t.apply(this,arguments),function(e,n){if(n&&("object"==s(n)||"function"==typeof n))return n;if(void 0!==n)throw TypeError("Derived constructors may only return object or undefined");if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this,e)});function a(){if(!(this instanceof a))throw TypeError("Cannot call a class as a function");return r.apply(this,arguments)}return t=[{key:"componentDidMount",value:function(){var e=this.props;(0,e.setCurrentPageData)({viewData:e.viewData,viewParameter:e.viewParameter,viewType:e.viewType})}},{key:"componentDidUpdate",value:function(e){var n=this.props,t=n.setCurrentPageData,r=n.viewData,a=n.viewParameter,l=n.viewType;a===e.viewParameter&&l===e.viewType&&(0,i.ZP)(r,e.viewData)||t({viewData:r,viewParameter:a,viewType:l})}},{key:"componentWillUnmount",value:function(){this.props.clearCurrentPageData()}},{key:"render",value:function(){var e=this.props,n=e.auxData,t=e.children,r=e.component,a=e.objectIdStr,i=e.viewData,s=e.viewParameter,u=e.viewType,c=e.clientTrackingParams;return(0,o.jsx)(l.Z,{auxData:n,clientTrackingParams:c,component:r,objectIdStr:a,viewData:i,viewParameter:s,viewType:u,children:t})}}],function(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d(r.key),r)}}(a.prototype,t),Object.defineProperty(a,"prototype",{writable:!1}),a}(r.Component);function y(e){var n=(0,a.A$)(),t=n.setViewContextData,r=n.clearViewContextData;return(0,o.jsx)(g,c(c({},e),{},{clearCurrentPageData:r,setCurrentPageData:t}))}},495773:function(e,n,t){t.d(n,{Z:function(){return u}});var r=t(387784),a=t(104999),i=t(865043);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}var s=function(e,n){var t,r=Object.keys(t={event_type:13,view_type:e.viewType,view_parameter:e.viewParameter,view_data:e.viewData,aux_data:e.auxData,object_id_str:e.objectIdStr,component:e.component,clientTrackingParams:e.clientTrackingParams,element:e.element}).reduce(function(e,n){return void 0===t[n]&&delete e[n],e},function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach(function(n){var r,a;r=n,a=t[n],(r=function(e){var n=function(e,n){if("object"!=l(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!=l(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==l(n)?n:n+""}(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({},t));-1===Object.keys(r).indexOf("view_type")&&(0,i.My)("mweb.logging.null_view_type"),n(r)};function u(e){var n=e.auxData,t=e.clientTrackingParams,i=e.children,l=e.component,o=e.element,u=e.objectIdStr,c=e.viewData,d=e.viewParameter,p=e.viewType,f=(0,a.Z)(),m=JSON.stringify(n),g=JSON.stringify(c);return(0,r.useEffect)(function(){s(e,f)},[f,m,t,l,o,u,g,d,p]),r.Children.only(i)}},596663:function(e,n,t){t.d(n,{G9:function(){return l},SY:function(){return s},kk:function(){return i},mb:function(){return u},s:function(){return o}});var r=t(806513),a=t(684570),i=function(e){var n=e.isDesktop,t=(0,a.Z)({isDesktop:n});return t?-t:0},l=-2,o=function(e){var n=e.trafficSource,t=e.deviceType,a=e.experimentalGutter,i=null!=a?a:4*r.jC;return"desktop"===t?i:"board"===n?4:void 0},s=function(e){var n=e.deviceType,t=e.customMWebColumnWidth,a=e.experimentalColumnWidth,i=null!=a?a:r.yF;return"desktop"===n?i:t||200},u=function(e){var n=e.gutterWidth,t=e.itemWidth,a=e.className,i=e.minColumns,l=void 0===i?r.yc:i,o=e.maxColumns,s=void 0===o?r.g5:o,u=t+n;return Array.from({length:s+1-l},function(e,n){return n+l}).map(function(e){return{minWidth:e===l?0:e*u,maxWidth:e===s?null:(e+1)*u-1,styles:"\n      .".concat(a," {\n        max-width: ").concat(e*u-n,"px;\n      }\n      ")}}).map(function(e){var n=e.minWidth,t=e.maxWidth,r=e.styles;return"\n    @media (min-width: ".concat(n,"px) ").concat(t?"and (max-width: ".concat(t,"px)"):""," {\n      ").concat(r,"\n    }\n  ")}).join("")}},759302:function(e,n,t){var r=t(387784),a=t(20256),i=t(806513),l=t(59111),o=t(739405),s=t(838751),u=t(680811),c="PinGridSkeletonLoader__tall",d="PinGridSkeletonLoader__short",p=function(e){var n=e.size;return(0,u.jsx)(a.xu,{padding:1,children:(0,u.jsx)("div",{className:"tall"===n?c:d})})},f=function(e){var n=e.children;return(0,u.jsx)(a.kC,{direction:"column",gap:{row:0,column:2},children:n})};n.Z=function(e){var n=e.partialViewportWidth,t="desktop"===(0,o.ZP)(),m=t?i.yF:i.tG;return(0,u.jsxs)(r.Fragment,{children:[(0,u.jsx)(l.Z,{unsafeCSS:[{name:c,height:250},{name:d,height:150}].map(function(e){var n=e.name,t=e.height;return(0,s.Z)({name:n,width:m,height:t})}).join("")}),(0,u.jsx)(a.xu,{"data-test-id":"pin-grid-skeleton-loader",marginEnd:i.qG,marginStart:i.qG,children:t?(0,u.jsxs)(a.kC,{direction:"row",gap:{row:i.jC,column:0},children:[(0,u.jsx)(f,{children:(0,u.jsx)(p,{size:"tall"})}),(0,u.jsx)(f,{children:(0,u.jsx)(p,{size:"short"})}),(0,u.jsx)(f,{children:(0,u.jsx)(p,{size:"tall"})}),!n&&(0,u.jsx)(f,{children:(0,u.jsx)(p,{size:"short"})})]}):(0,u.jsxs)(a.kC,{direction:"row",justifyContent:"center",overflow:"hidden",children:[(0,u.jsxs)(f,{children:[(0,u.jsx)(p,{size:"tall"}),(0,u.jsx)(p,{size:"short"}),(0,u.jsx)(p,{size:"tall"})]}),(0,u.jsxs)(f,{children:[(0,u.jsx)(p,{size:"short"}),(0,u.jsx)(p,{size:"tall"}),(0,u.jsx)(p,{size:"short"}),(0,u.jsx)(p,{size:"tall"})]})]})})]})}},838751:function(e,n){n.Z=function(e){var n=e.name,t=e.width,r=e.height,a="".concat(t).concat("number"==typeof t?"px":""),i="".concat(r).concat("number"==typeof r?"px":""),l="number"==typeof t?t:236;return"\n.".concat(n," {\n  -webkit-animation-duration: 1s;\n  -webkit-animation-fill-mode: forwards;\n  -webkit-animation-iteration-count: infinite;\n  -webkit-animation-name: ").concat(n,"_placeHolderShimmer;\n  -webkit-animation-timing-function: linear;\n  border-radius: 16px;\n  background: #f6f7f9;\n  background-image: linear-gradient(to right, #f6f7f9 0%, #e9ebee 20%, #f6f7f9 40%, #f6f7f9 100%);\n  background-repeat: no-repeat;\n  background-size: ").concat(l," ").concat(i,";\n  width: ").concat(a,";\n  height: ").concat(i,";\n}\n\n@keyframes ").concat(n,"_placeHolderShimmer{\n  0% {\n      background-position: -").concat(l,"px 0;\n  }\n  100% {\n      background-position: ").concat(l,"px 0;\n  }\n}\n")}},19456:function(e,n,t){t.d(n,{Z:function(){return ng}});var r,a,i,l,o,s,u,c,d,p,f,m=t(387784);t(115821);var g=t(20256),y=t(470205),h=t(183e3),v=t(281215),b=t(24246),S=t(619481),x=t(890678),_=t(854897),w=t(550759),k=t(653551),P=t(480610),j=t(531996),I=t(221175),F=t(382964),T=t(575820),C=t(473156),A=t(246427),O=t(67854),R=t(157997),E=t(226966),D=t(230201),K=t(400962),M=t(197908),L=t(680811);function Z(e){var n=e.arrowType,t=e.viewParameter,r=e.viewType,a=(0,b.Z)(),i=(0,k.s0)(),l=(0,k.TH)(),o=(0,K.ou)().previous,s=(0,D.u)().logContextEvent,u=(0,M.Z)(l.pathname);return(0,L.jsx)(g.xu,{"data-test-id":"go-back-button",children:(0,L.jsx)(g.hU,{accessibilityLabel:a._('Go back', 'Accessible icon for close button', 'Accessible icon for close button'),icon:null!=n?n:"directional-arrow-left",iconColor:"darkGray",onClick:function(){if(s({event_type:101,view_type:r,element:34,view_parameter:t}),0===o.length)return void i("/pin/".concat(u,"/"),{replace:!0});i(-1)}})})}var B=t(104811),U=t(609252),N=t(31863);function z(e){var n=e.isProductPage,t=e.title,r=e.viewParameter,a=e.viewType,i=(0,m.useRef)(null);return(0,m.useEffect)(function(){return i.current&&U.Z.addObstruction("top",i.current),function(){i.current&&U.Z.removeObstruction("top",i.current)}}),(0,L.jsx)(N.Z,{position:n?"sticky":"fixed",shouldShowShadow:!0,children:(0,L.jsxs)(g.xu,{color:"default",dangerouslySetInlineStyle:{__style:{paddingBottom:"12px"}},display:"flex",justifyContent:"center",children:[(0,L.jsx)(g.xu,{alignItems:"center",display:"flex",height:48,left:!0,marginStart:5,position:"absolute",right:!0,width:48,children:(0,L.jsx)(Z,{arrowType:t?"directional-arrow-left":"cancel",viewParameter:r,viewType:a})}),(0,L.jsx)(g.xu,{ref:i,alignItems:"center",color:"default","data-test-id":"related-products-header",display:"flex",height:48,children:(0,L.jsx)(B.Z,{title:t})})]})})}var H=t(357698),W=t(28031),G=t(23641),V=t(893957),Y=t(902123);function X(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function q(e){var n,t=e.defaultPillColor,r=e.hoveredPillColor,a=e.pressedPillColor,i=e.isSelected,l=e.label,o=e.onTap,s=e.ref,u=e.selectedPillColor,c=function(e){if(Array.isArray(e))return e}(n=(0,m.useState)(t))||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,i,l,o=[],s=!0,u=!1;try{for(i=(t=t.call(e)).next;!(s=(r=i.call(t)).done)&&(o.push(r.value),2!==o.length);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(u)throw a}}return o}}(n,2)||function(e,n){if(e){if("string"==typeof e)return X(e,2);var t=({}).toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?X(e,2):void 0}}(n,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),d=c[0],p=c[1];return(0,m.useEffect)(function(){p(i?u:t)},[i,u,t]),(0,L.jsx)(g.iP,{onMouseDown:function(){return p(a)},onMouseEnter:function(){i||p(r)},onMouseLeave:function(){i||p(t)},onTap:o,rounding:4,tapStyle:"compress",children:(0,L.jsx)(g.xu,{ref:s,dangerouslySetInlineStyle:{__style:{background:d,backdropFilter:"blur(80px)",userSelect:"none"}},"data-test-id":"descriptor-pill-".concat(l),paddingX:4,paddingY:2,rounding:4,children:(0,L.jsx)(g.kC,{alignItems:"center",minHeight:32,children:(0,L.jsx)(g.mg,{color:i?"light":"dark",overflow:"noWrap",children:l})})})})}var $=function(e){var n=e.showBackArrow,t=e.showFwdArrow,r=e.handleClickBack,a=e.handleClickForward,i=(0,b.Z)();return(0,L.jsxs)(g.xu,{alignItems:"center",bottom:!0,dangerouslySetInlineStyle:{__style:{pointerEvents:"none"}},"data-test-id":"descriptors-navigation-arrows",display:"flex",justifyContent:"between",left:!0,position:"absolute",right:!0,top:!0,children:[(0,L.jsx)(g.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"auto"}},marginStart:2,children:n&&(0,L.jsx)(g.hU,{accessibilityLabel:i._('Back', 'descriptor.navArrow.back', 'Accessibility label for a button that navigates back to previous search guides'),bgColor:"white",dataTestId:"descriptor-bar-back-button",icon:"arrow-back",onClick:r,size:"md"})}),(0,L.jsx)(g.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"auto"}},marginEnd:2,children:t&&(0,L.jsx)(g.hU,{accessibilityLabel:i._('Forward', 'descriptor.navArrow.forward', 'Accessibility label for a button that navigates forward to see more search guides'),bgColor:"white",dataTestId:"descriptor-bar-forward-button",icon:"arrow-forward",onClick:a,size:"md"})})]})},J=function(e,n,t,r,a){var i=(0,D.u)().logContextEvent,l=(0,m.useRef)([]),o=(0,m.useRef)([]);return(0,m.useEffect)(function(){var s=0,u=l.current.map(function(r,a){var i=(null==r?void 0:r.offsetWidth)||0,l=s,o=s+i;s+=i+4;var u=(t[a]||{auxData:{}}).auxData,c=e+n,d=l+16>e&&l<c,p=o>e&&o-16<c;return{moduleId:(null==u?void 0:u.moduleId)||"",isVisible:d||p}});u.forEach(function(e,n){var t=o.current[n];if((!t||!1===t.isVisible)&&e.isVisible){var l=(a||{}).auxData;i({event_type:9993,view_type:72,view_parameter:3050,component:14047,aux_data:{image_signature:r||"",descriptor:null==l?void 0:l.query}})}}),o.current=u},[l,e,n,t,i,r,a,o]),{descriptorsRefs:l}},Q=t(774838);function ee(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,i,l,o=[],s=!0,u=!1;try{if(i=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=i.call(t)).done)&&(o.push(r.value),o.length!==n);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(u)throw a}}return o}}(e,n)||function(e,n){if(e){if("string"==typeof e)return en(e,n);var t=({}).toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?en(e,n):void 0}}(e,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function en(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var et=function(e){var n=(0,m.useRef)(null),t=(0,Q.B)().isRTL,r=(0,m.useRef)(!1),a=ee((0,m.useState)(0),2),i=a[0],l=a[1],o=ee((0,m.useState)(0),2),s=o[0],u=o[1],c=ee((0,m.useState)(!1),2),d=c[0],p=c[1],f=ee((0,m.useState)(!1),2),g=f[0],y=f[1],h=n.current,v=null!=h?h:{},b=v.clientWidth,S=void 0===b?0:b,x=v.scrollWidth,_=void 0===x?0:x,w=S||0,k=!!h&&w>=(_||0),P=e.length;(0,m.useEffect)(function(){var e=(null==h?void 0:h.scrollWidth)||0,n=0;Array.from((null==h?void 0:h.children)||[]).slice(0,i).forEach(function(e){n+=e.offsetWidth||0}),u(n=Math.min(n,e-S+8));var t=e-n,r=w>=e;r&&0!==i&&l(0),p(i>0&&!r),y(t>w&&i<P&&!r)},[h,i,P,w,t,S]);var j=(0,m.useCallback)(function(e){if(h){var n,t,r=Array.from(h.children);if(!(e<0)&&!(e>=r.length)){var a=0;r.slice(0,e).forEach(function(e){var n;a+=null!=(n=null==e?void 0:e.offsetWidth)?n:0});var i=null!=(n=null==(t=r[e])?void 0:t.offsetWidth)?n:0;if(a<s){u(a),l(e);return}if(a+i>s+S){u(a+i-S),l(e);return}l(e)}}},[h,s,S]),I=(0,m.useCallback)(function(e,n){var t,r,a=e.current;if(a&&!(n<0)&&!(n>=a.length)){var i=Array.from({length:n}).reduce(function(e,n,t){var r,i;return e+(null!=(r=null==(i=a[t])?void 0:i.offsetWidth)?r:0)},0),o=i+(null!=(t=null==(r=a[n])?void 0:r.offsetWidth)?t:0);if(!(i>=s)||!(o<=s+S)){var c=i<s?i:o-S;u(Math.max(0,Math.min(c,Math.max(0,_-S+8)))),l(Array.from({length:a.length}).reduce(function(e,n,t){var r,i,l=e.foundIndex,o=e.accWidth;if(-1!==l)return e;var s=o+(null!=(r=null==(i=a[t])?void 0:i.offsetWidth)?r:0);return{foundIndex:o>=c?t:-1,accWidth:s}},{foundIndex:-1,accWidth:0}).foundIndex)}}},[s,S,_]),F=(0,m.useCallback)(function(e){if("Tab"===e.key){var n=Array.from((null==h?void 0:h.children)||[]),t=document.activeElement,r=n.findIndex(function(e){return e.contains(t)});-1!==r&&(!e.shiftKey&&r<n.length-1?j(r+1):e.shiftKey&&r>0&&j(r-1))}},[h,j]);return(0,m.useEffect)(function(){if(h)return h.addEventListener("keydown",F,!0),function(){h.removeEventListener("keydown",F,!0)}},[h,F]),{barContainer:n,centerModules:k,clientWidth:S,offset:s,showBackArrow:d,showFwdArrow:g,onFocus:function(){r.current||l(i)},index:i,setIndex:l,handleClickForward:function(){i+2<P?l(i+2):l(P-2)},handleClickBack:function(){i-2>=0?l(i-2):l(0)},onMouseDown:function(){r.current=!0},scrollToPillByOffset:I}};function er(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,i,l,o=[],s=!0,u=!1;try{if(i=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=i.call(t)).done)&&(o.push(r.value),o.length!==n);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(u)throw a}}return o}}(e,n)||function(e,n){if(e){if("string"==typeof e)return ea(e,n);var t=({}).toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ea(e,n):void 0}}(e,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ea(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var ei=(void 0!==r||(r=t(258138)).hash&&"9d15639e8d9dd61426917dc218fbb3a6"!==r.hash&&console.error("The definition of 'Descriptors_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r);function el(e){var n=e.pressedPillColor,t=e.defaultPillColor,r=e.descriptorModules,a=e.hoveredPillColor,i=e.pinKey,l=e.selectedPillColor,o=e.isWebImageSearchRedesign,s=er((0,m.useState)(),2),u=s[0],c=s[1],d=er((0,m.useState)(0),2),p=d[0],f=d[1],y=(0,k.s0)(),v=(0,k.TH)().search,b=et(r),S=b.barContainer,x=b.clientWidth,_=b.centerModules,w=b.offset,P=b.showBackArrow,j=b.showFwdArrow,I=b.handleClickForward,F=b.handleClickBack,C=b.onFocus,A=b.onMouseDown,O=b.scrollToPillByOffset,R=(0,h.Z)(ei,i),E=(0,D.u)().logContextEvent,K=J(w,x,r,R.imageSignature||"",u).descriptorsRefs;(0,V.Z)(function(){if(void 0===u){var e=r.findIndex(function(e){return(e.display||{isSelected:!1}).isSelected}),n=(0,T.mB)(v).hybrid_search_param;-1!==e&&n&&(c(r[e]),O(K,e-1))}});var M=function(e){if(!e)return 0;var n=e.getBoundingClientRect(),t=window.innerHeight;return n.bottom>t?n.bottom-t:0};(0,m.useEffect)(function(){f(o?M(S.current):0)},[S,o]);var Z=function(e){var n,t=e,r=(0,T.mB)(v).surfaceType;r&&(t=e.replace(new RegExp("^(.*surfaceType=".concat(r,").*$")),"$1")),y(null!=(n=t)?n:"",{replace:!0})},B=function(e){var n,t=(0,T.mB)(v).surfaceType,r=e;t&&(r=e.replace(/(surfaceType=)[^&]*/,"$1".concat(t))),y(null!=(n=r)?n:"",{replace:!0})},U=function(e){var n=e.id,t=(u||{}).id;return null!=n&&t===n},N=function(e,n){var t=U(e),r=(e.action||{}).feedUrl;r&&(t?(Z(r),c(void 0)):(B(r),O(K,n),c(e)));var a=e.auxData;E({event_type:102,view_type:72,view_parameter:3050,component:14047,aux_data:{image_signature:R.imageSignature||"",descriptor:null==a?void 0:a.query}})};return(0,L.jsx)(Y.q,{children:function(e){var i=e.hovered,o=e.onMouseEnter,s=e.onMouseLeave;return(0,L.jsxs)(g.xu,{dangerouslySetInlineStyle:{__style:{bottom:p}},"data-test-id":"scrollable-descriptor-bar-root",left:!0,onMouseEnter:o,onMouseLeave:s,overflow:"hidden",position:"absolute",right:!0,children:[(0,L.jsx)(g.xu,{dangerouslySetInlineStyle:{__style:{left:"-".concat(w,"px"),transition:"left 0.3s, right 0.3s"}},position:"relative",children:(0,L.jsx)(g.xu,{ref:S,display:"flex",justifyContent:_?"center":void 0,marginStart:2,paddingY:2,children:r.map(function(e,r){var i=e.action,o=e.display;if(null==(i||{}).feedUrl)return null;var s=(o||{}).displayText;return(0,L.jsx)(g.xu,{marginEnd:1,onFocus:C,onMouseDown:A,children:(0,L.jsx)(q,{ref:function(e){K.current[r]=e},defaultPillColor:t,hoveredPillColor:a,isSelected:U(e),label:s||"",onTap:function(){return N(e,r)},pressedPillColor:n,selectedPillColor:l})},"descriptors-module-".concat(e.id||r))})})}),i&&(0,L.jsx)($,{handleClickBack:function(){F();var e=(u||{}).auxData;E({event_type:108,view_type:72,view_parameter:3050,component:14046,aux_data:{image_signature:R.imageSignature||"",descriptor:null==e?void 0:e.query}})},handleClickForward:function(){I();var e=(u||{}).auxData;E({event_type:108,view_type:72,view_parameter:3050,component:14046,aux_data:{image_signature:R.imageSignature||"",descriptor:null==e?void 0:e.query}})},showBackArrow:P,showFwdArrow:j})]})}})}var eo=t(229793),es=t(854929),eu=t(938306),ec=t(501010),ed=t(128608),ep=t(371266),ef=t(518112),em=t(59111),eg=t(383903),ey=t(674610),eh=t(509307),ev=t(979173);function eb(e){return(eb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eS(e){return function(e){if(Array.isArray(e))return eP(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ek(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ex(e,n,t,r,a,i,l){try{var o=e[i](l),s=o.value}catch(e){return void t(e)}o.done?n(s):Promise.resolve(s).then(r,a)}function e_(e){return function(){var n=this,t=arguments;return new Promise(function(r,a){var i=e.apply(n,t);function l(e){ex(i,r,a,l,o,"next",e)}function o(e){ex(i,r,a,l,o,"throw",e)}l(void 0)})}}function ew(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,i,l,o=[],s=!0,u=!1;try{if(i=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=i.call(t)).done)&&(o.push(r.value),o.length!==n);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(u)throw a}}return o}}(e,n)||ek(e,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ek(e,n){if(e){if("string"==typeof e)return eP(e,n);var t=({}).toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?eP(e,n):void 0}}function eP(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function ej(e){var n=e.bitmapMasks,r=e.hoveredCutoutIndex,a=e.imageContainerX,i=e.imageContainerY,l=e.pinImageHovered,o=e.pinImageHeight,s=e.pinImageUrl,u=e.pinImageWidth,c=e.selectedCutoutIndex,d=e.setHoveredCutoutIndex,p=e.setSelectedCutoutIndex,f=e.trafficSource,y=e.viewParameter,h=e.viewType,v=(0,k.TH)(),b=(0,D.u)().logContextEvent,S=(0,k.s0)(),x=(0,m.useRef)(null),_=ew((0,m.useState)(!1),2),w=_[0],P=_[1],j=ew((0,m.useState)([]),2),I=j[0],F=j[1],C=ew((0,m.useState)(!1),2),A=C[0],O=C[1],R=ew((0,m.useState)(!1),2),E=R[0],K=R[1],M=(0,T.mB)(v.search),Z=M.w,B=M.h,U=(0,m.useMemo)(function(){return Number(Z)===u&&Number(B)===o||void 0===Z&&void 0===B},[B,o,u,Z]),N=(0,m.useMemo)(function(){return{commerce_data:JSON.stringify({pin_has_cutout:!0})}},[]);(0,m.useEffect)(function(){if(n){var e=[],r=[];return n.forEach(function(e){var n,t,i=e.id,l=e.mask_image,s=e.mask_bounds,c=e.is_hidden,d=ew(null!=(n=null==s?void 0:s[0])?n:[],2),p=d[0],f=d[1],m=ew(null!=(t=null==s?void 0:s[1])?t:[],2),g=m[0],y=m[1];if(void 0!==i&&void 0!==l&&void 0!==p&&void 0!==f&&void 0!==g&&void 0!==y){var h=function(e){return a.apply(this,arguments)}({id:i,isHidden:!!c,maskHeightRatio:y,maskImage:l,maskWidthRatio:g,maskXRatio:p,maskYRatio:f,pinImageHeight:o,pinImageWidth:u});r.push(h)}}),e_(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(r);case 2:F(e.sent);case 4:case"end":return e.stop()}},e)}))(),function(){e.forEach(function(e){URL.revokeObjectURL(e)})}}function a(){return(a=e_(regeneratorRuntime.mark(function n(r){var a,i,l,o,s,u,c,d,p,f,m,g,y,h,v,b,S,x,_,w;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a=r.id,i=r.isHidden,l=r.maskHeightRatio,o=r.maskImage,s=r.maskWidthRatio,u=r.maskXRatio,c=r.maskYRatio,d=r.pinImageHeight,p=r.pinImageWidth,n.next=3,t.e("43897").then(t.bind(t,896353));case 3:return m=(f=n.sent).ContourTracer,g=f.initializeWasm,n.next=7,g();case 7:return y=new m,h=atob(o),v=new Blob([Uint8Array.from(h,function(e){return e.charCodeAt(0)})],{type:"image/png"}),n.next=13,createImageBitmap(v);case 13:return b=n.sent,S=y.trace(b,{useAlpha:!1,threshold:80}),x=URL.createObjectURL(v),e.push(x),_=p*s,w=d*l,n.abrupt("return",{contours:S,contourXRatio:_/b.width,contourYRatio:w/b.height,id:a,isHidden:i,maskHeightRatio:l,maskUrl:x,maskWidthRatio:s,maskXRatio:u,maskYRatio:c});case 20:case"end":return n.stop()}},n)}))).apply(this,arguments)}},[n,o,u]);var z=(0,m.useMemo)(function(){var e=[];return I.forEach(function(n,t){var r=n.contours;r&&0!==r.length&&(e[t]=r.map(function(e){var n=e.points.map(function(e){return e.x}),t=e.points.map(function(e){return e.y});return{minX:Math.min.apply(Math,eS(n)),minY:Math.min.apply(Math,eS(t)),maxX:Math.max.apply(Math,eS(n)),maxY:Math.max.apply(Math,eS(t))}}))}),e},[I]),H=(0,m.useCallback)(function(e){for(var n=e.clientX-a,t=e.clientY-i,l=I.length-1;l>=0;l-=1){var s=function(e){var a=I[e];if(e===c||!a)return"continue";var i=a.contours,l=a.contourXRatio,s=a.contourYRatio,p=a.maskXRatio,f=a.maskYRatio,m=(n-p*u)/l,g=(t-f*o)/s,v=z[e];if(i.some(function(e,n){var t=null==v?void 0:v[n];return t&&m>=t.minX&&m<=t.maxX&&g>=t.minY&&g<=t.maxY&&(0,eh.Z)({x:m,y:g},e.points)}))return r!==e&&(null==d||d(e),b({event_type:105,element:14154,view_parameter:y,view_type:h,aux_data:{commerce_data:JSON.stringify({pin_has_cutout:!0})}})),{v:void 0}}(l);if("continue"!==s&&"object"===eb(s))return s.v}null==d||d(null)},[I,z,r,a,i,b,o,u,c,d,y,h]),W=function(){return P(!1)},G=function(e){(e.movementX||e.movementY)&&P(!0),0===e.buttons?H(e):null==d||d(null)},V=function(e){H(e)},Y=function(){return null==d?void 0:d(null)},X=(0,m.useCallback)(function(){if(w||null===r||!I[r])return void P(!1);null==p||p(r);var e=I[r],n=e.maskXRatio,t=e.maskYRatio,a=e.maskWidthRatio,i=e.maskHeightRatio,l=(0,eg.Z)({cropArea:{x:n,y:t,w:a,h:i},scaledWidth:u,scaledHeight:o}),s=(0,ep.Z)({cropArea:l,cropSource:9,trafficSource:f});s!==window.location.search&&(b({event_type:101,element:14154,view_parameter:y,view_type:h,aux_data:N}),S("".concat(window.location.pathname).concat(s),{replace:!0}))},[N,I,w,S,r,b,o,u,p,f,y,h]);return((0,m.useEffect)(function(){var e=x.current;return e&&(e.addEventListener("mousedown",W),e.addEventListener("mousemove",G),e.addEventListener("mouseup",V),e.addEventListener("mouseleave",Y),e.addEventListener("click",X)),function(){e&&(e.removeEventListener("mousedown",W),e.removeEventListener("mousemove",G),e.removeEventListener("mouseup",V),e.removeEventListener("mouseleave",Y),e.removeEventListener("click",X))}}),n)?(0,L.jsxs)(g.xu,{ref:x,bottom:!0,dangerouslySetInlineStyle:{__style:{cursor:"number"==typeof r?"pointer":"auto"}},"data-bitmaps-ready":I.length>0,"data-test-id":"cutouts-container",left:!0,position:"absolute",right:!0,role:"none",top:!0,children:[(0,L.jsx)(em.Z,{unsafeCSS:ey.iF}),I.map(function(e,n){return(0,L.jsx)(ev.Z,{auxData:N,bitmapData:e,hasAnimatedCutoutsOnLand:E,hasLoggedRender:A,hoveredCutoutIndex:r,index:n,isPinLevelCrop:U,pinImageHeight:o,pinImageHovered:l,pinImageUrl:s,pinImageWidth:u,selectedCutoutIndex:c,setHasAnimatedCutoutsOnLand:K,setHasLoggedRender:O,viewParameter:y,viewType:h},e.id)})]}):null}var eI=t(415349),eF=t(225580);function eT(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,i,l,o=[],s=!0,u=!1;try{if(i=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=i.call(t)).done)&&(o.push(r.value),o.length!==n);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(u)throw a}}return o}}(e,n)||function(e,n){if(e){if("string"==typeof e)return eC(e,n);var t=({}).toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?eC(e,n):void 0}}(e,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eC(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var eA=(void 0!==a||(a=t(911486)).hash&&"fbf2d3b93402a9dd783073db316c0f92"!==a.hash&&console.error("The definition of 'VisualSearchCropper_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a);function eO(e){var n=e.cropArea,t=e.cropSource,r=e.imageContainerX,a=void 0===r?0:r,i=e.imageContainerY,l=void 0===i?0:i,o=e.imageSize,s=e.pinKey,u=e.trafficSource,c=e.viewParameter,d=e.viewType,p=(0,ec.Z)().checkExperiment,f=(0,h.Z)(eA,s),g=(0,k.s0)(),y=(0,R.D)(),v=(0,F.Z)({pinKey:f,maxWidth:I.Wm}).getNormalizedPinImage,b=(0,eI.Z)({pinKey:f,isVisualSearch:!0}),S=eT((0,m.useState)("none"),2),x=S[0],_=S[1],w=eT((0,m.useState)(null),2),P=w[0],j=w[1],T=eT((0,m.useState)(-1),2),C=T[0],E=T[1],D=(null!=b?b:{}).bitmap_masks,K=(0,m.useMemo)(function(){return(null!=D?D:[]).filter(eF.R7).map(function(e){var n=e.id,t=e.mask_bounds,r=eT(t[0],2),a=r[0],i=r[1],l=eT(t[1],2);return{x:a,y:i,w:l[0],h:l[1],id:n}})},[D]);return(0,m.useEffect)(function(){var e,t,r=(0,A.Z)({cropArea:n,scaledHeight:null!=(e=o.height)?e:0,scaledWidth:null!=(t=o.width)?t:0});if(K&&K.length){var a=(0,ed.Z)(K,r);_("cutouts"),E(a.indexToHide)}},[n,K,o.height,o.width]),(0,L.jsx)(eu.Z,{cropArea:n,cropSource:t,hoveredCutoutIndex:P,imageContainerX:a,imageContainerY:l,imageSize:o,objectDetection:x,onChange:function(e){var n=e.cropArea,t=e.cropSource;if("cutouts"===x){var r,a,i=(0,A.Z)({cropArea:n,scaledHeight:null!=(r=o.height)?r:0,scaledWidth:null!=(a=o.width)?a:0}),l=(0,ed.Z)(K,i),s=l.isCropAreaOnDotArea,c=l.indexToHide;s&&(t=9,null==E||E(c))}var d=window.location.search,p=(0,ep.Z)({cropArea:n,cropSource:t,trafficSource:u});d!==p&&g({pathname:window.location.pathname,search:p},{replace:!0})},setHoveredCutoutIndex:j,setSelectedCutoutIndex:E,viewParameter:c,viewType:d,children:function(){if("cutouts"!==x||!(null!=D&&D.length))return null;var e=function(){if(y){var e,n,t,r,a,i;return{pinImageWidth:O.M,pinImageHeight:O.M/(null!=(e=null==f||null==(n=f.image)?void 0:n.width)?e:1)*(null!=(t=null==f||null==(r=f.image)?void 0:r.height)?t:1),pinImageUrl:null!=(a=null==f||null==(i=f.image)?void 0:i.url)?a:""}}var l=v(),o=l.height;return{pinImageWidth:l.width,pinImageHeight:o,pinImageUrl:l.url}}(),n=e.pinImageWidth,t=e.pinImageHeight,r=e.pinImageUrl,i=p("web_cutout_glow").anyEnabled?ef.default:ej;return(0,L.jsx)(i,{bitmapMasks:D,hoveredCutoutIndex:P,imageContainerX:a,imageContainerY:l,pinImageHeight:t,pinImageUrl:r,pinImageWidth:n,selectedCutoutIndex:C,setHoveredCutoutIndex:j,setSelectedCutoutIndex:E,trafficSource:u,viewParameter:c,viewType:d})}()})}var eR=(void 0!==i||(i=t(447963)).hash&&"727c8ab2c1c256e3b4478a36890f92d6"!==i.hash&&console.error("The definition of 'RelatedProductsImageContent_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);function eE(e){var n=e.cropArea,t=e.cropSource,r=e.description,a=e.descriptorModules,i=e.height,l=e.imageContainerX,o=e.imageContainerY,s=e.imageUrl,u=e.pinKey,c=e.trafficSource,d=e.viewParameter,p=e.viewType,f=e.width,m=(0,R.D)(),y=(0,h.Z)(eR,u),v=(0,eo.Z)(y.dominantColor),b=v.defaultColor,S=v.selectedColor,x=v.hoveredColor,_=v.pressedColor,w=((0,W.Z)()||{}).height,k=void 0===w?0:w,P=o+i,j=P>k,I=j?Math.min(P-64-12,k-64-12):i-64;return(0,L.jsxs)(g.xu,{"data-test-id":"flashlight-enabled-image",height:i,width:f,children:[(0,L.jsxs)(g.zd,{height:i,rounding:m?6:4,width:f,children:[(0,L.jsx)(H.Z,{_enableViewTransitions:!0,type:"image",children:(0,L.jsx)(g.Ee,{alt:r,naturalHeight:i,naturalWidth:f,onLoad:function(){(0,G.Nx)("visualSearchMainPinImageRender")},src:s})}),(0,L.jsx)(eO,{cropArea:n,cropSource:t,imageContainerX:l,imageContainerY:o,imageSize:{height:i,width:f},pinKey:y,trafficSource:c,viewParameter:d,viewType:p}),m&&(0,L.jsx)(g.xu,{dangerouslySetInlineStyle:{__style:{insetInlineStart:0}},position:"absolute",top:!0,children:(0,L.jsx)(es.Z,{defaultPillColor:b,hoveredPillColor:x,pressedPillColor:_,viewParameter:d,viewType:p})})]}),a&&a.length>0&&(0,L.jsx)(g.xu,{dangerouslySetInlineStyle:{__style:{top:I}},height:64,position:j?"fixed":"absolute",width:f,children:(0,L.jsx)(el,{defaultPillColor:b,descriptorModules:a,hoveredPillColor:x,pinKey:y,pressedPillColor:_,selectedPillColor:S})})]})}var eD=t(17667),eK=t(433100),eM=t(513530),eL=t(148),eZ=(void 0!==l||(l=t(895622)).hash&&"20c2c7f4ff982fb93a9608faa14f3ed2"!==l.hash&&console.error("The definition of 'RelatedProductsUnifiedFeed_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),l);function eB(e){var n=e.alignStart,t=e.auxData,r=e.isFilterOpened,a=e.isProductOnlyFeed,i=e.oneBarModules,l=e.pinKey,o=e.viewParameter,s=e.viewType,u=e.visualSearchFlashlightUnifiedResource,c=(0,h.Z)(eZ,l),d=!a&&i&&i.length>0,p=u.data,f=null==p?void 0:p.search_identifier;return(0,L.jsxs)(m.Fragment,{children:[d&&(0,L.jsx)(g.xu,{position:"relative",zIndex:new g.Ry(1),children:(0,L.jsx)(eL.v,{children:(0,L.jsx)(eK.f,{children:(0,L.jsx)(eD.default,{oneBarModulesKey:null,oneBarModulesRest:i,paddingX:8})})})}),(0,L.jsx)(g.xu,{overflow:"hidden",children:(0,L.jsx)(eM.Z,{alignStart:n,auxData:t,isFilterOpened:r,isProductFeed:a,pinKey:c,searchId:f,viewParameter:o,viewType:s,visualSearchFlashlightUnifiedResource:u})})]})}var eU=t(933442),eN=t(59355),ez=t(806513),eH=t(112658);function eW(e){return{viewType:72,viewParameter:9===e.cropSource?3462:3050}}var eG=t(49254),eV=t(74195);function eY(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,i,l,o=[],s=!0,u=!1;try{if(i=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=i.call(t)).done)&&(o.push(r.value),o.length!==n);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(u)throw a}}return o}}(e,n)||function(e,n){if(e){if("string"==typeof e)return eX(e,n);var t=({}).toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?eX(e,n):void 0}}(e,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eX(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var eq=(void 0!==o||(o=t(441370)).hash&&"3a9a747c3135f426fe0cf32ca9147a5d"!==o.hash&&console.error("The definition of 'VisualSearchContainer_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),o);function e$(e){var n,t=e.cropArea,r=e.cropSource,a=e.isProductPage,i=e.oneBarModules,l=e.pinKey,o=e.searchId,s=e.descriptorModules,u=e.title,c=e.trafficSource,d=e.visualSearchFlashlightUnifiedResource,p=(0,h.Z)(eq,l),f=(0,F.Z)({pinKey:p,maxWidth:I.Wm}).getNormalizedPinImage,y=(0,k.TH)(),v=((0,W.Z)()||{}).width,b=(0,eG.t)(),S=(0,eV.Z)(),x=(0,eU._)(),_=x.imageContainerScrollTop,w=x.imageContainerScrollTopForPinId,P=(0,m.useRef)(null),j=eY((0,m.useState)(0),2),T=j[0],C=j[1],A=eY((0,m.useState)(0),2),O=A[0],R=A[1],D=((y||{}).state||{}).internalNavigation,K=f(),M=K.width,Z=K.height,B=K.url,U=M+E.n,N=a?0:U+48,H=(void 0===v?0:v)-S-N-E.n,G=eW({cropSource:r}),Y=G.viewType,X=G.viewParameter,q={commerce_data:JSON.stringify({is_product_only_feed:a})},$=function(){var e=P.current;if(e){var n=e.getBoundingClientRect(),t=n.x,r=n.y,a=e.scrollTop;C(t),R(r-a)}};return(0,V.Z)(function(){$(),P.current&&0!==_.current&&w.current===p.entityId&&(P.current.scrollTop=_.current)}),(0,L.jsx)(eH.Z,{objectId:o,view:Y,children:(0,L.jsx)(eN.Z,{log:{aux_data:q,view_type:Y,view_parameter:X},children:(0,L.jsxs)(g.xu,{"data-test-id":"related-products",children:[(0,L.jsx)(z,{isProductPage:a,title:a?u:"",viewParameter:X,viewType:Y}),!a&&(0,L.jsx)(g.xu,{ref:P,bottom:!0,dangerouslySetInlineStyle:{__style:{top:b+80,left:S,right:S}},height:"inherit",marginBottom:3,marginStart:12,onScroll:function(){var e;$(),_.current=(null==(e=P.current)?void 0:e.scrollTop)||0,w.current=p.entityId},overflow:"auto",position:"fixed",width:U,children:(0,L.jsx)(eE,{cropArea:t,cropSource:r,description:null!=(n=p.description)?n:"",descriptorModules:s,height:Z,imageContainerX:T,imageContainerY:O,imageSignature:p.imageSignature||"",imageUrl:B,pinKey:p,showAnimation:!(void 0!==D&&D),trafficSource:c,viewParameter:X,viewType:Y,width:M})}),(0,L.jsx)(g.xu,{dangerouslySetInlineStyle:{__style:{top:80*!a,left:N,right:N}},paddingX:ez.jC,position:"relative",width:H,children:(0,L.jsx)(eB,{auxData:q,isProductOnlyFeed:a,oneBarModules:i,pinKey:p,viewParameter:X,viewType:Y,visualSearchFlashlightUnifiedResource:d})})]})})})}var eJ=t(919203),eQ=t(261954),e0=t(906127),e1=t(730448),e2=t(285676),e3=t(126621),e6=t(79271),e5=t(222451),e8=t(349937),e4=(void 0!==s||(s=t(292297)).hash&&"b1061aefab46af37d4c9716916386af2"!==s.hash&&console.error("The definition of 'VisualSearchCarousel_story' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),s);function e7(e){var n,t,r=e.componentType,a=e.hasActionCTA,i=e.legacyStory,l=e.searchIdentifier,o=e.storyKey,s=e.trafficSource,u=e.viewParameter,c=e.viewType,d=(0,k.TH)(),p=(0,h.Z)(e4,o),f=(0,e6.ZP)({clientTrackingParams:null==p?void 0:p.trackingParams,componentType:r,contextLogData:{story_id:null==p?void 0:p.storyId,story_type:null==p?void 0:p.storyType,content_ids:null==p?void 0:p.contentIds},impressionType:"Story",loggingId:null==p?void 0:p.storyId,slotIndex:0,viewParameter:u,viewType:c}),y=(0,m.useCallback)(function(e){var n=e.item,t=e.index;if(a&&p.objects&&t===p.objects.length-1){var r,i,o,f,m=null==(r=n.images)||null==(i=r["236x"])?void 0:i.url,g=d.pathname+"products/"+d.search;return m&&(0,L.jsx)(e5.Z,{buttonText:(null==(o=p.action)?void 0:o.text)||"See more",component:14339,dataTestId:"shop-action-item-button",element:179,imageWidth:e3.Z,previewImageSrc:m,storyId:null!=(f=p.storyId)?f:void 0,storyType:p.storyType,url:g,view:c,viewParameter:u})}return(0,L.jsx)(e2.r,{componentType:14339,isInDesktopCarousel:!0,pinId:n.id||"",pinImageCrop:{width:e3.Z,height:e3.Z},pinKey:null,slotIndex:t,surface:"VisualInspirationShoppingPin",trafficSource:s,viewData:{search_identifier:l},viewParameter:u,viewType:c})},[a,p.objects,null==(n=p.action)?void 0:n.text,p.storyId,p.storyType,s,l,u,c,d.pathname,d.search]),v=null==i||null==(t=i.objects)?void 0:t.filter(function(e){return"pin"===e.type});return v&&0!==v.length?(0,L.jsx)(g.xu,{ref:f,"data-test-id":"visual-search-carousel",children:(0,L.jsx)(e8.Z,{items:v,itemWidth:e3.Z,renderItem:y,showBorder:!0,showMarkers:!0,storyKey:p,view:c,viewParameter:u})}):null}var e9=(0,t(9065).Z)(function(){return t.e("45805").then(t.bind(t,267288))},void 0,function(e){return 267288},"app-www-FeedItemPinRepWrapper",function(e){return ["45805"]});function ne(e){var n=e.auxData,t=e.isProductOnlyFeed,r=e.oneBarModules,a=e.trafficSource,i=e.viewParameter,l=e.viewType,o=e.visualSearchFlashlightUnifiedResource,s=(0,b.Z)(),u=(0,D.u)().logContextEvent,c=(0,m.useRef)(!1),d=(0,m.useRef)(null),p=(0,(0,ec.Z)().checkExperiment)("web_pin_grid_last_visited").anyEnabled,f=!t&&r&&r.length>0,y=o.data,h=o.isFetching,v=o.fetchMore,S=o.isAtEnd,x=y||{},_=x.results,w=void 0===_?[]:_,k=x.search_identifier,P=w.find(function(e){return"story"===e.type&&"stela_shop"===e.story_type})||{},j=P.action,I=P.objects,F=j||{},T=F.text,C=F.url,A=(null==I?void 0:I.length)||0,O=!!(T&&C),R=(0,e1.Z)(function(){c.current||(u({event_type:110,view_type:l,view_parameter:i}),c.current=!0)},1e3),E=(0,m.useCallback)(function(e){var r=e.data,o=e.itemIdx;if("story"===r.type)return"unified_entry_point_flashlight_header"===r.story_type?null:(0,L.jsx)(e7,{auxData:n,componentType:14339,hasActionCTA:O,legacyStory:r,searchIdentifier:k,storyKey:{type:"Legacy",data:r},trafficSource:a,viewParameter:i,viewType:l});if("pin"===r.type){var s=+!!O,u=(0,L.jsx)(e2.r,{auxData:n,componentType:0,pinId:r.id,pinKey:null,slotIndex:o+A-s,surface:t?"ShoppingDynamicHeightGrid":"SearchItem",trafficSource:a,viewData:{search_identifier:k},viewParameter:i,viewType:l});return p?(0,L.jsx)(e9,{children:u}):u}return null},[n,k,a,l,i,O,A,t,p]),K=(0,m.useCallback)(function(e){return"story"!==e.type},[]);return(0,L.jsxs)(m.Fragment,{children:[f&&(0,L.jsx)(N.Z,{position:"sticky",shouldShowShadow:!0,children:(0,L.jsx)(eL.v,{children:(0,L.jsx)(eK.f,{children:(0,L.jsx)(g.xu,{dangerouslySetInlineStyle:{__style:{paddingInlineEnd:"8px"}},children:(0,L.jsx)(eD.default,{itemHeight:48,marginBottom:0,oneBarModulesKey:null,oneBarModulesRest:r,paddingBottom:12,paddingX:3})})})})}),(0,L.jsx)(g.xu,{ref:d,"data-test-id":"visual-search-feed",onScroll:R,overflow:"hidden",children:(0,L.jsx)(e0.Z,{isAtEndOfFeed:S,itemCount:w.length,children:(0,L.jsx)(eQ.default,{align:t?"center":"start",getColumnSpanConfig:function(e){var n,t="story"===e.type&&(null==(n=e.display_options)?void 0:n.num_columns_requested);return 0===t?1/0:t||1},isFetching:h,isLoadedAccessibilityLabel:s._('Visual search results loaded', 'visualSearch.masonry.loaded.label', 'Accessibility label when masonry has finished loading'),isLoadingAccessibilityLabel:s._('Loading visual search results', 'visualSearch.masonry.loading.label', 'Accessibility label for masonry loading state'),isLoadingStateEnabled:!0,items:w,layout:"basic",loadItems:v,minCols:1,renderItem:E,scrollContainer:function(){var e;return null!=(e=d.current)?e:window},virtualize:K})})})]})}var nn=t(911953);function nt(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,i,l,o=[],s=!0,u=!1;try{if(i=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=i.call(t)).done)&&(o.push(r.value),o.length!==n);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(u)throw a}}return o}}(e,n)||function(e,n){if(e){if("string"==typeof e)return nr(e,n);var t=({}).toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?nr(e,n):void 0}}(e,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nr(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var na=(void 0!==u||(u=t(97004)).hash&&"8250aa2ed9c603023c2f2a226d0b9fbb"!==u.hash&&console.error("The definition of 'VisualSearchImageContainer_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),u);function ni(e){var n,t,r,a,i,l,o,s,u,c,d,p,f,y,v,b=e.cropArea,S=e.cropSource,x=e.descriptorModules,_=e.pinKey,w=e.trafficSource,k=e.viewParameter,P=e.viewType,j=(0,eG.t)(),I=(0,eV.Z)(),F=(0,eU._)(),T=F.imageContainerScrollTop,C=F.imageContainerScrollTopForPinId,A=(0,m.useRef)(null),R=nt((0,m.useState)(0),2),E=R[0],D=R[1],K=nt((0,m.useState)(0),2),M=K[0],Z=K[1],B=nt((0,m.useState)(0),2),U=B[0],N=B[1],z=(0,nn.Z)({scrollContainerRef:A}).scrollCropperInView,W=(0,h.Z)(na,_),Y=(0,eo.Z)(W.dominantColor),X=Y.defaultColor,q=Y.selectedColor,$=Y.hoveredColor,J=Y.pressedColor,Q=O.M/(null!=(u=null==W||null==(c=W.image)?void 0:c.width)?u:1)*(null!=(d=null==W||null==(p=W.image)?void 0:p.height)?d:1),ee=null!=(f=null==W||null==(y=W.image)?void 0:y.url)?f:"",en=O.M+O.nn,et=(0,m.useCallback)(function(){return(0,G.Nx)("visualSearchMainPinImageRender")},[]),er=(i=(n={imageContainerRef:A,descriptorModules:x}).imageContainerRef,s=64*!!(o=!!(null==(l=n.descriptorModules)?void 0:l.length)),o&&i.current?{isDescriptorAvailable:o,descriptorModuleHeight:s,descriptorBottomBorderRadius:(r=(t=i.current).scrollTop,24*(61<(a=t.scrollHeight-t.clientHeight-r)&&a<67))}:{isDescriptorAvailable:o,descriptorModuleHeight:s,descriptorBottomBorderRadius:0}),ea=er.isDescriptorAvailable,ei=er.descriptorModuleHeight,eu=er.descriptorBottomBorderRadius,ec=(0,m.useCallback)(function(){var e=A.current;if(e){var n=e.getBoundingClientRect(),t=n.x,r=n.y;D(t),Z(r-e.scrollTop)}N(16*(Q>=window.innerHeight-j&&!ea))},[j,Q,ea]),ed=(0,m.useCallback)(function(){var e;ec(),T.current=(null==(e=A.current)?void 0:e.scrollTop)||0,C.current=W.entityId},[ec,W.entityId,T,C]);return(0,V.Z)(function(){var e=A.current;if(e){var n=T.current,t=C.current;return 0!==n&&t===W.entityId&&(e.scrollTop=n),ec(),window.addEventListener("mousemove",z),function(){window.removeEventListener("mousemove",z)}}}),(0,L.jsxs)(m.Fragment,{children:[(0,L.jsx)(g.xu,{ref:A,bottom:!0,dangerouslySetInlineStyle:{__style:{top:j,insetInlineStart:I,height:"min(".concat(Q,"px, calc(100vh - ").concat(j,"px))"),paddingBottom:"".concat(U,"px")}},"data-test-id":"visual-search-image-container",marginStart:O.tX,onScroll:ed,overflow:"auto",position:"fixed",width:en,children:(0,L.jsx)(g.xu,{"data-test-id":"flashlight-enabled-image",height:Q+ei,width:O.M,children:(0,L.jsxs)(g.zd,{height:Q,rounding:O.$V,width:O.M,children:[(0,L.jsx)(H.Z,{_enableViewTransitions:!0,type:"image",children:(0,L.jsx)(g.Ee,{alt:null!=(v=W.description)?v:"",naturalHeight:Q,naturalWidth:O.M,onLoad:et,src:ee})}),(0,L.jsx)(eO,{cropArea:b,cropSource:S,imageContainerX:E,imageContainerY:M,imageSize:{height:Q,width:O.M},pinKey:W,trafficSource:w,viewParameter:k,viewType:P})]})})}),(0,L.jsx)(g.xu,{dangerouslySetInlineStyle:{__style:{top:j,insetInlineStart:I}},"data-test-id":"visual-search-cancel-button-container",marginStart:O.Qs,marginTop:O.qN,position:"fixed",children:(0,L.jsx)(es.Z,{defaultPillColor:X,hoveredPillColor:$,pressedPillColor:J,viewParameter:k,viewType:P})}),ea&&(0,L.jsx)(g.xu,{dangerouslySetInlineStyle:{__style:{top:"min(".concat(j+Q-ei,"px, calc(100vh - ").concat(ei,"px))"),insetInlineStart:I,borderRadius:"0 0 ".concat(eu,"px ").concat(eu,"px")}},"data-test-id":"visual-search-descriptor-container",height:ei,marginStart:O.tX,overflow:"hidden",position:"fixed",width:O.M,children:(0,L.jsx)(el,{defaultPillColor:X,descriptorModules:null!=x?x:[],hoveredPillColor:$,isWebImageSearchRedesign:!0,pinKey:W,pressedPillColor:J,selectedPillColor:q})}),(0,L.jsx)(g.xu,{dangerouslySetInlineStyle:{__style:{boxSizing:"content-box"}},"data-test-id":"visual-search-image-container-placeholder",height:1,marginStart:O.tX,minWidth:en})]})}var nl=(void 0!==c||(c=t(716635)).hash&&"3c3f391c3bf9eec79c18ed9a3fe63800"!==c.hash&&console.error("The definition of 'VisualSearchLayout_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),c);function no(e){var n=e.cropArea,t=e.cropSource,r=e.isProductPage,a=e.oneBarModules,i=e.pinKey,l=e.searchId,o=e.descriptorModules,s=e.trafficSource,u=e.visualSearchFlashlightUnifiedResource,c=(0,h.Z)(nl,i),d=(0,b.Z)(),p=d._('Shop similar', 'visualSearch.productPage.header', 'Shop similar visual searched items.'),f=eW({cropSource:t}),m=f.viewType,y=f.viewParameter,v={commerce_data:JSON.stringify({is_product_only_feed:r})};return(0,L.jsx)(eH.Z,{objectId:l,view:m,children:(0,L.jsxs)(eN.Z,{log:{aux_data:v,view_type:m,view_parameter:y},children:[r?(0,L.jsx)(z,{isProductPage:!0,title:p,viewParameter:y,viewType:m}):(0,L.jsx)(eJ.Z,{text:d._('Image Search Page', 'imageSearch.accessibilityHiddenHeading', 'Accessibility label for image search page')}),(0,L.jsxs)(g.kC,{children:[!r&&(0,L.jsx)(ni,{cropArea:n,cropSource:t,descriptorModules:o,pinKey:c,trafficSource:s,viewParameter:y,viewType:m}),(0,L.jsx)(g.kC.Item,{flex:"grow",children:(0,L.jsx)(ne,{auxData:v,isProductOnlyFeed:r,oneBarModules:a,trafficSource:s,viewParameter:y,viewType:m,visualSearchFlashlightUnifiedResource:u})})]})]})})}var ns=(void 0!==d||(d=t(261717)).hash&&"ece11b62e2de551b92d24a2389316249"!==d.hash&&console.error("The definition of 'VisualSearchPageWithPinData_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),d);function nu(e){var n,t,r,a,i,l,o=e.pinKey,s=(0,k.TH)(),u=(0,h.Z)(ns,o),c=(0,R.D)(),d=(0,F.Z)({pinKey:u,maxWidth:c?O.M:I.Wm}).getNormalizedPinImage,p=(0,T.mB)(s.search),f=p.cropSource,g=p.entrypoint,y=p.full_feed_title,v=p.filters,b=p.hybrid_search_param,S=p.journey_depth,x=p.search_query,_=p.source_module_id,w=p.selected_descriptors,E=p.requestParams,D=p.rs;if(c)t=O.M/(null!=(r=null==u||null==(a=u.image)?void 0:a.width)?r:1)*(null!=(i=null==u||null==(l=u.image)?void 0:l.height)?i:1),n=O.M;else{var K=d(),M=K.height,Z=K.width;t=M,n=Z}var B=(0,m.useMemo)(function(){var e;return null!=(e=(0,P.Z)(s,n,t))?e:{x:0,y:0,w:n,h:t}},[s,n,t]),U=(0,C.Z)(Number(f))||5,N=s.pathname.includes("/products"),z=(0,j.Z)({resourceOptions:{crop:(0,A.Z)({cropArea:B,scaledWidth:n,scaledHeight:t}),crop_source:U,entry_source:N?"shopping":"flashlight",entrypoint:g||N&&"feed_module"||null,field_set_key:"shopping_grid_item",image_signature:u.imageSignature||void 0,is_shopping:N,pin_id:u.entityId,request_params:E,source:D,filters:v,hybrid_search_param:b,selected_descriptors:w,journey_depth:parseInt(S,10)||void 0,search_query:x,source_module_id:_}}),H=z.searchId,W=z.visualSearchFlashlightUnifiedResource,G=z.oneBarModules,V=z.descriptorModules;return u?(0,L.jsx)(c?no:e$,{cropArea:B,cropSource:U,descriptorModules:V,isProductPage:N,oneBarModules:G,pinKey:u,searchId:H,title:void 0===y?"":y,trafficSource:D,visualSearchFlashlightUnifiedResource:W}):null}function nc(e){var n=e.pinKey;return(0,L.jsx)(R.h,{children:(0,L.jsx)(nu,{pinKey:n})})}var nd=t(520803),np=(void 0!==p||(p=t(579174)).hash&&"0f7b98a1f02dbf8528df0452aa26efd4"!==p.hash&&console.error("The definition of 'RelatedProductsPageQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),p),nf=(void 0!==f||(f=t(271128)).hash&&"91d05676e413b7b47653c2f8fa609093"!==f.hash&&console.error("The definition of 'RelatedProductsPage_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),f);function nm(e){var n,t=e.pinId,r=e.relatedProductsDataRef,a=(0,b.Z)(),i=(0,v.Z)({strategy:"Legacy",query:np,variables:{pinId:t},useGetLegacyData:function(){return(0,S.Z)(r).data}}),l=(null==i||null==(n=i.v3GetPinQuery)?void 0:n.__typename)==="V3GetPin"?i.v3GetPinQuery.data:null,o=(0,h.Z)(nf,l);return(0,L.jsx)(m.Suspense,{fallback:(0,L.jsx)(g.xH,{accessibilityLabel:a._('Loading Pin data', 'RelatedProductsPage.loadingPinData', 'accessibility label for pin loading spinner'),show:!0}),children:o&&(0,L.jsx)(nc,{pinKey:o})})}function ng(){var e=(0,nd.Z)(),n=(0,_.Z)(e.params.id||"").pinId,t=(0,x.Z)({name:"PinResource",options:{id:n,field_set_key:"detailed"}}).ref;return(0,L.jsx)(y.Z,{name:"RelatedProductsPage_RelatedProductsPageWrapper",children:(0,L.jsx)(m.Suspense,{fallback:(0,L.jsx)(w.Z,{}),children:(0,L.jsx)(nm,{pinId:n,relatedProductsDataRef:t})})})}},658337:function(e,n,t){t.d(n,{J:function(){return w}});var r=t(250026),a=t(184661),i=t(42676),l=t(830949),o=t(407775),s=t(210730),u=t(438274);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||p(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,n){if(e){if("string"==typeof e)return f(e,n);var t=({}).toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?f(e,n):void 0}}function f(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function m(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function g(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?m(Object(t),!0).forEach(function(n){y(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function y(e,n,t){var r;return(r=function(e,n){if("object"!=c(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!=c(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(n,"string"),(n="symbol"==c(r)?r:r+"")in e)?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var h=new Set(["PinResource","RepinResource"]),v={ApiResource:function(e){var n,t,r,a,i,l;return(null==e?void 0:e.url)==="/v3/orientation/nux_creator_recommendations/"?"nux-creator-recommendations":(null==e?void 0:e.url)==="/v3/users/me/interests/"?"recommended-interests:".concat(null==(a=e.data)?void 0:a.blend_type):(null==e?void 0:e.url)==="/v3/usecases/".concat(null==(n=e.data)?void 0:n.use_case_id,"/feed/")?"useCaseFeed":(null==e?void 0:e.url)==="/v3/boards/".concat(null==(t=e.data)?void 0:t.board_id,"/automagical/pins/")?"automagical-board-feed:".concat(null==(i=e.data)?void 0:i.board_id):(null==e?void 0:e.url)==="/v3/aggregated_pin_data/".concat(null==(r=e.data)?void 0:r.aggregated_pin_data,"/comments/")?"aggregated-comments:".concat(null==(l=e.data)?void 0:l.aggregated_pin_data):""},AggregatedActivityFeedResource:function(e){return"trieditfeed:".concat(e.aggregated_pin_data_id)},AggregatedCommentReplyFeedResource:function(e){return"".concat(u.Z.AGGREGATED_COMMENT_REPLIES,":").concat(e.objectId)},BoardlessPinsResource:function(e){return"boardless-pins:".concat(e.userId)},BestPinsFeedAltResource:function(e){return"idea-page-best-pins:".concat(e.interest)},BoardArchiveResource:function(){return"archived-boards"},BoardContentRecommendationResource:function(e){return"recommendation-feed:".concat(e.id)},BoardFeedResource:function(e){return"boardfeed:".concat(e.board_id)},BoardSectionsRepinResource:function(e){return"board-sections:".concat(e.board_id)},BoardSectionsResource:function(e){return"board-sections:".concat(e.board_id)},BoardSectionPinsResource:function(e){return"board-section-pins:".concat(e.section_id)},BoardsFeedResource:function(e){return"profile-boards:".concat(e.username)},BoardToolsFeedResource:function(e){return"board-tools:".concat(e.boardId)},ConversationsResource:function(){return"conversations"},DidItUserFeedResource:function(e){return"profile-tried:".concat(e.username)},InterestResource:function(e){return"klp-pins:".concat(e.interest)},MoreIdeasTabsBoardsResource:function(){return"homefeed-more-ideas-tabs"},NewsHubResource:function(){return"notifications"},NewsHubDetailsResource:function(e){return"newshubdetail:".concat(e.news_id)},NuxInterestsResource:function(){return"nuxTopics"},PinsFromBrandResource:function(e){return"brand-pins:".concat(e.pin)},ReactionsResource:function(e){return"reactions:".concat(e.pin_id)},RelatedArticlesResource:function(e){return"related-articles:".concat(e.article_id)},RelatedModulesResource:function(e){return"related-modules:".concat(e.pin_id)},RelatedPinFeedResource:function(e){return"related-pins:".concat(e.pin)},RelatedStreamResource:function(e){return"related-story-pins:".concat(e.pinId)},SearchResource:function(e){return"search:".concat((0,i.Tb)(e))},BaseSearchResource:function(e){return"search:".concat((0,i.Tb)(e))},SectionToolsFeedResource:function(e){return"section-tools:".concat(e.sectionId)},ShareSuggestionsTypeaheadResource:function(e){return"share-suggestions:".concat(e.board||e.user,":").concat(e.term)},StoryFeedResource:function(e){return"story-feed:".concat(e.feed_type,":").concat(e.request_params)},StoryPinTaggedProductsResource:function(){return"story-pin-tagged-products"},TodayArticleFeedResource:function(e){return"today-article:".concat(e.id)},TodayTabInterestFeedResource:function(e){return"today-article-interestfeed:".concat(e.interest_id)},TodayTabResource:function(){return"today-tab"},SeoTier1CandidateResource:function(){return"tier1-feed"},UnifiedCommentsResource:function(e){return"unified-comments:".concat(e.aggregated_pin_id)},UserActivityPinsResource:function(e){return"profile-pins-feed:".concat(e.user_id)},UserHomefeedResource:function(e){return e.pin_quiz?"pin-quiz":"homefeed"},UserFollowingResource:function(e){return"user-following:".concat(e.username)},UserRecentActivityResource:function(e){return"user-recent-activity:".concat(e.filter_type)},UserStoryPinsFeedResource:function(e){return"story-pins-feed:".concat(e.user_id)},VisualLiveSearchResource:function(e){return"visual-search:".concat(e.pin_id,":").concat(e.crop.x).concat(e.crop.y).concat(e.crop.w).concat(e.crop.h)},VisualLiveSearchProductFeedResource:function(e){return"visual-search-products:".concat(e.pin_id,":").concat(e.crop.x).concat(e.crop.y).concat(e.crop.w).concat(e.crop.h)},VisualSearchFlashlightUnifiedResource:function(e){return"related-products-unified:".concat(e.pin_id)},InterestFollowingResource:function(e){return"topic-following:".concat(e.username)},UserPinsResource:function(e){return"profile-pins:".concat(e.username)},TopicFeedResource:function(e){return e.best_pins?"best-topic-pins:".concat(e.interest):"topic-pins:".concat(e.interest)}},b={AggregatedActivityFeedResource:function(e){var n=e.options.aggregated_pin_data_id;return{type:u.Z.TRIED_IT_FEED,id:n}},AggregatedCommentReplyFeedResource:function(e){var n=e.options,t=n.isUnifiedComment,r=n.objectId;return{type:t?u.Z.AGGREGATED_COMMENT_REPLIES:u.Z.AGGREGATED_COMMENTS,id:r,reversed:!0}},ApiResource:function(e){var n=e.options,t=n.url,r=n.data;return t==="/v3/usecases/".concat(null==r?void 0:r.use_case_id,"/feed/")?{type:u.Z.USE_CASE_TAB,id:r.use_case_id}:t==="/v3/boards/".concat(null==r?void 0:r.board_id,"/automagical/pins/")?{type:u.Z.AUTOMAGICAL_BOARD_FEED,id:r.board_id}:t==="/v3/aggregated_comments/".concat(r.aggregated_comment,"/replies/")?{type:r.isUnifiedComment?u.Z.AGGREGATED_COMMENT_REPLIES:u.Z.AGGREGATED_COMMENTS,id:r.aggregated_comment,reversed:!0}:t==="/v3/aggregated_pin_data/".concat(null==r?void 0:r.aggregated_pin_data,"/comments/")?{type:u.Z.AGGREGATED_COMMENTS,id:r.aggregated_pin_data}:null},BoardFeedResource:function(e){var n=e.options.board_id;return{type:u.Z.BOARDFEED,id:n}},BoardlessPinsResource:function(e){var n=e.options.userId;return{type:u.Z.BOARDLESS_PINS,id:n}},BoardSectionPinsResource:function(e){var n=e.options.section_id;return{type:u.Z.BOARD_SECTION_PINS,id:n}},BoardSectionsResource:function(e){var n=e.options.board_id;return{type:u.Z.BOARD_SECTIONS,id:n}},BoardsResource:function(e){var n=e.options,t=n.username,r=n.sort,a=n.filter_types;return{type:u.Z.PROFILE_BOARDS,id:(0,l.Z)(t,r,a)}},BaseSearchResource:function(e){var n,t=e.options,r=e.response;return{type:u.Z.SEARCH_PINS,id:(0,i.Tb)(t),items:(null==(n=r.resource_response.data)?void 0:n.results)||[]}},DidItCommentsResource:function(e){var n=e.options.objectId;return{type:u.Z.AGGREGATED_COMMENTS,id:n,reversed:!0}},DidItUserFeedResource:function(e){var n=e.options.username;return{type:u.Z.TRIED_IT_FEED,id:n}},RelatedArticlesResource:function(e){var n=e.options.article_id;return{type:u.Z.TODAY_TAB,id:n}},StoryPinDraftsResource:function(e){var n=e.options.userId;return{type:u.Z.STORY_PIN_DATA,id:n}},TodayTabInterestFeedResource:function(e){var n=e.options.interest_id;return{type:u.Z.TODAY_ARTICLE_INTEREST_FEED,id:n}},TodayTabResource:function(){return{type:u.Z.TODAY_TAB,id:"todayTab"}},UnifiedCommentsPreviewResource:function(e){var n=e.options.aggregated_pin_id;return{type:u.Z.UNIFIED_COMMENTS,id:n}},UnifiedCommentsResource:function(e){var n=e.options,t=n.aggregated_pin_id,r=n.is_reversed;return{type:u.Z.UNIFIED_COMMENTS,id:t,reversed:r}},UserActivityPinsResource:function(e){var n=e.options.user_id;return{type:u.Z.PROFILE_PINS_FEED,id:n}},UserStoryPinsFeedResource:function(e){var n=e.response,t=e.options.user_id;return{type:u.Z.STORY_PINS_FEED,id:t,items:n.resource_response.data||[]}}},S=function(e,n){var t=n.pinId,r=n.feedId;return e[r]?g(g({},e),{},y({},r,e[r].filter(function(e){return"pin"!==e.type||e.id!==t}))):e},x=function(e,n){var t=n.pinId,r=n.feedId;return e[r]?g(g({},e),{},y({},r,[{type:"pin",id:t}].concat(d(e[r])))):e},_=function(e,n){var t=n.pinId,r=n.oldFeedId,a=n.newFeedId;return r===a?e:x(S(e,{pinId:t,feedId:r}),{pinId:t,feedId:a})},w=function(e,n){return e in v?v[e](n):null},k=function(e,n){var t,r,a;switch(e.type){case"story":return{id:null!=(t=e.id)?t:"",type:"story",story_type:null!=(r=e.story_type)?r:""};case"module":return{id:e.id,type:"module",name:e.name};case"user":return{id:e.id,type:"user"};case"board":return n===u.Z.PROFILE_BOARDS?{id:e.id,type:"board",onProfile:!0,profileGroup:e.archived_by_me_at?"archived":e.privacy||"public"}:{id:e.id,type:"board",onProfile:!1};case"board_section":return{type:"boardsection",id:e.id};case"triedit":return{type:"triedit",id:e.id};case"aggregatedcomment":return{type:"aggregatedcomment",id:e.id};case"home_feed_tab":return{type:"home_feed_tab",id:e.id,name:e.name};case"storypindata":return{id:e.id,type:"storypindata"};case"todayarticle":return{type:"todayarticle",id:e.id};case"unifiedcommentspreview":return"userdiditdata"===e.unified_comment.type?{type:"triedit",id:e.unified_comment.id}:{type:"aggregatedcomment",id:e.unified_comment.id};default:var i="useCaseFeed"===n&&"tracking_params"in e;return g({type:"pin",id:null!=(a=e.id)?a:""},i&&{trackingParams:e.tracking_params})}},P=function(e,n){return n?"board-section-pins:".concat(n):"boardfeed:".concat(e)},j=function(e,n,t){var r=t||o.Z[e];if(r===s.LR)return n.result;if(r===s.sN)return n.result.map(function(e){return{id:e,schema:"board"}});if(r===s.Gn)return n.result.map(function(e){return{id:e,schema:"user"}});if(r===s.Ht)return n.result.map(function(e){return{id:e,schema:"invite"}});if(r===s.fE)return n.result.map(function(e){return{id:e,schema:"reaction"}});if("object"===c(r)){var a=Object.entries(r).find(function(e){return(function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,i,l,o=[],s=!0,u=!1;try{for(i=(t=t.call(e)).next;!(s=(r=i.call(t)).done)&&(o.push(r.value),2!==o.length);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(u)throw a}}return o}}(e,2)||p(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[1]===s.LR});if(a)return n.result[a[0]]}return null},I=function(e,n){return e.map(function(e){var t=e.id,r=e.schema;return"home_feed_tabs"===e.type?e:r?{id:t,type:r,trackingParams:"pin"===r?n.pins[t].tracking_params:void 0,user_id:void 0}:null}).filter(Boolean)},F=function(e,n,t){return Object.keys(e).reduce(function(r,a){var i=e[a]||[],l=i.filter(function(e){if(e.type!==n)return!0;if("reaction"===n){var r=e.id.lastIndexOf(":");return e.id.substring(0,r)!==t}return e.id!==t});return i.length!==l.length&&(r[a]=l),r},g({},e))};n.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case a.zP:case a.aW:var t=n.payload,i=t.resource,l=t.options,o=t.normalizedResponse,s=t.schema;if(o&&i in v){var c=j(i,o,s);if(c&&Array.isArray(c)){var p=v[i](l);if("BoardToolsFeedResource"===i||"SectionToolsFeedResource"===i)return g(g({},e),{},y({},p,c));if("UnifiedCommentsResource"===i){var f=I(c,o.entities);if(e[p]&&(a.zP||a.aW===n.type))return g(g({},e),{},y({},p,[].concat(d(e[p]),d(f))));return g(g({},e),{},y({},p,f))}var m=[].concat(d(n.type===a.aW&&e[p]||[]),d(I(c,o.entities)));return g(g({},e),{},y({},p,m))}}else{var S,x=t.response.resource_response.data;if(!(null!=(S=t.options)&&S.redux_normalize_feed))return e;var w=b[t.resource]({options:t.options,response:t.response});if(w){var T=w.type,C=w.id,A=w.items,O=w.reversed,R=(A||x||[]).filter(Boolean).map(function(e){return k(e,T)});O&&(R=R.reverse());var E="".concat(T,":").concat(C),D=e[E];if(D||n.type!==a.aW){var K=D||[],M=R;return n.type===a.aW&&(M=O?R.concat(K):K.concat(R)),g(g({},e),{},y({},E,M))}}}break;case"FEED_ITEM_REORDERED":var L=n.payload,Z=L.feedType,B=L.feedId,U=L.itemType,N=L.targetItemId,z=L.sourceItemId,H="".concat(Z,":").concat(B),W=e[H]||[],G=-1,V=-1;if([u.Z.BOARDFEED,u.Z.BOARD_SECTION_PINS,u.Z.BOARD_SECTIONS,"profileBoards"].includes(Z)&&(G=W.findIndex(function(e){return e.type===U&&e.id===z}),V=W.findIndex(function(e){return e.type===U&&e.id===N})),-1!==G&&-1!==V)return g(g({},e),{},y({},H,(0,r.Z)(W,G,V)));break;case"FEED_ITEMS_REMOVED":var Y=n.payload,X=Y.feedType,q=Y.feedId,$=Y.inverseSelection,J=Y.itemType,Q=Y.itemIds,ee=void 0===Q?[]:Q,en="".concat(X,":").concat(q),et=e[en]||[];if(et&&et.length>0&&(X===u.Z.BOARD_SECTION_PINS||X===u.Z.BOARDFEED)){var er=et.filter(function(e){var n=ee.includes(e.id);return!(e.type===J&&($&&!n||!$&&n))}),ea=!!er.find(function(e){return"pin"===e.type});return g(g({},e),{},y({},en,ea?er:[]))}if(et&&et.length>0&&X===u.Z.BOARD_SECTIONS){var ei=et.filter(function(e){var n=ee.includes(e.id);return!(e.type===J&&n)});return g(g({},e),{},y({},en,ei))}if(et&&et.length>0&&(X===u.Z.AGGREGATED_COMMENTS||X===u.Z.BOARDLESS_PINS||X===u.Z.PROFILE_PINS_FEED||X===u.Z.STORY_PINS_FEED||X===u.Z.UNIFIED_COMMENTS||X===u.Z.TRIED_IT_FEED||X===u.Z.STORY_PIN_DATA)){var el=et.filter(function(e){var n=ee.includes(e.id);return!(e.type===J&&n)});return g(g({},e),{},y({},en,el))}break;case"FEED_ITEMS_ADDED":var eo=n.payload,es=eo.feedType,eu=eo.feedId,ec=eo.itemType,ed=eo.itemIds,ep=void 0===ed?[]:ed,ef=eo.prepend,em="".concat(es,":").concat(eu),eg=e[em]||[];if(eg&&(es===u.Z.BOARD_SECTION_PINS||es===u.Z.BOARDFEED||es===u.Z.BOARDLESS_PINS)){var ey=ep.map(function(e){return{id:e,type:ec}}),eh=0;"story"===(eg[0]||{}).type&&(eh=1),"story"===(eg[1]||{}).type&&(eh=2);var ev=[].concat(d(eg.slice(0,eh)),d(ey),d(eg.slice(eh)));return g(g({},e),{},y({},em,ev))}if(eg&&es===u.Z.BOARD_SECTIONS){var eb=d(ep).reverse().map(function(e){return{id:e,type:"boardsection"}}),eS=eg?[].concat(d(eb),d(eg)):d(eb);return g(g({},e),{},y({},em,eS))}if(es===u.Z.AGGREGATED_COMMENTS||es===u.Z.AGGREGATED_COMMENT_REPLIES||es===u.Z.PROFILE_PINS_FEED||es===u.Z.STORY_PINS_FEED||es===u.Z.UNIFIED_COMMENTS){var ex=ep.map(function(e){return{id:e,type:ec}}),e_=eg?[].concat(d(ef?ex:eg),d(ef?eg:ex)):ex;return g(g({},e),{},y({},em,e_))}if(es===u.Z.TRIED_IT_FEED){var ew=ep.map(function(e){return{id:e,type:ec}}),ek=eg?[].concat(d(ew),d(eg)):ew;return g(g({},e),{},y({},em,ek))}break;case"FEED_INVALIDATE":var eP=n.payload,ej=eP.feedType,eI=eP.feedId,eF="".concat(ej,":").concat(eI);return e[eF],g(g({},e),{},y({},eF,null));case"APPEND_FEED_ITEMS":var eT,eC=n.payload,eA=eC.id,eO=eC.items,eR=eC.options,eE=e[eA];if(eE)return eT=eR.isPrepend?eE[0]&&"story"===eE[0].type?[].concat(eE[0],eO,eE.slice(1)):eO.concat(eE):eE.concat(eO),g(g({},e),{},y({},eA,eT));return g(g({},e),{},y({},eA,eO));case"PIN_DELETE":return F(e,"pin",n.payload.pinId);case"BOARD_ARCHIVE":var eD=n.payload,eK=eD.boardId,eM=eD.username,eL="profile-boards:".concat(null!=eM?eM:"");if(e[eL])return g(g({},e),{},y({},eL,e[eL].filter(function(e){return e.id!==eK})));break;case"BOARD_UNARCHIVE":var eZ=n.payload.boardId,eB="archived-boards";if(e[eB])return g(g({},e),{},y({},eB,e[eB].filter(function(e){return e.id!==eZ})));break;case"BOARD_DELETE":return F(e,"board",n.payload.boardId);case"BOARD_SECTION_DELETE":return F(e,"boardsection",n.payload.boardSectionId);case"PINS_MOVE":var eU=n.payload,eN=eU.source,ez=eU.target,eH=eU.pinIds,eW=eU.userId,eG=eN.boardlessPins&&eW&&"boardless-pins:".concat(eW)||eN.boardId&&P(eN.boardId,eN.sectionId),eV=P(ez.boardId,ez.sectionId);return eH.reduce(function(e,n){return _(e,{pinId:n,oldFeedId:eG,newFeedId:eV})},e);case"PINS_MOVE_ALL":var eY=n.payload,eX=eY.source,eq=eY.target,e$=eY.excludePinIds,eJ=P(eX.boardId,eX.sectionId),eQ=P(eq.boardId,eq.sectionId),e0=g(g({},e),{},y({},eJ,e$.map(function(e){return{type:"pin",id:e}})));return delete e0[eQ],e0;case"PIN_EDIT":var e1=n.payload,e2=e1.pinId,e3=e1.boardId,e6=e1.sectionId,e5=e1.source;return _(e,{pinId:e2,oldFeedId:P(e5.boardId,e5.sectionId),newFeedId:P(e3,void 0===e6?"":e6)});case a.AF:if(h.has(n.payload.resource)){var e8,e4=n.payload.response.resource_response.data,e7=e4.board;if("quick_saves"===e7.layout)e8="boardless-pins:".concat(n.payload.options.user_id);else{var e9=n.payload.options.section;e8=e9?"board-section-pins:".concat(e9):"boardfeed:".concat(e7.id)}if(e[e8]){var ne=g({},e),nn={id:e4.id,type:"pin",trackingParams:null==e4?void 0:e4.tracking_params};return ne[e8]=[nn].concat(e[e8]),ne}}if("BoardSectionResource"===n.payload.resource&&n.payload.normalizedResponse){var nt=n.payload.normalizedResponse.result,nr=n.payload.normalizedResponse.entities.boardsections[nt].board,na="board-sections:".concat(nr);if(e[na]){var ni=g({},e);return ni[na]=[{id:nt,type:"boardsection"}].concat(e[na]),ni}}if("AggregatedCommentResource"===n.payload.resource&&n.payload.normalizedResponse){for(var nl={id:n.payload.normalizedResponse.result,type:"aggregatedcomment"},no=g({},e),ns=0,nu=["aggregated-comments","unified-comments"];ns<nu.length;ns++){var nc=nu[ns],nd="".concat(nc,":").concat(n.payload.options.objectId);e[nd]&&(no=g(g({},no),{},y({},nd,[nl].concat(no[nd]))))}return no}if("AggregatedCommentReplyResource"===n.payload.resource&&n.payload.normalizedResponse){var np="".concat(u.Z.AGGREGATED_COMMENT_REPLIES,":").concat(n.payload.options.objectId);return g(g({},e),{},y({},np,[].concat(d(e[np]||[]),[{id:n.payload.normalizedResponse.result,type:"aggregatedComment"}])))}if("ReactionsResource"===n.payload.resource&&n.payload.normalizedResponse){var nf=n.payload.options,nm=nf.reaction_pin_id,ng=nf.reaction_type;if("reaction"===n.payload.options.action_type){var ny="reactions:".concat(n.payload.options.pin_id),nh=g({},e),nv={id:"".concat(nm,":").concat(n.payload.options.user_id,":").concat(ng),type:"reaction",trackingParams:void 0};return nh[ny]=[nv].concat(e[ny]),nh}if("unreaction"===n.payload.options.action_type)return F(e,"reaction","".concat(nm,":").concat(n.payload.options.user_id))}}return e}},254889:function(e,n,t){t.r(n),t.d(n,{default:function(){return v}});var r=t(581722),a=t(653551),i=t(20256),l=t(4533),o=t(104999),s=t(746868),u=t(351736),c=t(24246),d=t(173874),p=t(34550),f=t(865043),m=t(736328),g=t(739405),y=t(680811);function h(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function v(e){var n,t=e.alignIconLeft,v=e.bgColor,b=e.color,S=e.disableRedirect,x=void 0!==S&&S,_=e.fallbackUrl,w=e.icon,k=void 0===w?"arrow-back":w,P=e.onTouch,j=e.padding,I=e.placement,F=e.shouldUseFallbackUrl,T=e.size,C=void 0===T?"lg":T,A=e.viewParameter,O=e.viewType,R=e.isVisualSearch,E=(0,c.Z)(),D=(0,a.s0)(),K=(0,a.TH)(),M=(0,g.HG)(),L=(0,r.v9)(function(e){return e.session.isAuthenticated}),Z=(0,o.Z)(),B=(0,m.Z)(),U=(0,u.vs)(),N=(0,s.SU)(),z=N.viewType,H=N.viewParameter,W=function(e){if(Array.isArray(e))return e}(n=O?[O,A]:[z,H])||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,i,l,o=[],s=!0,u=!1;try{for(i=(t=t.call(e)).next;!(s=(r=i.call(t)).done)&&(o.push(r.value),2!==o.length);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(u)throw a}}return o}}(n,2)||function(e,n){if(e){if("string"==typeof e)return h(e,2);var t=({}).toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?h(e,2):void 0}}(n,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),G=W[0],V=W[1],Y=function(){var e=(0,p.M0)().getItem(l.pm);K.key||"/ideas"!==_?(0,f.My)("pinner_conversion.back_button.".concat(String(null==e?void 0:e[0].pageType))):(0,f.My)("pinner_conversion.back_button.no_history"),(0,f.My)("web_back_button_click.".concat(String(I),".is_auth_").concat(String(L))),B({action:"click",item:"back-button"}),G&&Z({view_type:G,view_parameter:V,element:34,event_type:102}),P&&P(),x||((!K.key||K.state&&"redirect"===K.state.referrer||F)&&_?D(_):K.pathname.includes("/password/reset/")&&K.search&&K.search.includes("?nativeShouldDismiss=true")?D("/login/?dismissWebview=true"):D(-1))},X=U?u.t4:"white",q=(0,d.am)(K)||R||"white"===b;return(0,y.jsx)(i.xu,{"data-test-id":"back-button",children:t?(0,y.jsx)(i.xu,{alignItems:"center",display:"flex",height:48,marginStart:"cancel"===k?-1:-2,width:48,children:(0,y.jsx)(i.hU,{accessibilityLabel:E._('Back', 'navigation button', 'navigation button'),bgColor:v,icon:k,iconColor:!b&&(!v||["white","lightGray","transparent"].includes(v))?"gray":b,onClick:Y,padding:"auto"!==j?j:2,size:C})}):(0,y.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:M||q||v?"":X,width:U&&!q?"fit-content":""}},rounding:"circle",children:(0,y.jsx)(i.hU,{accessibilityLabel:E._('Back', 'navigation button', 'navigation button'),bgColor:v||M?v:"transparent",icon:k,iconColor:!b&&(!v||["white","lightGray","transparent"].includes(v))?"gray":b,onClick:Y,padding:"auto"!==j?j:2,size:C})})})}},402164:function(e,n,t){var r,a,i=t(803035),l=t(554307),o=0,s=0;n.Z=function(e,n,t){var u=n&&t||0,c=n||Array(16),d=(e=e||{}).node||r,p=void 0!==e.clockseq?e.clockseq:a;if(null==d||null==p){var f=e.random||(e.rng||i.Z)();null==d&&(d=r=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==p&&(p=a=(f[6]<<8|f[7])&16383)}var m=void 0!==e.msecs?e.msecs:Date.now(),g=void 0!==e.nsecs?e.nsecs:s+1,y=m-o+(g-s)/1e4;if(y<0&&void 0===e.clockseq&&(p=p+1&16383),(y<0||m>o)&&void 0===e.nsecs&&(g=0),g>=1e4)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");o=m,s=g,a=p;var h=((0xfffffff&(m+=122192928e5))*1e4+g)%0x100000000;c[u++]=h>>>24&255,c[u++]=h>>>16&255,c[u++]=h>>>8&255,c[u++]=255&h;var v=m/0x100000000*1e4&0xfffffff;c[u++]=v>>>8&255,c[u++]=255&v,c[u++]=v>>>24&15|16,c[u++]=v>>>16&255,c[u++]=p>>>8|128,c[u++]=255&p;for(var b=0;b<6;++b)c[u+b]=d[b];return n||(0,l.Z)(c)}}}]);