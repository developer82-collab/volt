"use strict";(self.legacyJsonp=self.legacyJsonp||[]).push([["86855"],{721350:function(t,e,n){e.Z={css:(0,n(496102).Ll)(["pulsing {\n  0% {\n    opacity: 1;\n  }\n\n  50% {\n    opacity: 0.4;\n  }\n\n  100% {\n    opacity: 1;\n  }\n}"]),animation:"pulsing 2s infinite"}},837378:function(t,e,n){n.d(e,{Z:function(){return m}});var r=n(387784),o=n(20256),i=n(680811),a={nw_horizontal:"inset(0 0 0 50%)",nw_vertical:"inset(50% 0 0 0)",ne_horizontal:"inset(0 50% 0 0)",ne_vertical:"inset(50% 0 0 0)",sw_horizontal:"inset(0 0 0 50%)",sw_vertical:"inset(0 0 50% 0)",se_horizontal:"inset(0 50% 0 0)",se_vertical:"inset(0 0 50% 0)"},c=function(t,e,n,r){var o=void 0!==t,i=void 0!==n,a=void 0!==e,c=void 0!==r;return o&&a&&!i&&!c?"nw":o&&c&&!i&&!a?"ne":i&&a&&!o&&!c?"sw":i&&c&&!o&&!a?"se":"none"};function u(t){var e=t.top,n=t.left,u=t.bottom,l=t.right,s=t.size,f=t.transition,d=t.opacity,m=(0,r.useMemo)(function(){var t=c(e,n,u,l),r=0===e||0===u?"horizontal":0===n||0===l?"vertical":"none";return"".concat(t,"_").concat(r)},[e,n,u,l]),p=a[m]||"none";return(0,i.jsx)(o.xu,{color:"default",dangerouslySetInlineStyle:{__style:{top:e,left:n,right:l,bottom:u,clipPath:p,transition:f,opacity:d}},"data-test-id":m,height:s,position:"absolute",rounding:"circle",width:s})}var l=n(221175);function s(t){var e=t.anchorSize,n=t.corner,r=t.maxTouchSize,a=l.FA[n],c="".concat(l.tT," ").concat(n),u=Math.min(l.e4*l.MS,r),s=(u-e)/2,f=n.includes("n")?-s:void 0,d=n.includes("w")?-s:void 0,m=n.includes("s")?-s:void 0,p=n.includes("e")?-s:void 0;return(0,i.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{top:f,left:d,bottom:m,right:p,cursor:a,pointerEvents:"auto"}},"data-test-id":"cropper-corner-".concat(n),height:u,id:c,position:"absolute",width:u})}var f=n(30430),d=function(t){var e=t.x,n=t.y,r=t.size;return"linear-gradient(black, black) ".concat(e,"px ").concat(n,"px / ").concat(r,"px ").concat(r,"px no-repeat")};function m(t){var e=t.anchorSelection,n=t.h,a=t.handleCount,c=t.size,m=t.transition,p=t.visibility,y=t.w,h=t.x,b=t.y,v=2===a,g=v?l.jf:l.m6,x=v?l.O3:l.ps,S=c/2,w=l.e4/2-l.xh-x-l.eq+(0,f.Z)({w:y,h:n,minSize:l.eq,maxSize:0}),j=y+2*S-2*w,_=n+2*S-2*w,k=l.e4-c,O=Math.max(l.CT-k,l.AL),C=l.xh/2,M=c-C,P=M-C,I=(Math.min(j,_)-l.dH)/2,R="ne"===e?1:g,A=d({x:j-M,y:0,size:M}),E="nw"===e?1:g,z=d({x:0,y:0,size:M}),W="sw"===e?1:g,T=d({x:0,y:_-M,size:M}),Z="se"===e?1:g,L=d({x:j-M,y:_-M,size:M});return(0,i.jsxs)(o.xu,{dangerouslySetInlineStyle:{__style:{top:b-S+w,left:h-S+w,pointerEvents:"none",visibility:p,transition:m}},height:_,position:"absolute",width:j,children:[(0,i.jsx)(o.xu,{color:"transparent",dangerouslySetInlineStyle:{__style:{border:"".concat(l.xh,"px solid white"),borderRadius:"".concat(O,"px"),mask:A,pointerEvents:"none",transition:m,opacity:R}},height:"100%",left:!0,position:"absolute",top:!0,width:"100%"}),(0,i.jsx)(u,{opacity:R,right:0,size:l.xh,top:P,transition:m}),(0,i.jsx)(u,{opacity:R,right:P,size:l.xh,top:0,transition:m}),(0,i.jsx)(s,{anchorSize:c,corner:"ne",maxTouchSize:I}),(0,i.jsx)(o.xu,{color:"transparent",dangerouslySetInlineStyle:{__style:{border:"".concat(l.xh,"px solid white"),borderRadius:"".concat(O,"px"),mask:T,pointerEvents:"none",transition:m,opacity:W}},height:"100%",left:!0,position:"absolute",top:!0,width:"100%"}),(0,i.jsx)(u,{bottom:0,left:P,opacity:W,size:l.xh,transition:m}),(0,i.jsx)(u,{bottom:P,left:0,opacity:W,size:l.xh,transition:m}),(0,i.jsx)(s,{anchorSize:c,corner:"sw",maxTouchSize:I}),!v&&(0,i.jsxs)(r.Fragment,{children:[(0,i.jsx)(o.xu,{color:"transparent",dangerouslySetInlineStyle:{__style:{border:"".concat(l.xh,"px solid white"),borderRadius:"".concat(O,"px"),mask:z,pointerEvents:"none",transition:m,opacity:E}},height:"100%",left:!0,position:"absolute",top:!0,width:"100%"}),(0,i.jsx)(u,{left:0,opacity:E,size:l.xh,top:P,transition:m}),(0,i.jsx)(u,{left:P,opacity:E,size:l.xh,top:0,transition:m}),(0,i.jsx)(s,{anchorSize:c,corner:"nw",maxTouchSize:I}),(0,i.jsx)(o.xu,{color:"transparent",dangerouslySetInlineStyle:{__style:{border:"".concat(l.xh,"px solid white"),borderRadius:"".concat(O,"px"),mask:L,pointerEvents:"none",transition:m,opacity:Z}},height:"100%",left:!0,position:"absolute",top:!0,width:"100%"}),(0,i.jsx)(u,{bottom:0,opacity:Z,right:P,size:l.xh,transition:m}),(0,i.jsx)(u,{bottom:P,opacity:Z,right:0,size:l.xh,transition:m}),(0,i.jsx)(s,{anchorSize:c,corner:"se",maxTouchSize:I})]})]})}},938306:function(t,e,n){n.d(e,{Z:function(){return g}});var r=n(387784),o=n(20256),i=n(104999),a=n(221175),c=n(837378),u=n(110196),l=n(325574),s=n(738735),f=n(30430),d=n(360033),m=n(480706),p=n(501010),y=n(979173),h=n(680811);function b(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return v(t,e);var n=({}).toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(t,e):void 0}}(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function g(t){var e,n,v,g,x,S,w=t.children,j=t.cropArea,_=j.x,k=j.y,O=j.w,C=j.h,M=t.cropSource,P=t.hoveredCutoutIndex,I=t.imageContainerX,R=t.imageContainerY,A=t.imageSize,E=A.width,z=void 0===E?1:E,W=A.height,T=void 0===W?1:W,Z=t.objectDetection,L=t.onChange,D=t.setHoveredCutoutIndex,H=t.setSelectedCutoutIndex,F=t.viewParameter,X=t.viewType,G=(0,p.Z)().checkExperiment,B=(0,i.Z)(),U=(0,r.useRef)(null),Y=(0,r.useMemo)(function(){return{x:0,y:0,w:z,h:T}},[T,z]),N=(0,r.useMemo)(function(){return(0,l.Z)({cropArea:{x:_,y:k,w:O,h:C},imageSize:{width:z,height:T}})},[C,O,_,k,T,z]),V=b((0,r.useState)(function(){return(0,d.ZP)({x:_,y:k,w:O,h:C},Y)?Y:N}),2),q=V[0],$=V[1],Q=(0,r.useMemo)(function(){return(0,d.ZP)(q,Y)},[q,Y]),J=b((0,r.useState)("none"),2),K=J[0],tt=J[1],te=b((0,r.useState)("none"),2),tn=te[0],tr=te[1],to=b((0,r.useState)(!1),2),ti=to[0],ta=to[1],tc=b((0,r.useState)(!1),2),tu=tc[0],tl=tc[1],ts=b((0,r.useState)(!1),2),tf=ts[0],td=ts[1],tm=b((0,r.useState)(0),2),tp=tm[0],ty=tm[1],th=b((0,r.useState)(0),2),tb=th[0],tv=th[1],tg=G("web_cropper_object_selection"),tx=tg.anyEnabled,tS=tg.group,tw=q.x,tj=q.y,t_=q.w,tk=q.h,tO=(0,r.useMemo)(function(){return(0,f.Z)({w:t_,h:tk,minSize:a.Zn,maxSize:a.e4})},[tk,t_]),tC=a.e4-tO,tM=tx?a.O3:a.ps,tP=a.Y4-tO,tI=a.SP,tR=a.SP,tA=z-a.SP,tE=T-a.SP,tz="number"==typeof P,tW=tu?"none":"0.3s cubic-bezier(0.42, 0, 0.58, 1.2)",tT=(0,u.Z)({cropperSelection:K,anchorSelection:tn,hasMouseMoved:tu}),tZ=tx?(n=(e={cropperSelection:K,isTargetOnObject:ti,cropSource:M,hasClickedOnObject:tf,experimentGroup:tS}).cropperSelection,v=e.isTargetOnObject,g=e.cropSource,x=e.hasClickedOnObject,S=e.experimentGroup,("none"===n||v)&&(9===g||x)?"enabled_darker"===S?a.z3:a.pg:0):0,tL=function(t){t.preventDefault();var e=t.clientX,n=t.clientY,r=t.target,o=e-I,i=n-R;tl(!1),td(!1),ty(o),tv(i);var c=r.id,u=b(c.split(" "),2),l=u[0],s=u[1],f="".concat(l)===a.tT,d=c===a.at,p=c===a.eX,h=c===m.P,v=c===y.I;f?(tt("anchor"),tr(void 0===s?"none":s)):p?tt("cropbox"):d?tt("background"):(!(tw<o&&o<tw+t_&&tj<i&&i<tj+tk)||Q?tt("background"):tt("cropbox"),ta(h||v))},tD=function(t){if("none"!==K){var e=t.clientX,n=t.clientY,r=e-I,o=n-R;if(!(Math.abs(r-tp)<a.yG&&Math.abs(o-tb)<a.yG&&!tu&&["cropbox","background"].includes(K)))switch(tl(!0),ta(!1),null==D||D(null),null==H||H(-1),K){case"anchor":var i=["nw","sw"].includes(tn),c=["nw","ne"].includes(tn),u=Math.max(Math.min(r,tA),tI),l=Math.max(Math.min(o,tE),tR);$({x:i?Math.min(u,tw+t_-a.yz):tw,y:c?Math.min(l,tj+tk-a.yz):tj,w:i?Math.max(tw+t_-u,a.yz):Math.max(u-tw,a.yz),h:c?Math.max(tj+tk-l,a.yz):Math.max(l-tj,a.yz)});break;case"cropbox":var s=Math.max(Math.min(tw+(r-tp),z-t_-tI),tI),f=Math.max(Math.min(tj+(o-tb),T-tk-tR),tR);ty(r),tv(o),$({x:s,y:f,w:t_,h:tk});break;case"background":var d=Math.max(Math.min(r,z),0),m=Math.max(Math.min(o,T),0),p=d-tp,y=m-tb;$({x:Math.min(tp,d),y:Math.min(tb,m),w:Math.abs(p),h:Math.abs(y)})}}},tH=function(){if(tt("none"),tr("none"),ta(!1),tl(!1),"none"!==K){if(ti&&("cutouts"===Z&&tz||"dots"===Z))return void td(!0);var t=function(t,e){L({cropArea:t,cropSource:e}),$(t)};if(tu){var e=Math.max(Math.min(tw,z-a.yz-tI),tI),n=Math.max(Math.min(tj,T-a.yz-tR),tR),r=tk<a.yz?a.yz:n+tk>T-tR?T-n-tR:tk,o=t_<a.yz?a.yz:e+t_>z-tI?z-e-tI:t_;t({x:e,y:n,w:o,h:r},6),"cropbox"===K?B({event_type:7603,view_type:X,view_parameter:F}):"anchor"===K?B({event_type:7604,view_type:X,view_parameter:F}):"background"===K&&B({event_type:16584,view_type:X,view_parameter:F})}else Q||"background"===K?(t((0,s.Z)({mouseX:tp,mouseY:tb,cropSize:a.Rk,minBound:a.SP,imageWidth:z,imageHeight:T}),6),B({event_type:16585,view_type:X,view_parameter:F})):"cropbox"===K&&(t(Y,5),B({event_type:16586,view_type:X,view_parameter:F}))}};return(0,r.useEffect)(function(){tf&&$(N)},[N,tf]),(0,r.useEffect)(function(){var t=U.current;return null==t||t.addEventListener("mousedown",tL),window.addEventListener("mousemove",tD),window.addEventListener("mouseup",tH),function(){null==t||t.removeEventListener("mousedown",tL),window.removeEventListener("mousemove",tD),window.removeEventListener("mouseup",tH)}}),(0,h.jsxs)(o.xu,{ref:U,bottom:!0,dangerouslySetInlineStyle:{__style:{cursor:tT}},"data-test-id":"visual-search-cropper",left:!0,position:"absolute",right:!0,top:!0,children:[(0,h.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{border:"".concat(tM,"px solid rgba(255, 255, 255, 0.20)"),borderRadius:"".concat(tP,"px"),boxShadow:"0 0 0 99999px rgba(0, 0, 0, 0.35)",left:tw,top:tj,transition:tW,backgroundColor:"rgba(0, 0, 0, ".concat(tZ,")")}},height:tk,position:"absolute",width:t_}),(0,h.jsx)(o.xu,{bottom:!0,id:a.at,left:!0,position:"absolute",right:!0,top:!0}),(0,h.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{visibility:Q?"hidden":"visible",left:tw,top:tj}},"data-test-id":"cropper-section",height:tk,id:a.eX,position:"absolute",width:t_}),w,(0,h.jsx)(c.Z,{anchorSelection:tn,h:tk,handleCount:tx?2:4,size:tC,transition:tW,visibility:Q||"background"===K&&tu?"hidden":"visible",w:t_,x:tw,y:tj})]})}},110196:function(t,e,n){n.d(e,{Z:function(){return r}});function r(t){var e=t.cropperSelection,n=t.anchorSelection,r=t.hasMouseMoved;if("background"===e&&r)return"crosshair";if("cropbox"===e&&r)return"move";if("anchor"===e){if("nw"===n||"se"===n)return"nwse-resize";else if("ne"===n||"sw"===n)return"nesw-resize"}return"auto"}},325574:function(t,e,n){n.d(e,{Z:function(){return o}});var r=n(221175);function o(t){var e=t.cropArea,n=t.imageSize,o=e.x,i=e.y,a=e.w,c=e.h,u=n.height,l=n.width;if(!u||!l)return e;var s=o,f=i,d=a,m=c;return s<r.SP&&(s=r.SP,d-=r.SP-o),s+d>l-r.SP&&(d-=s+d-l+r.SP),f<r.SP&&(f=r.SP,m-=r.SP-i),f+m>u-r.SP&&(m-=f+m-u+r.SP),{x:s,y:f,w:d,h:m}}},738735:function(t,e,n){n.d(e,{Z:function(){return o}});var r=function(t){var e=t.coordinate,n=t.cropSize,r=t.maxBound,o=t.minBound;return e<=o?o:r<=e+n?r-n:e};function o(t){var e=t.cropSize,n=t.imageHeight,o=t.imageWidth,i=t.minBound,a=t.mouseX,c=t.mouseY,u=a-e/2,l=c-e/2,s=o-i,f=n-i;return{x:r({coordinate:u,minBound:i,maxBound:s,cropSize:e}),y:r({coordinate:l,minBound:i,maxBound:f,cropSize:e}),w:e,h:e}}},30430:function(t,e,n){n.d(e,{Z:function(){return o}});var r=n(221175);function o(t){var e=t.w,n=t.h,o=t.minSize,i=t.maxSize,a=Math.min(e,n);return a<=r.yz?i-o:a<r.Kw?(i-o)/(r.Kw-r.yz)*(r.Kw-a):0}},480706:function(t,e,n){n.d(e,{P:function(){return s}});var r=n(387784),o=n(20256),i=n(24246),a=n(680811);function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var s="flashlight-dot-style";e.Z=(0,r.forwardRef)(function(t,e){var n,f=t.icon,d=t.onClick,m=t.onMouseDown,p=t.onMouseEnter,y=t.onMouseLeave,h=t.onMouseUp,b=t.selected,v=t.style,g=t.text,x=t.x,S=t.y,w=t.zIndex,j=t.backdropDiameter,_=void 0===j?32:j,k=t.dotDiameter,O=void 0===k?16:k,C=function(t){if(Array.isArray(t))return t}(n=(0,r.useState)(!1))||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,l=!1;try{for(i=(n=n.call(t)).next;!(u=(r=i.call(n)).done)&&(c.push(r.value),2!==c.length);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(n,2)||function(t,e){if(t){if("string"==typeof t)return l(t,2);var n=({}).toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,2):void 0}}(n,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),M=C[0],P=C[1],I=(0,i.Z)(),R=M?_+4:_;return(0,a.jsx)(o.xu,{ref:e,dangerouslySetInlineStyle:{__style:{top:S-R/2,left:x-R/2,outline:"none"}},position:"absolute",zIndex:new o.Ry(w||0),children:(0,a.jsx)(o.iP,{accessibilityLabel:I._('Search this item', 'flashlight.dot.a11ylabel', 'accessibility label for flashlight dot'),dataTestId:"flashlight-dot",onMouseDown:m,onMouseEnter:function(t){var e=t.event;P(!0),null==p||p({event:e})},onMouseLeave:function(t){var e=t.event;P(!1),null==y||y({event:e})},onMouseUp:h,onTap:d,tabIndex:0,children:(0,a.jsxs)(o.xu,{alignItems:"center",borderStyle:"none",color:"default",dangerouslySetInlineStyle:{__style:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach(function(e){var r,o;r=e,o=n[e],(r=function(t){var e=function(t,e){if("object"!=c(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=c(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==c(e)?e:e+""}(r))in t?Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({boxShadow:b?"0 0 0 3px #e60023":"none",borderRadius:O,top:(R-O)/2,left:(R-O)/2},v)},"data-test-id":s,display:"flex",height:O,id:s,justifyContent:"center",padding:0,position:"absolute",width:O,children:[!!g&&(0,a.jsx)(o.xv,{align:"center",color:"default",inline:!0,size:"100",weight:"bold",children:g}),f&&(0,a.jsx)(o.JO,{accessibilityLabel:I._('Tag anchor', 'accessibility label for an anchor for an object in a pin', 'accessibility label for an anchor for an object in a pin'),color:"error",icon:f,inline:!0,size:O/2})]})})})})},261954:function(t,e,n){n.r(e),n.d(e,{default:function(){return F}});var r=n(387784),o=n(20256),i=n(2171),a=n(230201),c=n(817468);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e,n){return(e=s(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t){var e=function(t,e){if("object"!=u(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=u(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==u(e)?e:e+""}var f={},d=function(t){var e=t.__id||t.id;return"string"==typeof e&&e||null},m=function(){var t;function e(){if(!(this instanceof e))throw TypeError("Cannot call a class as a function");l(this,"idMap",new Map),l(this,"objMap",new WeakMap)}return t=[{key:"get",value:function(t){var e,n=d(t);return null!=(e=this.objMap.get(t))?e:n?this.idMap.get(n):void 0}},{key:"has",value:function(t){var e,n=d(t);return null!=(e=this.objMap.has(t))?e:!!n&&this.idMap.has(n)}},{key:"set",value:function(t,e){var n=d(t);n&&this.idMap.set(n,e),this.objMap.set(t,e)}},{key:"reset",value:function(){this.idMap=new Map,this.objMap=new WeakMap}}],function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,s(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}();function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function y(t,e){var n,r,o;return"number"==typeof t?t:"lg1"===e?null!=(r=null!=(o=t[e])?o:t.lg)?r:1:null!=(n=t[e])?n:1}var h=n(309947),b=n(589172);function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var g=n(721350),x=n(440077),S=n(59111),w=n(680811),j=g.Z.css,_=g.Z.animation,k={backgroundColor:x.zsO,animation:_,borderRadius:x.saV};function O(t){var e=t.data.height;return(0,w.jsxs)(r.Fragment,{children:[(0,w.jsx)(S.Z,{unsafeCSS:j}),(0,w.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:k},"data-test-id":"skeleton-pin",children:(0,w.jsx)(o.xu,{height:e})})]})}function C(t){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function M(t){return function(t){if(Array.isArray(t))return P(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return P(t,void 0);var n=({}).toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(t,void 0):void 0}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var I=n(806513),R=n(501010),A=n(774838),E=n(739405),z=n(767415),W=n(354139),T=n(177433);function Z(t){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function L(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function D(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function H(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?D(Object(n),!0).forEach(function(e){var r,o;r=e,o=n[e],(r=function(t){var e=function(t,e){if("object"!=Z(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Z(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Z(e)?e:e+""}(r))in t?Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function F(t){var e,n,u,l,s,d,g,x,j,_,k,P,Z,D,F,X,G,B,U,Y,N,V,q,$,Q,J,K,tt,te,tn,tr,to,ti,ta,tc,tu,tl,ts,tf=t.align,td=t.cacheKey,tm=t.id,tp=t.isFetching,ty=t.isGridCentered,th=t.items,tb=t.layout,tv=t.loadItems,tg=t.masonryRef,tx=t.optOutFluidGridExperiment,tS=t.renderItem,tw=t.scrollContainerRef,tj=t.virtualize,t_=void 0===tj||tj,tk=t.getColumnSpanConfig,tO=t._getResponsiveModuleConfigForSecondItem,tC=t.isLoadingStateEnabled,tM=t.initialLoadingStatePinCount,tP=t.isLoadingAccessibilityLabel,tI=t.isLoadedAccessibilityLabel,tR=(0,E.ZP)(),tA=(0,A.B)(),tE=tA.isAuthenticated,tz=tA.isRTL,tW=tA.userAgent,tT=tA.stage,tZ=tW.browserName,tL=tW.platform,tD=(0,a.u)().logContextEvent,tH=(0,R.Z)(),tF="desktop"===tR,tX=(0,T.Zv)(),tG=(0,W.DB)(),tB=((0,r.useRef)(th.map(function(){return{fetchTimestamp:Date.now(),measureTimestamp:Date.now(),hasRendered:!1,pageCount:0}})),tF&&!(void 0!==tx&&tx)),tU=(0,h.Z)(tB),tY=tU.experimentalColumnWidth,tN=tU.experimentalGutter,tV=null!=(to=t.serverRender)?to:!!tF,tq="flexible"===tb||"uniformRowFlexible"===tb||"desktop"!==tR||tB,t$=tq&&null!=tb&&tb.startsWith("uniformRow")?"uniformRowFlexible":void 0,tQ=null!=t$?t$:tV?"serverRenderedFlexible":"flexible",tJ=null!=(ti=null!=(ta=t.columnWidth)?ta:tY)?ti:I.yF;tq&&(tJ=Math.floor(tJ));var tK=null!=(tc=null!=(tu=t.gutterWidth)?tu:tN)?tc:tF?I.oX:1,t0=null!=(tl=t.minCols)?tl:I.yc,t1=((0,r.useRef)(0),tJ+tK),t2=function(t){if(null!=t){var e,n=((e=f[t])&&e.screenWidth===window.innerWidth||(f[t]={screenWidth:window.innerWidth}),f[t]);return n.measurementCache||(n.measurementCache=new m),n.measurementCache}}(td),t3=(0,r.useCallback)(function(){return(null==tw?void 0:tw.current)||window},[tw]),t8=(0,r.useRef)(!0),t5=tH.checkExperiment("web_masonry_pin_overlap_calculation_and_logging"),t4=t5.anyEnabled,t6=t5.group,t7=tH.checkExperiment("visual_search_stl_eligibility_check_migration_gss_css",{dangerouslySkipActivation:!0}).anyEnabled,t9=(void 0===ty||ty)&&t8.current?"centered":"",et=(F=D={gutterWidth:tK,flexible:tq,items:th,isRTL:tz,itemWidth:tJ,maxColumns:null!=(ts=t.maxColumns)?ts:Math.max(th.length,I.g5),minColumns:t0,getColumnSpanConfig:tk,_getResponsiveModuleConfigForSecondItem:tO},X="m_".concat(Object.keys(F).sort().reduce(function(t,e){var n=F[e];return null==n||"object"===p(n)||"function"==typeof n?t:"boolean"==typeof n?t+(n?"t":"f"):t+n},"").replace(/\:/g,"\\:")),G=D.flexible,B=D.gutterWidth,U=D.isRTL,Y=D.itemWidth,N=D.maxColumns,V=D.minColumns,q=D.items,$=D.getColumnSpanConfig,Q=D._getResponsiveModuleConfigForSecondItem,J=$?q.map(function(t,e){var n;return{index:e,columnSpanConfig:null!=(n=$(t))?n:1}}).filter(function(t){return 1!==t.columnSpanConfig}):[],K=Y+B,te=(tt=Array.from({length:N+1-V},function(t,e){return e+V}).map(function(t){var e,n,r=t===V?0:t*K,o=t===N?null:(t+1)*K-.01;$&&Q&&q.length>1&&(e=$(q[0]),n=Q(q[1]));var i=J.reduce(function(r,o){var i,a,c,u,l,s,f,d,m,p,h=o.columnSpanConfig,b=Math.min(function(t){var e=t.columnCount,n=t.columnSpanConfig,r=t.firstItemColumnSpanConfig,o=t.isFlexibleWidthItem,i=t.secondItemResponsiveModuleConfig,a=e<=2?"sm":e<=4?"md":e<=6?"lg1":e<=8?"lg":"xl",c=y(n,a);if(o){var u=y(r,a);c="number"==typeof i?i:i?Math.max(i.min,Math.min(i.max,e-u)):1}return c}({columnCount:t,columnSpanConfig:h,isFlexibleWidthItem:!!n&&o===q[1],firstItemColumnSpanConfig:null!=(m=e)?m:1,secondItemResponsiveModuleConfig:null!=(p=n)?p:1}),t),v=null!=o.index&&r.numberOfVisibleItems>=b+o.index,g=G?100/t*b:Y*b+B*(b-1),x=r.numberOfVisibleItems;return v?x-=b-1:o.index<x&&(x+=1),{styles:r.styles.concat((a=(i={className:X,index:o.index,columnSpanConfig:h,visible:v,width:g,flexible:G}).className,c=i.index,u=i.columnSpanConfig,l=i.visible,s=i.width,f=i.flexible,d="number"==typeof u?u:btoa(JSON.stringify(u)),f?"\n      .".concat(a,' .static[data-column-span="').concat(d,'"]:nth-child(').concat(c+1,") {\n        visibility: ").concat(l?"visible":"hidden"," !important;\n        position: ").concat(l?"inherit":"absolute"," !important;\n        width: ").concat(s,"% !important;\n      }"):"\n      .".concat(a,' .static[data-column-span="').concat(d,'"]:nth-child(').concat(c+1,") {\n        visibility: ").concat(l?"visible":"hidden"," !important;\n        position: ").concat(l?"inherit":"absolute"," !important;\n        width: ").concat(s,"px !important;\n      }"))),numberOfVisibleItems:x}},{styles:"",numberOfVisibleItems:t}),a=i.styles,c=i.numberOfVisibleItems,u=G?"\n      .".concat(X," .static {\n        box-sizing: border-box;\n        width: calc(100% / ").concat(t,") !important;\n      }\n    "):"\n      .".concat(X," {\n        max-width: ").concat(t*K,"px;\n      }\n\n      .").concat(X," .static {\n        width: ").concat(Y,"px !important;\n      }\n    ");return{minWidth:r,maxWidth:o,styles:"\n      .".concat(X," .static:nth-child(-n+").concat(c,") {\n        position: static !important;\n        visibility: visible !important;\n        float: ").concat(U?"right":"left",";\n        display: block;\n      }\n\n      .").concat(X," .static {\n        padding: 0 ").concat(B/2,"px;\n      }\n\n      ").concat(u,"\n\n      ").concat(a,"\n    ")}})).map(function(t){var e=t.minWidth,n=t.maxWidth,r=t.styles;return"\n    @container (min-width: ".concat(e,"px) ").concat(n?"and (max-width: ".concat(n,"px)"):""," {\n      ").concat(r,"\n    }\n  ")}),tn=tt.map(function(t){var e=t.minWidth,n=t.maxWidth,r=t.styles;return"\n    @media (min-width: ".concat(e,"px) ").concat(n?"and (max-width: ".concat(n,"px)"):""," {\n      ").concat(r,"\n    }\n  ")}),tr="\n    ".concat(te.join(""),"\n    @supports not (container-type: inline-size) {\n      ").concat(tn.join(""),"\n    }\n  "),{className:X,styles:"\n    .masonryContainer:has(.".concat(X,") {\n      container-type: inline-size;\n    }\n\n    .masonryContainer > .centered {\n      margin-left: auto;\n      margin-right: auto;\n    }\n\n    .").concat(X," .static {\n      position: absolute !important;\n      visibility: hidden !important;\n    }\n\n    ").concat(tr,"\n  ")}),ee=et.className,en=et.styles,er="".concat(t9," ").concat(ee).trim(),eo=(0,b.Z)(),ei=eo.anyEnabled,ea=(eo.expName,eo.group),ec=eo.isMeasureAllEnabled,eu=((0,r.useRef)(void 0),(0,r.useRef)(th.length)),el=(0,r.useRef)(0),es=(0,r.useRef)(null);(0,r.useEffect)(function(){eu.current=th.length,el.current+=1},[th]),(0,r.useEffect)(function(){if(t8.current&&(t8.current=!1),window.earlyGridRenderStats){var t,e=H(H({},(0,W.M3)({earlyHydrationConfig:tG,handlerId:tX,requestContext:tA})),{},{status:null!=(t=window.earlyGridRenderStats.status)?t:"unknown"});(0,z.nP)("earlyHydrationDebug.masonry.earlyGridRender.status.".concat(window.earlyGridRenderStats.status),{tags:e}),(0,z.LY)("earlyHydrationDebug.masonry.earlyGridRender.init",window.earlyGridRenderStats.init,{tags:e}),window.earlyGridRenderStats.start&&(0,z.LY)("earlyHydrationDebug.masonry.earlyGridRender.start",window.earlyGridRenderStats.start,{tags:e}),window.earlyGridRenderStats.end&&(0,z.LY)("earlyHydrationDebug.masonry.earlyGridRender.end",window.earlyGridRenderStats.end,{tags:e})}},[]),(0,r.useEffect)(function(){return function(){}},[]);var ef=(0,r.useCallback)(function(t){var e=t.reduce(function(t,e){return t+e}),n=e/t.length,r={experimentalMasonryGroup:ea||"unknown",handlerId:tX,isAuthenticated:tE,multiColumnItemSpan:t.length,browserName:tZ,platform:tL,stage:tT||"unknown"};(0,z.nP)("webapp.masonry.multiColumnWhitespace.count",{sampleRate:1,tags:r}),(0,z.S0)("webapp.masonry.multiColumnWhitespace.average",n,{sampleRate:1,tags:H(H({},r),{},{minCols:t0})}),tD({event_type:15878,component:14468,aux_data:{total_whitespace_px:e}}),tD({event_type:16062,component:14468,aux_data:{average_whitespace_px:n}}),tD({event_type:16063,component:14468,aux_data:{max_whitespace_px:Math.max.apply(Math,function(t){if(Array.isArray(t))return L(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return L(t,void 0);var n=({}).toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L(t,void 0):void 0}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}}),t.forEach(function(t){t>=50&&((0,z.nP)("webapp.masonry.multiColumnWhitespace.over50",{sampleRate:1,tags:r}),tD({event_type:16261,component:14468})),t>=100&&((0,z.nP)("webapp.masonry.multiColumnWhitespace.over100",{sampleRate:1,tags:r}),tD({event_type:16262,component:14468}))})},[tZ,ea,tX,tE,tD,t0,tL,tT]),ed=(u=void 0===(n=(e={isLoadingStateEnabled:tC,items:th,renderItem:(0,r.useCallback)(function(t){return(0,w.jsx)(c.Z,{name:"MasonryItem",children:tS(t)})},[tS]),isFetching:tp,initialLoadingStatePinCount:tM}).initialLoadingStatePinCount)?50:n,s=void 0===(l=e.infiniteScrollPinCount)?10:l,d=e.isFetching,x=void 0===(g=e.items)?[]:g,j=e.renderItem,_=e.isLoadingStateEnabled,k=+(x.filter(function(t){return"object"===C(t)&&null!==t&&"type"in t&&"closeup_module"===t.type}).length>0),P=_&&d,Z=(0,r.useMemo)(function(){return Array.from({length:x.length>k?s:u}).reduce(function(t,e,n){return[].concat(M(t),[{height:n%2==0?356:236,key:"skeleton-pin-".concat(n),isSkeleton:!0}])},[])},[x.length,k,s,u]),{_items:(0,r.useMemo)(function(){return P?[].concat(M(x),M(Z)):x},[P,x,Z]),_renderItem:(0,r.useMemo)(function(){return _?function(t){var e=t.itemIdx,n=t.data;return e>=x.length&&n&&"object"===v(n)&&"key"in n&&"height"in n?(0,w.jsx)(O,{data:n},n.key):j(t)}:j},[_,j,x.length])}),em=ed._items,ep=ed._renderItem,ey=tC&&tp,eh=(0,r.useRef)(new Set);(0,r.useEffect)(function(){if(t4){var t={isAuthenticated:tE,isDesktop:"desktop"===tR,handlerId:tX,experimentalMasonryGroup:ea||"unknown",overlapCalculationAndLoggingGroup:t6||"unknown",visualSearchSTLexperiment:t7?"true":"false",browserName:tZ,platform:tL,stage:tT||"unknown"},e=1e3;if(null!=t6&&t6.startsWith("enabled_")){var n=t6.split("enabled_")[1];n&&(e=parseInt(n,10))}var r=setTimeout(function(){requestAnimationFrame(function(){var e=Array.from(null!=(m=null==(p=es.current)?void 0:p.querySelectorAll("[data-grid-item-idx]"))?m:[]);if(0!==e.length){for(var n=e.map(function(t){var e=t.getAttribute("data-grid-item-idx");return{rect:t.getBoundingClientRect(),itemIdx:e}}),r=0,o=0,i=0,a=0,c=0,u=0,l=0;l<n.length;l+=1)for(var s=null==(y=n[l])?void 0:y.rect,f=null==(h=n[l])?void 0:h.itemIdx,d=l+1;d<n.length;d+=1){var m,p,y,h,b,v,g=null==(b=n[d])?void 0:b.rect,x=null==(v=n[d])?void 0:v.itemIdx;if(s&&g&&f&&x){var S=[f,x].sort().join("|");if(!eh.current.has(S)&&s.right>=g.left&&s.left<=g.right&&s.bottom>=g.top&&s.top<=g.bottom&&s.height>0&&g.height>0){eh.current.add(S),r+=1;var w=Math.max(0,Math.min(s.right,g.right)-Math.max(s.left,g.left))*Math.max(0,Math.min(s.bottom,g.bottom)-Math.max(s.top,g.top));w>8e4?u+=1:w>4e4?c+=1:w>1e4?a+=1:w>5e3?i+=1:w>2500&&(o+=1)}}}r>0&&(0,z.QX)("webapp.masonry.pinOverlapHits",r,{tags:t}),o>0&&(0,z.QX)("webapp.masonry.pinOverlap.AreaPx.over2500",o,{tags:t}),i>0&&(0,z.QX)("webapp.masonry.pinOverlap.AreaPx.over5000",i,{tags:t}),a>0&&(0,z.QX)("webapp.masonry.pinOverlap.AreaPx.over10000",a,{tags:t}),c>0&&(0,z.QX)("webapp.masonry.pinOverlap.AreaPx.over40000",c,{tags:t}),u>0&&(0,z.QX)("webapp.masonry.pinOverlap.AreaPx.over80000",u,{tags:t})}})},e);return function(){clearTimeout(r)}}},[tZ,tR,ea,tE,t4,tX,tL,t6,tT,t7]);var eb=(0,i.Z)(),ev=(0,r.useCallback)(function(t){tg&&(tg.current=t)},[tg]);return(0,w.jsxs)(r.Fragment,{children:[tC&&!t8.current&&(0,w.jsx)(o.xu,{"aria-live":"polite",display:"visuallyHidden",children:ey?tP:tI}),(0,w.jsx)("div",{ref:es,"aria-busy":tC?!!ey:void 0,className:"masonryContainer","data-test-id":"masonry-container",id:tm,style:tB?{padding:"0 ".concat(tK/2,"px")}:void 0,children:(0,w.jsxs)("div",{className:er,children:[tV&&t8.current?(0,w.jsx)(S.Z,{"data-test-id":"masonry-ssr-styles",unsafeCSS:en}):null,(0,w.jsx)(o.xu,{"data-test-id":"max-width-container",marginBottom:0,marginEnd:"auto",marginStart:"auto",marginTop:0,maxWidth:t.maxColumns?t1*t.maxColumns:void 0,children:ei?(0,w.jsx)(o.GX,{ref:eb?ev:function(t){tg&&(tg.current=t)},_dynamicHeights:!0,_getResponsiveModuleConfigForSecondItem:tO,_logTwoColWhitespace:ef,_measureAll:ec,align:tf,columnWidth:tJ,getColumnSpanConfig:tk,gutterWidth:tK,items:em,layout:tq?tQ:null!=tb?tb:"basic",loadItems:tv,measurementStore:t2,minCols:t0,renderItem:ep,scrollContainer:t3,virtualBufferFactor:.3,virtualize:t_}):(0,w.jsx)(o.Rk,{ref:eb?ev:function(t){tg&&(tg.current=t)},_dynamicHeights:!0,_fluidResize:!0,_getResponsiveModuleConfigForSecondItem:tO,_logTwoColWhitespace:ef,align:tf,columnWidth:tJ,getColumnSpanConfig:tk,gutterWidth:tK,items:em,layout:tq?tQ:null!=tb?tb:"basic",loadItems:tv,measurementStore:t2,minCols:t0,renderItem:ep,scrollContainer:t3,virtualBufferFactor:.3,virtualize:t_})})]})})]})}},128608:function(t,e,n){n.d(e,{Z:function(){return r}});function r(t,e){var n=0,r=!1,o=-1;return t.forEach(function(t,i){var a,c,u,l,s,f,d,m,p,y,h,b,v,g,x=t.x,S=t.y,w=t.h,j=t.w,_=(a={x:void 0===x?0:x,y:void 0===S?0:S,h:void 0===w?0:w,w:void 0===j?0:j},c=e.x,u=e.y,l=e.w,s=e.h,f=a.x,d=a.y,m=a.w,p=a.h,y=Math.max(c,f),h=Math.min(c+l,f+m),b=Math.max(u,d),v=Math.min(u+s,d+p),(g=y<h&&b<v?(h-y)*(v-b):0)/(l*s+m*p-g));_>=.9&&_>n&&(n=_,r=!0,o=i)}),{isCropAreaOnDotArea:r,indexToHide:o}}},246427:function(t,e,n){n.d(e,{Z:function(){return r}});function r(t){var e=t.cropArea,n=e.x,r=e.y,o=e.w,i=e.h,a=t.scaledWidth,c=t.scaledHeight;return{x:n/a,y:r/c,w:o/a,h:i/c}}},391746:function(t,e,n){n.d(e,{Z:function(){return m}});var r=n(387784),o=n(302407),i=n(20256),a=n(501010),c=n(674610),u=n(312321),l=n(680811);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach(function(e){var r,o;r=e,o=n[e],(r=function(t){var e=function(t,e){if("object"!=s(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=s(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==s(e)?e:e+""}(r))in t?Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function m(t){var e=t.imageHeight,n=t.imageUrl,s=t.imageWidth,f=t.isHovered,m=t.isPinLevelCrop,p=t.isSelected,y=t.maskHeight,h=t.maskId,b=t.maskUrl,v=t.maskWidth,g=t.maskX,x=t.maskY,S=(0,(0,a.Z)().checkExperiment)("web_cropper_object_selection").anyEnabled,w=(0,r.useRef)(null),j=S?f||p:f,_=m&&f?1.2:1,k=(0,u.Z)({maskUrl:b,maskWidth:v,maskHeight:y,maskId:h,kind:"overlay"}),O=k.svgElement,C=k.maskStyle;return(0,l.jsx)(o.Z,{appear:p,classNames:c.We,in:j,nodeRef:w,timeout:{appear:c.VI,enter:c.eZ,exit:c.eZ},children:(0,l.jsxs)(i.xu,{ref:w,dangerouslySetInlineStyle:{__style:d(d({left:g,top:x},C),{},{pointerEvents:"none",filter:"brightness(".concat(_,")")})},height:y,opacity:0,overflow:"hidden",position:"absolute",width:v,children:[O,(0,l.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{left:-g,top:-x}},height:e,position:"absolute",width:s,children:(0,l.jsx)(i.Ee,{alt:"cutout-overlay-image",color:"transparent",fit:"cover",naturalHeight:e,naturalWidth:s,src:n})})]})})}},979173:function(t,e,n){n.d(e,{Z:function(){return b},I:function(){return h}});var r=n(387784),o=n(653551),i=n(20256),a=n(230201),c=n(391746);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach(function(e){var r,o;r=e,o=n[e],(r=function(t){var e=function(t,e){if("object"!=u(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=u(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==u(e)?e:e+""}(r))in t?Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var f=function(t,e,n){for(var r=0,o=0;o<t.length-1;o+=1){var i=t[o],a=t[o+1];if(i&&a){var c=(a.x-i.x)*e,u=(a.y-i.y)*n;r+=Math.sqrt(c*c+u*u)}}if(t.length>0){var l=t[0],s=t[t.length-1];if(l&&s){var f=(l.x-s.x)*e,d=(l.y-s.y)*n;r+=Math.sqrt(f*f+d*d)}}return r};function d(t){var e=t.contour,n=t.context,r=t.contourXRatio,o=t.contourYRatio;n.beginPath(),e.points.forEach(function(t,e){if(t){var i=t.x*r,a=t.y*o;0===e?n.moveTo(i,a):n.lineTo(i,a)}})}var m=n(680811);function p(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return y(t,e);var n=({}).toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(t,e):void 0}}(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var h="stela-cutout";function b(t){var e=t.auxData,n=t.bitmapData,u=t.hasAnimatedCutoutsOnLand,l=t.hasLoggedRender,y=t.hoveredCutoutIndex,b=t.index,v=t.isPinLevelCrop,g=t.pinImageHovered,x=t.pinImageHeight,S=t.pinImageUrl,w=t.pinImageWidth,j=t.selectedCutoutIndex,_=t.setHasAnimatedCutoutsOnLand,k=t.setHasLoggedRender,O=t.viewParameter,C=t.viewType,M=(0,a.u)().logContextEvent,P=(0,o.TH)(),I=(0,r.useRef)(null),R=(0,r.useRef)(null),A=(0,r.useRef)(null),E=p((0,r.useState)(0),2),z=E[0],W=E[1],T=p((0,r.useState)(!1),2),Z=T[0],L=T[1],D=p((0,r.useState)(0),2),H=D[0],F=D[1],X=p((0,r.useState)(!1),2),G=X[0],B=X[1],U=P.pathname.includes("visual-search"),Y=n.contours,N=n.contourXRatio,V=n.contourYRatio,q=n.id,$=n.isHidden,Q=n.maskHeightRatio,J=n.maskUrl,K=n.maskWidthRatio,tt=n.maskXRatio,te=n.maskYRatio,tn=tt*w,tr=te*x,to=K*w,ti=Q*x,ta=y===b,tc=j===b,tu=Y&&Y.length>0;(0,r.useEffect)(function(){l||(M({event_type:120,element:14154,view_parameter:O,view_type:C,aux_data:e}),null==k||k(!0))},[e,l,M,k,O,C]),(0,r.useEffect)(function(){I.current&&(I.current.width=to,I.current.height=ti,R.current=new(window.OffscreenCanvas||window.HTMLCanvasElement)(to,ti))},[to,ti]);var tl=(0,r.useCallback)(function(){B(!0)},[]);return(0,r.useEffect)(function(){var t=I.current;return null==t||t.addEventListener("transitionend",tl),function(){null==t||t.removeEventListener("transitionend",tl)}}),(0,r.useEffect)(function(){if(I.current&&R.current&&tu&&N&&V){var t=I.current.getContext("2d");if(u){null==t||t.clearRect(0,0,I.current.width,I.current.height);return}return(!G||g||$&&ta)&&(A.current=requestAnimationFrame(function(){if(I.current&&R.current){var e=R.current.getContext("2d");t&&e&&(!function(t){var e=t.contours,n=t.context,r=t.hasAnimatedCutoutsOnLand,o=t.hoveredCutoutIndex,i=t.index,a=t.isHidden,c=t.contourXRatio,u=t.contourYRatio,l=t.setTraceProgress,m=t.setHasAnimatedCutoutsOnLand,p=t.style,y=t.traceProgress,h=t.selectedCutoutIndex;if(n.clearRect(0,0,n.canvas.width,n.canvas.height),e&&0!==e.length&&(h!==o||o!==i)&&h!==i){var b={trace:{strokeStyle:"#fff",lineWidth:2},outline:{strokeStyle:"#fff",lineWidth:3}},v=a&&o===i,g=!a||v;if("trace"===p&&void 0!==y){var x=y,S=e[0].points.length;if(r){if(v||o===i){l(x=(x+900/f(e[0].points,c,u)*3.2/1e3)%1);var w=Math.floor(.33*S),j=Math.floor(S*x),_=(j-w+S)%S;e.map(function(t){return s(s({},t),{},{points:_<j?t.points.slice(_,j):t.points.slice(_).concat(t.points.slice(0,j))})}).forEach(function(t){t.points.length>1&&(n.strokeStyle=b[p].strokeStyle,d({contour:t,context:n,contourXRatio:c,contourYRatio:u}),g&&(n.lineWidth=b[p].lineWidth,n.stroke()))})}}else{if(l(x+=x<=1?.0032:.009600000000000001),x>=2){l(1),m(!0);return}var k,O,C=Math.floor(.33*S);x<=1?O=((k=Math.floor(S*x))-C+S)%S:(k=S,O=Math.floor(S-C+C*(x-1))),e.map(function(t){var e=[];return e=O<k?t.points.slice(O,k):t.points.slice(O).concat(t.points.slice(0,k)),s(s({},t),{},{points:e})}).forEach(function(t){t.points.length>1&&(n.strokeStyle=b[p].strokeStyle,d({contour:t,context:n,contourXRatio:c,contourYRatio:u}),g&&(n.lineWidth=b[p].lineWidth,n.stroke()))})}}else e.forEach(function(t){d({contour:t,context:n,contourXRatio:c,contourYRatio:u}),g&&(n.strokeStyle=b[p].strokeStyle,n.lineWidth=b[p].lineWidth,n.stroke(),o===i&&(n.save(),n.fillStyle="rgba(255, 255, 255, 0.25)",n.fill(),n.restore()))})}}({contours:Y,context:e,contourXRatio:N,contourYRatio:V,index:b,isHidden:$,hoveredCutoutIndex:y,opacity:z,setTraceProgress:F,hasAnimatedCutoutsOnLand:u,setHasAnimatedCutoutsOnLand:_,style:"trace",traceProgress:H,selectedCutoutIndex:j}),t.clearRect(0,0,I.current.width,I.current.height),t.drawImage(R.current,0,0))}})),function(){A.current&&(cancelAnimationFrame(A.current),A.current=null)}}},[N,V,Y,u,tu,y,b,G,$,ta,z,g,j,_,H]),(0,r.useEffect)(function(){if(g)L(!0),W(1);else if(Z)W(0);else{W(1);var t=setTimeout(function(){L(!1),W(0)},3e3);return function(){return clearTimeout(t)}}},[g,Z,W]),(0,m.jsxs)(i.xu,{children:[(0,m.jsx)(c.Z,{imageHeight:x,imageUrl:S,imageWidth:w,isHovered:ta,isPinLevelCrop:v,isSelected:tc,maskHeight:ti,maskId:q,maskUrl:J,maskWidth:to,maskX:tn,maskY:tr}),tu&&(0,m.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{top:tr,left:tn}},height:ti,position:"absolute",width:to,children:(0,m.jsx)("canvas",{ref:I,"data-test-id":"cutout-item",id:h,style:{opacity:U||g?1:z,transition:g||Z||U?"none":"opacity 2s linear 1s"}})})]})}},674610:function(t,e,n){n.d(e,{Ii:function(){return r},VI:function(){return i},We:function(){return o},eZ:function(){return a},iF:function(){return c}});var r="stela-cutout",o="cutout-fade",i=2e3,a=300,c="\n  .".concat(o,"-appear {\n    opacity: 0;\n  }\n  .").concat(o,"-appear-active {\n    opacity: 1;\n    transition: opacity ").concat(i,"ms;\n  }\n  .").concat(o,"-appear-done {\n    opacity: 1;\n  }\n\n  .").concat(o,"-enter {\n    opacity: 0;\n  }\n  .").concat(o,"-enter-active {\n    opacity: 1;\n    transition: opacity ").concat(a,"ms;\n  }\n  .").concat(o,"-enter-done {\n    opacity: 1;\n  }\n\n  .").concat(o,"-exit {\n    opacity: 1;\n  }\n  .").concat(o,"-exit-active {\n    opacity: 0;\n    transition: opacity ").concat(a,"ms;\n  }\n  .").concat(o,"-exit-done {\n    opacity: 0;\n  }\n")},312321:function(t,e,n){n.d(e,{Z:function(){return o}});var r=n(680811);function o(t){var e=t.blurIntensity,n=t.debugMode,o=t.insetIntensity,i=t.kind,a=t.maskHeight,c=t.maskId,u=t.maskUrl,l=t.maskWidth,s=t.maxBlurLength,f="".concat(i,"-").concat(c),d="insetBlurFilter-".concat(f),m="originalMask-".concat(f),p="featheredMask-".concat(f),y=Math.min(void 0===s?100:s,Math.round(Math.min(l,a)))*(void 0===e?.1:e);return{svgElement:(0,r.jsxs)("svg",{"data-gestalt-valid-html":"Image",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none"},children:[(0,r.jsxs)("defs",{children:[(0,r.jsxs)("filter",{id:d,children:[(0,r.jsx)("feGaussianBlur",{edgeMode:"none",stdDeviation:y}),(0,r.jsx)("feComponentTransfer",{children:(0,r.jsx)("feFuncA",{amplitude:"1",exponent:void 0===o?2:o,offset:"0",type:"gamma"})})]}),(0,r.jsx)("mask",{id:m,children:(0,r.jsx)("image",{height:a,href:u,id:"".concat(m,"-image"),width:l})}),(0,r.jsx)("use",{href:"#".concat(m,"-image"),id:"".concat(m,"-white"),mask:"url(#".concat(m,")")}),(0,r.jsx)("mask",{id:p,children:(0,r.jsx)("use",{filter:"url(#".concat(d,")"),href:"#".concat(m,"-white"),mask:"url(#".concat(m,")")})})]}),void 0!==n&&n&&(0,r.jsx)("rect",{fill:"green",height:a,mask:"url(#".concat(p,")"),width:l,x:"0",y:"0"})]}),maskStyle:{mask:"url(#".concat(p,")")}}}},198861:function(t,e,n){n.d(e,{Z:function(){return u}});var r=n(387784),o=n(501010);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach(function(e){var r,o;r=e,o=n[e],(r=function(t){var e=function(t,e){if("object"!=i(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=i(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==i(e)?e:e+""}(r))in t?Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function u(){return(0,r.useMemo)(function(){var t=(0,(0,o.Z)().checkExperiment)("dtn_exp6_uve4a").group,e={client:"visual_cutout",cleanup_masks:!0};return"enabled"===t?c(c({},e),{},{detection_model:"dtn_exp6_yolov8"}):"enabled_dtn_exp5_skip_gss"===t?c(c({},e),{},{use_gss:!1,write_to_galaxy:!1}):e},[])}},225580:function(t,e,n){function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=({}).toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}n.d(e,{Bt:function(){return a},Fk:function(){return l},Of:function(){return i},R7:function(){return c}});var i=function(t,e,n){var r=n.maskX,o=n.maskY,i=n.maskWidth,a=n.maskHeight;return t>=r&&t<=r+i&&e>=o&&e<=o+a},a=function(t,e,n){if(e<0||n<0||e>=t.canvas.width||n>=t.canvas.height)return!1;try{var r=t.getImageData(e,n,1,1).data[0];return void 0!==r&&r>0}catch(t){return!1}},c=function(t){var e=t.id,n=t.mask_image,o=t.mask_bounds;if(!e||!n||!o||2!==o.length)return!1;var i=r(o,2),a=i[0],c=i[1];if(!a||!c||2!==a.length||2!==c.length)return!1;var u=r(a,2),l=u[0],s=u[1],f=r(c,2);return[l,s,f[0],f[1]].every(function(t){return"number"==typeof t&&!Number.isNaN(t)})},u=function(t){try{var e=atob(t),n=Uint8Array.from(e,function(t){return t.charCodeAt(0)}),r=new Blob([n],{type:"image/png"});return URL.createObjectURL(r)}catch(t){return null}},l=function(t,e,n){if(!c(t))return null;var o=t.id,i=t.mask_image,a=t.mask_bounds,l=t.is_hidden,s=r(a[0],2),f=s[0],d=s[1],m=r(a[1],2),p=m[0],y=m[1],h=u(i);return h?{maskData:{id:o,isHidden:!!l,maskHeight:y*n,maskHeightRatio:y,maskUrl:h,maskWidth:p*e,maskWidthRatio:p,maskX:f*e,maskXRatio:f,maskY:d*n,maskYRatio:d},maskUrl:h}:null}},229793:function(t,e,n){n.d(e,{Z:function(){return a}});var r=n(387784),o=n(758714);function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function a(t){return(0,r.useMemo)(function(){var e,n=function(t){if(Array.isArray(t))return t}(e=(0,o.Rn)({hexColor:t||"#FFFFFF",saturationMultiplier:3,brightnessMultiplier:1.6,minSaturationClamp:.15,mixVal:.3,minBrightnessClamp:0}))||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,l=!1;try{for(i=(n=n.call(t)).next;!(u=(r=i.call(n)).done)&&(c.push(r.value),2!==c.length);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,2)||function(t,e){if(t){if("string"==typeof t)return i(t,2);var n=({}).toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,2):void 0}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),r=n[0],a=n[1],c="rgba(".concat(a[0],", ").concat(a[1],", ").concat(a[2],", 0.8)"),u="rgba(".concat(r[0],", ").concat(r[1],", ").concat(r[2],", 0.8)"),l=(0,o.e3)((0,o.rk)((0,o.t7)("rgba(117, 117, 112, 0.2)"),(0,o.t7)(c))),s=(0,o.e3)((0,o.rk)((0,o.t7)("rgba(117, 117, 112, 0.4)"),(0,o.t7)(c)));return{defaultColor:c,selectedColor:u,hoveredColor:l,pressedColor:s}},[t])}},854929:function(t,e,n){n.d(e,{Z:function(){return d}});var r=n(653551),o=n(20256),i=n(230201),a=n(400962),c=n(24246),u=n(854897),l=n(902123),s=n(520803),f=n(680811);function d(t){var e=t.defaultPillColor,n=t.hoveredPillColor,d=t.isLens,m=t.pressedPillColor,p=t.viewParameter,y=t.viewType,h=(0,c.Z)(),b=(0,r.s0)(),v=(0,s.Z)(),g=(0,l.Z)(),x=g.active,S=g.focused,w=g.hovered,j=g.onBlur,_=g.onFocus,k=g.onMouseDown,O=g.onMouseEnter,C=g.onMouseLeave,M=g.onMouseUp,P=(0,u.Z)(v.params.id||"").pinId,I=(0,a.ou)().previous,R=(0,i.u)().logContextEvent;return(0,f.jsx)(o.xu,{"data-test-id":"go-back-button",children:(0,f.jsx)(o.iP,{onBlur:j,onFocus:_,onMouseDown:k,onMouseEnter:O,onMouseLeave:C,onMouseUp:M,onTap:function(){return(R({event_type:101,view_type:y,element:34,view_parameter:p}),d)?void b("/",{replace:!0}):0===I.length?void b(P?"/pin/".concat(P,"/"):"/",{replace:!0}):void b(-1)},tapStyle:"compress",children:(0,f.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{background:x?m:S||w?n:e,backdropFilter:"blur(80px)"}},padding:3,rounding:4,children:(0,f.jsx)(o.JO,{accessibilityLabel:h._('Go back', 'imageSearch.cancelButton', 'Cancel button for going back to the Pin page'),color:"default",icon:"cancel",size:24})})})})}},911953:function(t,e,n){n.d(e,{Z:function(){return i}});var r=n(387784),o=n(730448);function i(t){var e=t.scrollContainerRef,n=(0,r.useCallback)(function(t){var n=e.current,r=t.buttons,o=t.clientY;if(n&&1===r&&o){var i=n.getBoundingClientRect(),a=i.top,c=i.bottom,u=window.innerHeight-a,l=n.scrollHeight,s=Math.max(0,a+20-o),f=Math.max(0,o-(c-20));if(s>0){var d=Math.min(s,100);n.scrollTop-=d}else if(f>0&&!(l<=u)){var m=Math.min(f,100);n.scrollTop+=m}}},[e]);return{scrollCropperInView:(0,r.useMemo)(function(){return(0,o.Z)(n,16)},[n])}}}}]);