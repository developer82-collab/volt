"use strict";(self.legacyJsonp=self.legacyJsonp||[]).push([["96083"],{315318:function(e,t,n){var r=n(387784),o=n(68213),i=n(676879),a=n(524476),s=n(975130),l=n(349325),c=n(767415);t.Z=function(e){var t=e.checkExperiment,n=e.advertiserId,d=t("aid_exp_web_lead_ads_ocpm").anyEnabled,_=(0,i.Z)({url:"/ads/v4/advertisers/{advertiser_id}/conversion_tags/ocpm_eligible",params:{advertiser_id:n,include_shared_tags:!0}}),u=_.data,m=_.error,v=_.isFetching,p=(0,i.Z)({url:"/ads/v4/advertisers/{advertiser_id}/conversion_tags",params:{advertiser_id:n,include_shared_tags:!0}}),f=p.data,g=p.error;m&&(0,c.nP)("sterling.create_flow.load_ocpm_eligible_tags_ConvertAIDPTAGToPTAGID",{tags:{advertiserId:n}}),g&&(0,c.nP)("sterling.create_flow.load_advertiser_tags",{tags:{advertiserId:n}});var h=new Date(Date.now()),P=(0,o.Z)(h,60).toISOString().split("T")[0],b=(0,l.E)({hourly:!1,startDate:P,endDate:h.toISOString().split("T")[0],dedupeStage:s.Oh.POST,separateClonedEvents:!1},(0,r.useCallback)(function(e){return(0,a.PZ)(e,n,d)},[n,d]),void 0,void 0,n),A=b.mappedData,y=b.fetchState;return{sharedOcpmEligibleTags:(0,r.useMemo)(function(){return(0,a.ER)({advertiserId:n,OCPMConversionTags:u,conversionTags:f})},[u,f,n]),OCPMConversionTags:u,conversionTags:f,ocpmFetchedState:y,ocpmMappedData:A,error:m||g||null,isFetchingOCPMEligibleTags:v}}},524476:function(e,t,n){n.d(t,{ER:function(){return g},Hw:function(){return z},LN:function(){return y},PZ:function(){return P},Vk:function(){return E},iK:function(){return I},ni:function(){return T},qI:function(){return b},s9:function(){return v}});var r=n(234643),o=n(660947),i=n(664314),a=n(767415);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){d(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function d(e,t,n){var r;return(r=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==s(r)?r:r+"")in e)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||u(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){if(e){if("string"==typeof e)return m(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var v={PAGE_VISIT:0,SIGNUP:1,CHECKOUT:2,CUSTOM:3,VIEW_CATEGORY:4,SEARCH:5,ADD_TO_CART:6,WATCH_VIDEO:7,LEAD:8,APP_INSTALL:9,INITIALIZED:10,UNKNOWN:-1},p=["CHECKOUT","ADD_TO_CART"],f=["ADD_TO_CART","CHECKOUT","LEAD","SIGNUP"],g=function(e){var t=e.advertiserId,n=e.OCPMConversionTags,r=e.conversionTags,i=n?Object.keys(n):[],a=1===i.length&&"0"===i[0];a||(i=i.filter(function(e){return"0"!==e}));var s=r?r.filter(function(e){return e.status===o.Hu.ACTIVE&&(e.leader_tag_enabled||null===e.leader_tag_enabled)}):[],l=i.reduce(function(e,r){return(a?n[r]||[]:[].concat(_(n[r]||[]),_(n["0"]||[]))).forEach(function(n){var o,i=n.advertiser_id===n.conversion_tag_id&&(null==(o=s.find(function(e){return e.advertiser_id===t}))?void 0:o.id)||void 0,a=i||r;e[a]||(e[a]=[]),e[a].push({advertiserId:n.advertiser_id,conversionEvent:n.conversion_event,conversionTagId:i||n.conversion_tag_id,createdTime:n.created_time})}),e},{});return Object.keys(l).forEach(function(e){var t=new Map;l[e]=l[e].filter(function(e){var n="".concat(e.conversionEvent,"-").concat(e.conversionTagId);return!t.has(n)&&(t.set(n,!0),!0)})}),l},h=function(e){var t=new Map;return e.filter(function(e){var n="".concat(e.conversionTagId,"-").concat(e.conversionEvent);return!t.has(n)&&(t.set(n,!0),!0)})},P=function(e,t,n){var r={};try{var o={createdTime:0,advertiserId:t,conversionTagId:"0",conversionEvent:"LEAD"},i=e.timeAggRows,s=[];i?(i.forEach(function(e){if(["TAG"].includes(e.ingestionSource)){var n,o=null==(n=e.rows)?void 0:n.conversionTypeMap,i=e.tagIdStr||"",a=null==o?void 0:o[v.ADD_TO_CART.toString()],l=null==o?void 0:o[v.CHECKOUT.toString()],u=null==o?void 0:o[v.SIGNUP.toString()],m=null==o?void 0:o[v.LEAD.toString()];i&&(r=c(c({},r),a||u||l||m?d({},i,[].concat(_(r[i]||[]),_(a?[{createdTime:a.lastFiredTimeNs||0,advertiserId:t,conversionTagId:i,conversionEvent:"ADD_TO_CART"}]:[]),_(l?[{createdTime:l.lastFiredTimeNs||0,advertiserId:t,conversionTagId:i,conversionEvent:"CHECKOUT"}]:[]),_(u?[{createdTime:u.lastFiredTimeNs||0,advertiserId:t,conversionTagId:i,conversionEvent:"SIGNUP"}]:[]),_(m?[{createdTime:m.lastFiredTimeNs||0,advertiserId:t,conversionTagId:i,conversionEvent:"LEAD"}]:[]))):{}))}else if(["CONVERSIONS_API","FILE_UPLOAD","MMP"].includes(e.ingestionSource)){var p,f=null==(p=e.rows)?void 0:p.conversionTypeMap,g=null==f?void 0:f[v.ADD_TO_CART.toString()],P=null==f?void 0:f[v.CHECKOUT.toString()],b=null==f?void 0:f[v.SIGNUP.toString()],A=null==f?void 0:f[v.LEAD.toString()];s=h([].concat(_(s),_(g?[{createdTime:g.lastFiredTimeNs||0,advertiserId:t,conversionTagId:"0",conversionEvent:"ADD_TO_CART"}]:[]),_(P?[{createdTime:P.lastFiredTimeNs||0,advertiserId:t,conversionTagId:"0",conversionEvent:"CHECKOUT"}]:[]),_(b?[{createdTime:b.lastFiredTimeNs||0,advertiserId:t,conversionTagId:"0",conversionEvent:"SIGNUP"}]:[]),_(A?[{createdTime:A.lastFiredTimeNs||0,advertiserId:t,conversionTagId:"0",conversionEvent:"LEAD"}]:[])))}}),n&&!s.find(function(e){return"LEAD"===e.conversionEvent})&&(s=[].concat(_(s),[o])),Object.keys(r).length>0&&s.length>0?Object.keys(r).forEach(function(e){r[e]=[].concat(_(r[e]),_(s))}):s.length>0&&(r=d({},"0",s))):n&&(r=d({},"0",[o]))}catch(e){return(0,a.nP)("createFlow.ui.conversions.formatFail",{sampleRate:1}),{}}return r},b=function(e,t,n,r,o){return!!o||!!t&&(n||r?(!r||!!t[r])&&Object.keys(t).includes(n===e?"0":n):t&&Object.keys(t).length>0)},A=function(e){var t=e.tagData,n=e.ocpmTags,r=e.advertiserId,i=e.selectedTagId;if(!t)return!1;var a=t.id||"",s=t.status!==o.Hu.ARCHIVED&&(a in n||r in n),l=t.leader_tag_enabled||null===t.leader_tag_enabled;return s&&l||t.id===i},y=function(e){var t=e.tags,n=e.ocpmTags,r=e.advertiserId,o=e.selectedTagId,i=e.isUsingDelayedConversionData,a=e.i18n;if(!t||!n)return[];var s=t.filter(function(e){return A({tagData:e,ocpmTags:n,advertiserId:r,selectedTagId:o})&&!!e.id&&!!n[e.id]});if(i){var l=new Set(s.map(function(e){return e.id})),c=Object.keys(n).filter(function(e){return!l.has(e)}).map(function(e){return{id:e,name:a._('Pinterest Tag', '[m10n]createFlow.conversions.tag.tagName', 'Default name given to a Pinterest tag that does not have a name')}});c.length>0&&s.push.apply(s,_(c))}return s},E=function(e,t){if(!e)return!1;for(var n=0,r=Object.values(e);n<r.length;n++){var o,i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(r[n]);try{for(i.s();!(o=i.n()).done;){var a=o.value;if("0"===a.conversionTagId||a.conversionTagId===t)return!0}}catch(e){i.e(e)}finally{i.f()}}return!1},T=function(e){var t=e.tagId,n=e.ocpmTags,r=e.advertiserId,o=e.isRoasOptimized,a=e.isPerformancePlusCampaign,s=e.objectiveType;if(!n)return[];var l=1===Object.keys(n).length&&("0"===Object.keys(n)[0]||Object.keys(n)[0]===r),c=n[l?Object.keys(n)[0]:t]||[];return o?c=c.filter(function(e){return"CHECKOUT"===e.conversionEvent}):s===i.m.CATALOG_SALES&&(c=c.filter(function(e){var t=e.conversionEvent;return p.includes(null!=t?t:"")})),a&&(c=c.filter(function(e){var t=e.conversionEvent;return f.includes(null!=t?t:"")})),_(new Set(c.map(function(e){return e.conversionEvent}))).filter(Boolean)},I=function(e){var t=e.tagEvent,n=e.isUsingDelayedConversionData,r=e.ocpmTags,o=e.advertiserId;if(!e.experimentsClient.checkExperiment("aid_exp_remove_conversion_tag_id_if_no_conversion_tag_id").anyEnabled||!n)return!1;var i=Object.values(null!=r?r:{}),a=(null==i?void 0:i.length)===1&&i[0]?i[0].filter(function(e){return e.conversionEvent===t}):null;return!(null!=a&&a.some(function(e){return e.conversionTagId&&"0"!==e.conversionTagId&&e.conversionTagId!==o}))},z=[{conversionEvent:r.ZP.ADD_TO_CART,isRoasEligible:!1,isCatalogSalesEligible:!0},{conversionEvent:r.ZP.CHECKOUT,isRoasEligible:!0,isCatalogSalesEligible:!0},{conversionEvent:r.ZP.SIGNUP,isRoasEligible:!1,isCatalogSalesEligible:!1},{conversionEvent:r.ZP.LEAD,isRoasEligible:!1,isCatalogSalesEligible:!1}]},391757:function(e,t,n){n.d(t,{Jl:function(){return v},KN:function(){return u},_j:function(){return _},ft:function(){return m},sf:function(){return l}});var r=n(216975),o=n(141530);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var l=["bd","click_id","country","ct","em","external_id","fn","ge","hashed_maid","ip","ln","ph","st","ua","zp"],c=function(e){return{bd:{label:e._('Birthday', '[m10n] Conversions.EventIdCoverageKey.bd', 'Human readable event id coverage key for bd'),tooltip:e._('The user\'s date of birthday, given as year, month, and day.', '[m10n] Conversions.EventIdCoverageKey.tooltip.bd', 'Human readable event id coverage key tooltip for bd')},click_id:{label:e._('Click ID', '[m10n] Conversions.EventIdCoverageKey.click_id', 'Human readable event id coverage key for click_id'),tooltip:e._('The unique identifier stored in _epik cookie on your domain or &epik= query parameter in the URL.', '[m10n] Conversions.EventIdCoverageKey.tooltip.click_id', 'Human readable event id coverage key tooltip for click_id')},country:{label:e._('Country', '[m10n] Conversions.EventIdCoverageKey.country', 'Human readable event id coverage key for country'),tooltip:e._('The user\'s country, in lowercase.', '[m10n] Conversions.EventIdCoverageKey.tooltip.country', 'Human readable event id coverage key tooltip for country')},ct:{label:e._('City', '[m10n] Conversions.EventIdCoverageKey.ct', 'Human readable event id coverage key for ct'),tooltip:e._('The user\'s residency city, in lowercase.', '[m10n] Conversions.EventIdCoverageKey.tooltip.ct', 'Human readable event id coverage key tooltip for ct')},em:{label:e._('Email', '[m10n] Conversions.EventIdCoverageKey.em', 'Human readable event id coverage key for em'),tooltip:e._('A valid email address of the user.', '[m10n] Conversions.EventIdCoverageKey.tooltip.em', 'Human readable event id coverage key tooltip for em')},external_id:{label:e._('External ID', '[m10n] Conversions.EventIdCoverageKey.external_id', 'Human readable event id coverage key for external_id'),tooltip:e._('The unique id from the advertiser that identifies a user in their space, e.g. user id, loyalty id.', '[m10n] Conversions.EventIdCoverageKey.tooltip.external_id', 'Human readable event id coverage key tooltip for external_id')},fn:{label:e._('First name', '[m10n] Conversions.EventIdCoverageKey.fn', 'Human readable event id coverage key for fn'),tooltip:e._('The user\'s first name, in lowercase.', '[m10n] Conversions.EventIdCoverageKey.tooltip.fn', 'Human readable event id coverage key tooltip for fn')},ge:{label:e._('Gender', '[m10n] Conversions.EventIdCoverageKey.ge', 'Human readable event id coverage key for ge'),tooltip:e._('The user\'s gender, in lowercase.', '[m10n] Conversions.EventIdCoverageKey.tooltip.ge', 'Human readable event id coverage key tooltip for ge')},hashed_maid:{label:e._('MAID', '[m10n] Conversions.EventIdCoverageKey.hashed_maid', 'Human readable event id coverage key for hashed_maid'),tooltip:e._('The mobile advertising Identifier which can be user\'s "Google Advertising IDs" (GAIDs) or "Apple\'s Identifier for Advertisers" (IDFAs).', '[m10n] Conversions.EventIdCoverageKey.tooltip.hashed_maid', 'Human readable event id coverage key tooltip for hashed_maid')},ip:{label:e._('IP address', '[m10n] Conversions.EventIdCoverageKey.ip', 'Human readable event id coverage key for ip'),tooltip:e._('The user\u2019s IP address of the browser which can be either in IPv4 or IPv6 format.', '[m10n] Conversions.EventIdCoverageKey.tooltip.ip', 'Human readable event id coverage key tooltip for ip')},ln:{label:e._('Last name', '[m10n] Conversions.EventIdCoverageKey.ln', 'Human readable event id coverage key for ln'),tooltip:e._('The user\'s last name, in lowercase.', '[m10n] Conversions.EventIdCoverageKey.tooltip.ln', 'Human readable event id coverage key tooltip for ln')},ph:{label:e._('Phone number', '[m10n] Conversions.EventIdCoverageKey.ph', 'Human readable event id coverage key for ph'),tooltip:e._('The user\'s phone numbers, only digits with country code, area code, and number.', '[m10n] Conversions.EventIdCoverageKey.tooltip.ph', 'Human readable event id coverage key tooltip for ph')},st:{label:e._('State', '[m10n] Conversions.EventIdCoverageKey.st', 'Human readable event id coverage key for st'),tooltip:e._('The user\'s residency state, in lowercase.', '[m10n] Conversions.EventIdCoverageKey.tooltip.st', 'Human readable event id coverage key tooltip for st')},ua:{label:e._('User agent', '[m10n] Conversions.EventIdCoverageKey.ua', 'Human readable event id coverage key for ua'),tooltip:e._('The user\u2019s agent string of the user\'s web browser.', '[m10n] Conversions.EventIdCoverageKey.tooltip.ua', 'Human readable event id coverage key tooltip for ua')},zp:{label:e._('Zipcode', '[m10n] Conversions.EventIdCoverageKey.zp', 'Human readable event id coverage key for zp'),tooltip:e._('The user\'s residency zip code, only digits.', '[m10n] Conversions.EventIdCoverageKey.tooltip.zp', 'Human readable event id coverage key tooltip for zp')}}},d=function(e){return s(s({},c(e)),{},{ip_and_ua:{label:(0,r.nk)(e._('{{ ip }} and {{ ua }}', '[m10n] Conversions.EventIdCoverageKey.ip_and_ua', 'Human readable event id coverage key for ip and ua, ip: ip readable key, ua: ua readable key'),{ip:c(e).ip.label,ua:c(e).ua.label}).join(""),tooltip:(0,r.nk)(e._('The user\'s {{ ip }} and {{ ua }}, in lowercase.', '[m10n] Conversions.EventIdCoverageKey.tooltip.ip_and_ua', 'Human readable event id coverage key tooltip for ip and ua, ip: ip readable key, ua: ua readable key'),{ip:c(e).ip.label,ua:c(e).ua.label}).join("")},fn_and_ln:{label:(0,r.nk)(e._('{{ fn }} and {{ ln }}', '[m10n] Conversions.EventIdCoverageKey.fn_and_ln', 'Human readable event id coverage key for fn and ln, fn: fn readable key, ln: ln readable key'),{fn:c(e).fn.label,ln:c(e).ln.label}).join(""),tooltip:(0,r.nk)(e._('The user\'s {{ fn }} and {{ ln }}, in lowercase.', '[m10n] Conversions.EventIdCoverageKey.tooltip.fn_and_ln', 'Human readable event id coverage key tooltip for fn and ln, fn: fn readable key, ln: ln readable key'),{fn:c(e).fn.label,ln:c(e).ln.label}).join("")},em_or_hashed_maid:{label:(0,r.nk)(e._('{{ em }} or {{ maid }}', '[m10n] Conversions.EventIdCoverageKey.em_maid', 'Human readable event id coverage key for em or maid, em: em readable key, maid: maid readable key'),{em:c(e).em.label,maid:c(e).hashed_maid.label}).join(""),tooltip:(0,r.nk)(e._('The user\'s valid {{ em }} or {{ maid }}.', '[m10n] Conversions.EventIdCoverageKey.tooltip.em_maid', 'Human readable event id coverage key tooltip for em or maid, em: em readable key, maid: maid readable key'),{em:c(e).em.label,maid:c(e).hashed_maid.label}).join("")}})},_=function(e,t){return d(e)[(0,o.aD)(t)].label||t},u=function(e,t){return d(e)[(0,o.aD)(t)].tooltip||t},m=function(e,t){switch((0,o.JY)((0,o.aD)(t))){case"High":return e._('High', '[m10n] Conversions.EventIdCoverageKeyPriority.High', 'Priority text high for event id coverage keys');case"Medium":return e._('Medium', '[m10n] Conversions.EventIdCoverageKeyPriority.High', 'Priority text high for event id coverage keys');default:return e._('Low', '[m10n] Conversions.EventIdCoverageKeyPriority.High', 'Priority text high for event id coverage keys')}},v={LOADING:"loading",DONE:"done",ERROR:"error",INACTIVE:"inactive"}},141530:function(e,t,n){n.d(t,{JY:function(){return i},WB:function(){return o},aD:function(){return r},b:function(){return a},vr:function(){return s}});var r=function(e){return({country_coverage:" country",external_id_coverage:"external_id",ge_coverage:"ge",fn_coverage:"fn",ip_and_ua_pct_coverage:"ip_and_ua",fn_and_ln_coverage:"fn_and_ln",db_coverage:"bd",email_or_maid_coverage:"em_or_hashed_maid",click_id_coverage:"click_id",ct_coverage:"ct",ln_coverage:"ln",st_coverage:"st",email_coverage:"em",ip_coverage:"ip",ua_coverage:"ua",maid_coverage:"hashed_maid",zp_coverage:"zp",ph_coverage:"ph"})[e]||e},o=["em","hashed_maid","ip","ua","external_id","click_id"],i=function(e){return["hashed_maid","em","ip","ua","ip_and_ua","em_or_hashed_maid","external_id","click_id"].includes(r(e))?"High":"Low"},a=function(e){switch(e){case"High":return 2;case"Medium":return 1;default:return 0}},s=function(e,t,n){var r,o,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e.advertiser,s=["MANAGED_SMB","UNMANAGED_SMB","RESELLER"].includes(null!=(r=null==a||null==(o=a.segment_metadata)?void 0:o.sales_channel)?r:""),l=i||!!(null!=t&&t.TAG),c=n("m10n_interfaces_capi_gwy_integration_flow").anyEnabled,d=n("m10n_interfaces_enable_capi_connect_smb").anyEnabled;return l&&(c||s&&d)}},349325:function(e,t,n){n.d(t,{E:function(){return m},Z:function(){return v}});var r=n(387784),o=n(478987),i=n(501010),a=n(774838),s=n(676879),l=n(391757),c=n(975130);function d(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t,n,a,u){var m,v=e.hourly,p=e.startDate,f=e.endDate,g=e.ingestionSources,h=e.dedupeStage,P=e.separateClonedEvents,b=e.forceUTC,A=e.queries,y=(0,i.Z)().checkExperiment("aid_exp_cf_event_overview_resource_migration").anyEnabled,E=!!(u&&null!=v&&p&&f&&h&&null!=P),T=E?{url:"/ads/v4/advertisers/{advertiser_id}/conversions/event_overview",params:{advertiser_id:String(u),granularity:v?"HOURLY":"DAILY",start_date:p,end_date:f,event_types:h===c.Oh.POST?[c.Ze.ONLINE,c.Ze.DELAYED]:[c.Ze.PRE_DEDUPE],ingestion_sources:g,timezone:b?"UTC":null!=(m=Intl.DateTimeFormat().resolvedOptions().timeZone)?m:"UTC",separate_cloned_events:P,queries:void 0===A?["EVENT_DATA_KEYS","EVENT_ID_COVERAGE_KEYS"]:A}}:null,I=(0,s.Z)(y?T:null),z=I.data,O=I.error,S=I.isFetching,C=_((0,r.useState)(),2),D=C[0],w=C[1],R=_((0,r.useState)(l.Jl.LOADING),2),k=R[0],N=R[1];(0,r.useEffect)(function(){if(!y&&E){var e,t;(e=regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return N(l.Jl.LOADING),e.prev=1,e.next=4,(0,o.Z)({advertiser_id:String(u),granularity:v?"HOURLY":"DAILY",start_date:p,end_date:f,event_types:h===c.Oh.POST?[c.Ze.ONLINE,c.Ze.DELAYED]:[c.Ze.PRE_DEDUPE],ingestion_sources:g,timezone:b?"UTC":null!=(t=Intl.DateTimeFormat().resolvedOptions().timeZone)?t:"UTC",separate_cloned_events:P,queries:void 0===A?["EVENT_DATA_KEYS","EVENT_ID_COVERAGE_KEYS"]:A});case 4:w(e.sent),N(l.Jl.DONE),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),N(l.Jl.ERROR);case 12:case"end":return e.stop()}},e,null,[[1,9]])}),t=function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){d(i,r,o,a,s,"next",e)}function s(e){d(i,r,o,a,s,"throw",e)}a(void 0)})},function(){return t.apply(this,arguments)})()}},[y,E,u,v,p,f,h,g,b,P,A]);var G=y?z:D,H=(0,r.useMemo)(function(){return G&&t?t(G):null},[G,t]),U=l.Jl.LOADING;return y?S?U=l.Jl.LOADING:O?U=l.Jl.ERROR:z&&(U=l.Jl.DONE):U=k,(0,r.useEffect)(function(){n&&U===l.Jl.DONE&&G&&n()},[n,U,G]),(0,r.useEffect)(function(){a&&U===l.Jl.ERROR&&a()},[a,U]),{data:G,mappedData:H,fetchState:U}}function v(e,t,n,r){var o=e.hourly,i=e.startDate,s=e.endDate,l=e.ingestionSources,c=e.dedupeStage,d=e.separateClonedEvents,_=e.forceUTC,u=e.queries,v=(0,a.B)().advertiser;return m({hourly:o,startDate:i,endDate:s,ingestionSources:l,dedupeStage:c,separateClonedEvents:d,forceUTC:_,queries:u},t,n,r,null==v?void 0:v.id)}},890893:function(e,t,n){n.d(t,{R:function(){return i},i:function(){return o}});var r=n(856853),o=["ADD_TO_CART","CHECKOUT","LEAD","SIGNUP"],i=function(e){return!!(e&&!(0,r.Z)(e))&&(e&&Object.values(e).flat().some(function(e){return o.includes(e.conversionEvent)})||!1)}},103454:function(e,t,n){n.d(t,{Kq:function(){return _},eJ:function(){return v},eX:function(){return p},kV:function(){return m},oh:function(){return h},tP:function(){return u},vo:function(){return g},wH:function(){return P}});var r,o,i,a,s=n(20256),l=n(579466);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t,n){var r;return(r=function(e,t){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=c(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==c(r)?r:r+"")in e)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _="PERF_PLUS_FEATURE_POPOVER_SETTINGS",u=new s.Ry(1e3),m=330,v={BUDGET:"budget",CREATIVE_OPTIMIZATIONS:"creative_optimizations",TARGETING:"targeting",BIDDING:"bidding",ROAS_BIDDING:"roas_bidding"},p={CAMPAIGN:l.Tk.CAMPAIGNS,AD_GROUP:l.Tk.AD_GROUPS},f=(d(r={},p.CAMPAIGN,{DETAILS:"campaignDetails",GOALS:"campaignGoals",BUDGET_SCHEDULE:"campaignBudgetAndSchedule",EXTRA:"campaignExtra"}),d(r,p.AD_GROUP,{DETAILS:"adGroupDetails",PROMOS:"promos",TARGETING:"adGroupTargeting",BUDGET_SCHEDULE:"budgetAndSchedule",OPTIMIZATION_DELIVERY:"optimizationAndDelivery",CREATIVE_OPTIMIZATIONS:"adGroupDetails"}),r),g=(d(i={},p.CAMPAIGN,d({},f[p.CAMPAIGN].BUDGET_SCHEDULE,[v.BUDGET])),d(i,p.AD_GROUP,(d(o={},f[p.AD_GROUP].DETAILS,[v.CREATIVE_OPTIMIZATIONS]),d(o,f[p.AD_GROUP].TARGETING,[v.TARGETING]),d(o,f[p.AD_GROUP].OPTIMIZATION_DELIVERY,[v.ROAS_BIDDING,v.BIDDING]),o)),i),h=(d(a={},p.CAMPAIGN,[v.BUDGET,v.CREATIVE_OPTIMIZATIONS,v.TARGETING,v.ROAS_BIDDING,v.BIDDING]),d(a,p.AD_GROUP,[v.CREATIVE_OPTIMIZATIONS,v.TARGETING,v.ROAS_BIDDING,v.BIDDING,v.BUDGET]),a);function P(e,t){return t in e}},471242:function(e,t,n){var r=n(387784),o=n(557400);function i(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.Z=function(e){var t=e.advertiserId,n=e.checkExperiment,s=e.conversionTags,l=e.sharedOcpmEligibleTags,c=a((0,r.useState)({noConversionEvents:!1,noOcpmEligibleEvents:!1}),2),d=c[0],_=c[1],u=a((0,r.useState)(!0),2),m=u[0],v=u[1],p=a((0,r.useState)(null),2),f=p[0],g=p[1];return(0,r.useEffect)(function(){var e,r;if(!t)return void v(!1);(e=regeneratorRuntime.mark(function e(){var r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(!0),e.next=4,(0,o.xu)({checkExperiment:n,advertiserId:t,conversionTags:s,sharedOcpmEligibleTags:l});case 4:_({noConversionEvents:null!=(r=null==(a=e.sent)?void 0:a.noConversionEvents)&&r,noOcpmEligibleEvents:null!=(i=null==a?void 0:a.noOcpmEligibleEvents)&&i}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),g(e.t0),_({noConversionEvents:!1,noOcpmEligibleEvents:!1});case 12:return e.prev=12,v(!1),e.finish(12);case 15:case"end":return e.stop()}},e,null,[[0,8,12,15]])}),r=function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function s(e){i(a,r,o,s,l,"next",e)}function l(e){i(a,r,o,s,l,"throw",e)}s(void 0)})},function(){return r.apply(this,arguments)})()},[t,n,s,l]),{stats:d,isLoading:m,error:f}}},557400:function(e,t,n){n.d(t,{Cf:function(){return K},Dz:function(){return G},Iw:function(){return L},Ps:function(){return y},S8:function(){return B},Wp:function(){return A},_P:function(){return N},a3:function(){return R},dl:function(){return T},fO:function(){return w},hC:function(){return C},jp:function(){return H},nT:function(){return b},nt:function(){return k},pS:function(){return U},sO:function(){return x},xC:function(){return D},xu:function(){return j}});var r,o,i,a=n(731517),s=n(861241),l=n(415030),c=n(524476),d=n(705175),_=n(579466),u=n(447050),m=n(688361),v=n(103454),p=n(767415);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t,n){var r;return(r=function(e,t){if("object"!=f(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=f(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==f(r)?r:r+"")in e)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function P(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){h(i,r,o,a,s,"next",e)}function s(e){h(i,r,o,a,s,"throw",e)}a(void 0)})}}var b=function(e,t){return t.adGroupId?"".concat(e,"-adgroup-").concat(t.adGroupId):"".concat(e,"-campaign-").concat(t.campaignId)},A=(r=P(regeneratorRuntime.mark(function e(t,n){var r,o,i,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(0,p.nP)("perfplus.popover.settings.get.attempt",{sampleRate:1,tags:{optimization_feature:n}}),e.next=4,(0,a.Z)([{entity_id:String(t),entity_type:"BIZ_USER_ADVERTISER",property_keys:[v.Kq]}]);case 4:i=e.sent,(0,p.nP)("perfplus.popover.settings.get.success",{sampleRate:1,tags:{optimization_feature:n}}),s=(null==(r=i[0])||null==(o=r.properties)?void 0:o[v.Kq])||{},e.t0=n,e.next=e.t0===v.eJ.BUDGET?10:e.t0===v.eJ.BIDDING?11:e.t0===v.eJ.TARGETING?12:e.t0===v.eJ.ROAS_BIDDING?13:e.t0===v.eJ.CREATIVE_OPTIMIZATIONS?14:15;break;case 10:return e.abrupt("return",!!s.lastSeenBudgetPopoverTimestamp);case 11:return e.abrupt("return",!!s.lastSeenBiddingPopoverTimestamp);case 12:return e.abrupt("return",!!s.lastSeenTargetingPopoverTimestamp);case 13:return e.abrupt("return",!!s.lastSeenRoasBiddingPopoverTimestamp);case 14:return e.abrupt("return",!!s.lastSeenDcoBudgetPopoverTimestamp);case 15:return e.abrupt("return",!1);case 16:e.next=22;break;case 18:return e.prev=18,e.t1=e.catch(0),(0,p.nP)("perfplus.popover.settings.get.error",{sampleRate:1,tags:{optimization_feature:n}}),e.abrupt("return",!1);case 22:case"end":return e.stop()}},e,null,[[0,18]])})),function(e,t){return r.apply(this,arguments)}),y=(o=P(regeneratorRuntime.mark(function e(t,n,r){var o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o={},e.t0=r,e.next=e.t0===v.eJ.BUDGET?4:e.t0===v.eJ.BIDDING?6:e.t0===v.eJ.TARGETING?8:e.t0===v.eJ.ROAS_BIDDING?10:e.t0===v.eJ.CREATIVE_OPTIMIZATIONS?12:14;break;case 4:return o.lastSeenBudgetPopoverTimestamp=n,e.abrupt("break",15);case 6:return o.lastSeenBiddingPopoverTimestamp=n,e.abrupt("break",15);case 8:return o.lastSeenTargetingPopoverTimestamp=n,e.abrupt("break",15);case 10:return o.lastSeenRoasBiddingPopoverTimestamp=n,e.abrupt("break",15);case 12:return o.lastSeenDcoBudgetPopoverTimestamp=n,e.abrupt("break",15);case 14:return e.abrupt("return");case 15:return i=[{entity_type:"BIZ_USER_ADVERTISER",entity_id:String(t),properties:g({},v.Kq,o)}],(0,p.nP)("perfplus.popover.settings.update.attempt",{sampleRate:1,tags:{optimization_feature:r}}),e.prev=17,e.next=20,(0,s.Z)(i);case 20:(0,p.nP)("perfplus.popover.settings.update.success",{sampleRate:1,tags:{optimization_feature:r}}),e.next=26;break;case 23:e.prev=23,e.t1=e.catch(17),(0,p.nP)("perfplus.popover.settings.update.error",{sampleRate:1,tags:{optimization_feature:r}});case 26:case"end":return e.stop()}},e,null,[[17,23]])})),function(e,t,n){return o.apply(this,arguments)}),E=function(e){var t=e.objectiveType,n=e.campaignBudgetType;return l.V$.includes(t)&&("DAILY"===n||"LIFETIME"===n)},T=function(e){return null!=e&&e.keywords&&Array.isArray(e.keywords)?e.keywords.map(function(e){return"".concat(e.value,":").concat(e.matchType)}).sort().join("|"):""},I=function(e,t){if(!t)return!1;var n=e.keywords;return Array.isArray(n)&&n.length>0||Array.isArray(t.interest)&&t.interest.length>0},z=function(e,t,n){var r=t.targetingSpec,o=!!n.keywords&&!!Array.isArray(n.keywords)&&n.keywords.some(function(e){return"EXACT_NEGATIVE"===e.matchType||"PHRASE_NEGATIVE"===e.matchType}),i=Array.isArray(null==r?void 0:r.audienceInclude)&&r.audienceInclude.length>0,a=I(n,r);return(!i||!!a)&&[l.mE.CONSIDERATION,l.mE.WEB_CONVERSION].includes(e.objectiveType)&&!o},O=function(e,t,n,r,o,i,a){var s=Object.values(null!=i?i:{}).some(function(e){return e.some(function(e){return"CHECKOUT"===e.conversionEvent})});return[l.mE.WEB_CONVERSION,l.mE.CATALOG_SALES].includes(e.objectiveType)&&!(n||r||o)&&s&&a},S=function(e,t,n,r,o){var i,a=n.creativeTypeFilter,s=n.promotionApplicationLevel,c=n.optimizationGoalMetadata,m=!0;o===_.fj.EDIT&&(m=!r.some(function(e){return e.creativeType===u.lZ.SHOP_THE_PIN}));var v=e.checkExperiment("sterling_creative_overlays_beta_closed",{dangerouslySkipActivation:!0}).anyEnabled,p=(null==n?void 0:n.overlayApplicationLevel)===d.dw.ITEM||(null==n?void 0:n.overlayApplicationLevel)===d.dw.AD_GROUP;return t.objectiveType===l.mE.CATALOG_SALES&&a!==u.lZ.SHOP_THE_PIN&&s!==d.KR.ITEM&&m&&!(null!=c&&null!=(i=c.outboundClickGoalMetadata)&&i.isOutboundClickOptimized)&&!(p&&!v)},C=function(e){var t;return g(t={},v.eJ.BUDGET,{label:e._('Budget', '[m10n]performancePlus.optimization.budget.label', '[m10n] Budget optimization feature label'),enabledDescription:e._('Pinterest Performance+ budget is enabled', '[m10n]performancePlus.optimization.budget.enabled', '[m10n] Text shown when budget optimization is enabled'),activateDescription:e._('Change budget type to Pinterest Performance+ daily budget', '[m10n]performancePlus.optimization.budget.disabled', '[m10n] Text shown when budget optimization is disabled')}),g(t,v.eJ.CREATIVE_OPTIMIZATIONS,{label:e._('Creative optimizations', '[m10n]performancePlus.optimization.creativeOptimizations.label', '[m10n] Creative optimizations feature label'),enabledDescription:e._('Pinterest Performance+ creative optimization is enabled', '[m10n]performancePlus.optimization.creativeOptimizations.enabled', '[m10n] Text shown when creative optimizations are enabled'),activateDescription:e._('Turn on creative optimizations in your product groups', '[m10n]performancePlus.optimization.creativeOptimizations.disabled', '[m10n] Text shown when creative optimizations are disabled')}),g(t,v.eJ.TARGETING,{label:e._('Targeting', '[m10n]performancePlus.optimization.targeting.label', '[m10n] Targeting optimization feature label'),enabledDescription:e._('Pinterest Performance+ targeting is enabled', '[m10n]performancePlus.optimization.targeting.enabled', '[m10n] Text shown when targeting optimization is enabled'),activateDescription:e._('Enable Pinterest Performance+ targeting', '[m10n]performancePlus.optimization.targeting.disabled', '[m10n] Text shown when targeting optimization is disabled')}),g(t,v.eJ.BIDDING,{label:e._('Bidding', '[m10n]performancePlus.optimization.bidding.label', '[m10n] Bidding optimization feature label'),enabledDescription:e._('Pinterest Performance+ bidding is enabled', '[m10n]performancePlus.optimization.bidding.enabled', '[m10n] Text shown when bidding optimization is enabled'),activateDescription:e._('Change bidding strategy to Pinterest Performance+ bidding', '[m10n]performancePlus.optimization.bidding.disabled', '[m10n] Text shown when bidding optimization is disabled')}),g(t,v.eJ.ROAS_BIDDING,{label:e._('ROAS bidding', '[m10n]performancePlus.optimization.roasBidding.label', '[m10n] ROAS bidding optimization feature label'),enabledDescription:e._('Pinterest Performance+ ROAS bidding is enabled', '[m10n]performancePlus.optimization.roasBidding.enabled', '[m10n] Text shown when ROAS bidding optimization is enabled'),activateDescription:e._('Choose ROAS as your optimization strategy', '[m10n]performancePlus.optimization.roasBidding.disabled', '[m10n] Text shown when ROAS bidding optimization is disabled')}),t},D=function(e){var t=e.totalEligibleFeatures;return{completed:e.completedFeatures.size,total:t.size}},w=function(e,t){var n=e.totalEligibleFeatures,r=e.completedFeatures,o=C(t);return Array.from(n).map(function(e){var t=o[e];if(!t)throw Error("Unknown feature: ".concat(e));var n=r.has(e);return{label:t.label,description:n?t.enabledDescription:t.activateDescription,completed:n,feature:e}})},R=function(e,t){var n=D(e);return n.completed===n.total?{title:t._('Your campaign is optimized', '[m10n]performancePlus.optimization.title.optimized', '[m10n] Title when campaign is fully optimized'),subtitle:t._('You\u2019ve enabled all recommended settings to help get better results', '[m10n]performancePlus.optimization.subtitle.optimized', '[m10n] Subtitle when campaign is fully optimized')}:{title:t._('Improve your campaign', '[m10n]performancePlus.optimization.title.needsOptimization', '[m10n] Title when campaign needs optimization'),subtitle:t._('Help optimize your campaign by applying the recommended settings', '[m10n]performancePlus.optimization.subtitle.needsOptimization', '[m10n] Subtitle when campaign needs optimization')}},k=function(e){return{eligible:E(e),completed:e.campaignBudgetType===_.HU.DAILY&&!!e.flexibleDailyBudgetsEnabled||e.campaignBudgetType===_.HU.LIFETIME}},N=function(e,t){return{eligible:l.V$.includes(e.objectiveType),completed:"AUTOMATIC_BID"===t.bidStrategyType}},G=function(e,t,n){return{eligible:z(e,t,n),completed:!0===t.autoTargetingEnabled}},H=function(e){var t,n,r=e.campaign,o=e.adGroup,i=e.productGroups,a=e.noConversionEvents,s=e.noOcpmEligibleEvents,l=e.adGroupOcpmTags,c=e.experimentsClient,d=e.isRoasGmvEligible;return{eligible:O(r,o,a,s,i.some(function(e){return e.isMdl&&e.selected})&&!c.checkExperiment("sterling_shopping_mdl_ocpm_allowlist").anyEnabled,l,d),completed:!!(null==(t=o.optimizationGoalMetadata)||null==(n=t.conversionTagV3GoalMetadata)?void 0:n.isRoasOptimized)}},U=function(e,t,n,r,o){return{eligible:S(e,t,n,r,o),completed:"OPT_IN"===n.isDcoFormatEnhancement}},L=function(e,t,n,r){e.eligible&&(n.add(t),e.completed&&r.add(t))},x=function(e){var t=e.advertiserId,n=e.selectedTagId,r=e.firstAdGroupConversionTagId,o=e.alwaysUsesDelayedConversionData,i=e.ocpmMappedData,a=e.sharedOcpmEligibleTags;return(0,c.qI)(t,i,null!=n?n:"",r,o)?i:a},j=(i=P(regeneratorRuntime.mark(function e(t){var n,r,o,i,a,s,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.checkExperiment,i=t.advertiserId,a=t.conversionTags,s=t.sharedOcpmEligibleTags,e.next=3,m.Z.getShoppingOcpmEventMetricStats(o,i,a,s);case 3:return l=e.sent,e.abrupt("return",{noConversionEvents:null!=(n=null==l?void 0:l.noConversionEvents)&&n,noOcpmEligibleEvents:null!=(r=null==l?void 0:l.noOcpmEligibleEvents)&&r});case 5:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)}),B=function(e,t){switch(t){case v.eJ.BIDDING:return{title:e._('Help reduce cost per action by choosing Pinterest Performance+ bidding', '[m10n] performancePlus.recommendationPopover.bidding.title', '[m10n] Title for Performance+ bidding recommendation'),whatItDoes:e._('This uses real-time signals to adjust bids to help you get more Pin clicks at a lower cost per result.', '[m10n] performancePlus.recommendationPopover.bidding.whatItDoes', '[m10n] Description of what Performance+ bidding does'),statSource:e._('*Pinterest internal data from campaigns created between 1/1/24 and 7/31/24 optimizing for conversions from the 10K highest spending advertisers campaigns vs the same advertisers\' campaigns not using Pinterest Performance+ bidding (n=10,000) [Global]. CPA results not guaranteed.', '[m10n] performancePlus.recommendationPopover.bidding.statSource', '[m10n] Statistical source disclaimer for Performance+ bidding'),formattedResults:e._('Pinterest Performance+ bidding <strong id="1">reduced cost per action by 2%</strong> on average compared to custom bidding.*', '[m10n] performancePlus.recommendationPopover.bidding.formattedResults', '[m10n] Full formatted results text for Performance+ bidding with bold improvement text')};case v.eJ.BUDGET:return{title:e._('Using Pinterest Performance+ daily budget may help reduce cost per action', '[m10n] performancePlus.recommendationPopover.budget.title', '[m10n] Title for Performance+ budget recommendation'),whatItDoes:e._('This transitions your daily budget from a strict cap to an average amount you are willing to spend each day to help maximize opportunities.', '[m10n] performancePlus.recommendationPopover.budget.whatItDoes', '[m10n] Description of what Performance+ budget does'),statSource:e._('*Pinterest internal data from campaigns created between 1/1/24 and 7/31/24 optimizing for conversions from the 10K highest spending advertisers campaigns vs the same advertisers\' campaigns not using Pinterest Performance+ budgets (n=10,000) [Global]. CPA results are not guaranteed.', '[m10n] performancePlus.recommendationPopover.budget.statSource', '[m10n] Statistical source disclaimer for Performance+ budget'),formattedResults:e._('Pinterest Performance+ daily budgets <strong id="1">drove 3% lower cost per action</strong> on average compared to campaigns using fixed daily budgets.*', '[m10n] performancePlus.recommendationPopover.budget.formattedResults', '[m10n] Full formatted results text for Performance+ budget with bold improvement text')};case v.eJ.TARGETING:return{title:e._('Help lower cost per click by enabling Pinterest Performance+ targeting', '[m10n] performancePlus.recommendationPopover.targeting.title', '[m10n] Title for Performance+ targeting recommendation'),whatItDoes:e._('This uses visual signals from your ad to broaden your targeting and help reach additional people on Pinterest.', '[m10n] performancePlus.recommendationPopover.targeting.whatItDoes', '[m10n] Description of what Performance+ targeting does'),statSource:e._('*Pinterest internal data from campaigns created between 1/1/24 and 7/31/24 optimizing for conversions from the 10K highest spending advertisers campaigns vs the same advertisers\' campaigns not using Pinterest Performance+ targeting (n=10,000) [Global]. CPC results are not guaranteed.', '[m10n] performancePlus.recommendationPopover.targeting.statSource', '[m10n] Statistical source disclaimer for Performance+ targeting'),formattedResults:e._('Pinterest Performance+ targeting <strong id="1">lowered cost per click by 7%</strong> on average compared to campaigns that didn\'t use this setting.*', '[m10n] performancePlus.recommendationPopover.targeting.formattedResults', '[m10n] Full formatted results text for Performance+ targeting with bold improvement text')};case v.eJ.ROAS_BIDDING:return{title:e._('Using ROAS bidding may help you get better return on ad spend', '[m10n] performancePlus.recommendationPopover.roasBidding.title', '[m10n] Title for Performance+ ROAS bidding recommendation'),whatItDoes:e._('This predicts the value of a checkout and adjusts your bids to help maximize the value of your conversions and could help increase return on ad spend.', '[m10n] performancePlus.recommendationPopover.roasBidding.whatItDoes', '[m10n] Description of what Performance+ ROAS bidding does'),statSource:e._('*Pinterest internal data, Global, from Q1\'25 (n=262) comparing ROAS bidding to conversion bidding. Results concentrated among retail advertisers \u2014 ROAS improvements from Pinterest Performance+ ROAS campaigns are not guaranteed.', '[m10n] performancePlus.recommendationPopover.roasBidding.statSource', '[m10n] Statistical source disclaimer for Performance+ ROAS bidding'),formattedResults:e._('Advertisers in beta testing saw a median <strong id="1">10% higher return on ad spend</strong> when using Pinterest Performance+ ROAS bidding.*', '[m10n] performancePlus.recommendationPopover.roasBidding.formattedResults', '[m10n] Full formatted results text for Performance+ ROAS bidding with bold improvement text')};case v.eJ.CREATIVE_OPTIMIZATIONS:return{title:e._('Help improve results by enabling creative optimization', '[m10n] performancePlus.recommendationPopover.creativeOptimizations.title', '[m10n] Title for Performance+ creative optimization recommendation'),whatItDoes:e._('This automatically turns your product Pins into collections and shopping ads to help deliver the best performing ads to users.', '[m10n] performancePlus.recommendationPopover.creativeOptimizations.whatItDoes', '[m10n] Description of what Performance+ creative optimization does'),statSource:e._('*Pinterest internal data from >200 global advertisers in beta comparing Pinterest Performance+ creative ads with multiple formats to Shopping ads alone, June-August 2024. Performance improvements are not guaranteed.', '[m10n] performancePlus.recommendationPopover.creativeOptimizations.statSource', '[m10n] Statistical source disclaimer for Performance+ creative optimization'),formattedResults:e._('Advertisers in beta testing <strong id="1">drove 11% higher clickthrough rates and 10% lower cost per click</strong> when using creative optimization.*', '[m10n] performancePlus.recommendationPopover.creativeOptimizations.formattedResults', '[m10n] Full formatted results text for creative optimization with bold improvement text')};default:throw Error("Unknown recommendation type: ".concat(t))}},K=function(e,t){switch(t){case v.eJ.BIDDING:return{heading:e._('Switching bidding type may help you reduce cost per click', '[m10n] performancePlus.carousel.bidding.title', '[m10n] Carousel title for Performance+ bidding optimization'),subheading:e._('Pinterest Performance+ bidding on average reduced cost per action by 2% compared to custom bidding', '[m10n] performancePlus.carousel.bidding.subheading', '[m10n] Carousel description of what Performance+ bidding does'),tooltipText:e._('Pinterest internal data from campaigns created between 1/1/24 and 7/31/24 optimizing for conversions from the 10K highest spending advertisers campaigns vs the same advertisers\' campaigns not using Pinterest Performance+ bidding (n=10,000) [Global]. CPA results not guaranteed.', '[m10n] performancePlus.carousel.bidding.tooltipText', '[m10n] Carousel statistical source disclaimer for Performance+ bidding')};case v.eJ.BUDGET:return{heading:e._('Changing budget type may help improve performance', '[m10n] performancePlus.carousel.budget.title', '[m10n] Carousel title for Performance+ budget optimization'),subheading:e._('Pinterest Performance+ daily budgets on average drove 3% lower CPA compared to campaigns using fixed daily budgets', '[m10n] performancePlus.carousel.budget.subheading', '[m10n] Carousel description of what Performance+ budget does'),tooltipText:e._('Pinterest internal data from campaigns created between 1/1/24 and 7/31/24 optimizing for conversions from the 10K highest spending advertisers campaigns vs the same advertisers\' campaigns not using Pinterest Performance+ budgets (n=10,000) [Global]. CPA results are not guaranteed.', '[m10n] performancePlus.carousel.budget.tooltipText', '[m10n] Carousel statistical source disclaimer for Performance+ budget')};case v.eJ.TARGETING:return{heading:e._('Help improve results by changing targeting settings', '[m10n] performancePlus.carousel.targeting.title', '[m10n] Carousel title for Performance+ targeting optimization'),subheading:e._('Pinterest Performance+ targeting on average reduced cost per clicks by 7% compared to campaigns that didn\u2019t use this setting', '[m10n] performancePlus.carousel.targeting.subheading', '[m10n] Carousel description of what Performance+ targeting does'),tooltipText:e._('Pinterest internal data from campaigns created between 1/1/24 and 7/31/24 optimizing for conversions from the 10K highest spending advertisers campaigns vs the same advertisers\' campaigns not using Pinterest Performance+ targeting (n=10,000) [Global]. CPC results are not guaranteed.', '[m10n] performancePlus.carousel.targeting.tooltipText', '[m10n] Carousel statistical source disclaimer for Performance+ targeting')};case v.eJ.ROAS_BIDDING:return{heading:e._('Using ROAS bidding may help improve return on ad spend', '[m10n] performancePlus.carousel.roasBidding.title', '[m10n] Carousel title for Performance+ ROAS bidding optimization'),subheading:e._('Advertisers in beta testing saw a median +10% higher ROAS when using Pinterest Performance+ ROAS bidding', '[m10n] performancePlus.carousel.roasBidding.subheading', '[m10n] Carousel description of what Performance+ ROAS bidding does'),tooltipText:e._('Pinterest internal data, Global, from Q1\u201925 (n=262) comparing ROAS bidding to conversion bidding. Results concentrated among retail advertisers \u2014 ROAS improvements from Pinterest Performance+ ROAS campaigns are not guaranteed', '[m10n] performancePlus.carousel.roasBidding.tooltipText', '[m10n] Carousel statistical source disclaimer for Performance+ ROAS bidding')};case v.eJ.CREATIVE_OPTIMIZATIONS:return{heading:e._('Creative optimization may help improve results', '[m10n] performancePlus.carousel.creativeOptimizations.title', '[m10n] Carousel title for Performance+ creative optimization'),subheading:e._('Advertisers in beta testing drove 11% higher clickthrough rates and 10% lower cost per click when using creative optimization', '[m10n] performancePlus.carousel.creativeOptimizations.subheading', '[m10n] Carousel description of what Performance+ creative optimization does'),tooltipText:e._('Pinterest internal data from >200 global advertisers in beta comparing Pinterest Performance+ creative ads with multiple formats to Shopping ads alone, June-August 2024. Performance improvements are not guaranteed.', '[m10n] performancePlus.carousel.creativeOptimizations.tooltipText', '[m10n] Carousel statistical source disclaimer for Performance+ creative optimization')};default:throw Error("Unknown recommendation type: ".concat(t))}}},234643:function(e,t,n){n.d(t,{Ux:function(){return i},q$:function(){return o}});var r={ADD_TO_CART:"ADD_TO_CART",CHECKOUT:"CHECKOUT",LEAD:"LEAD",SIGNUP:"SIGNUP",APP_INSTALL:"APP_INSTALL"},o={ADD_TO_CART:"ADD_TO_CART",CHECKOUT:"CHECKOUT",LEAD:"LEAD",SIGNUP:"SIGNUP",ADD_PAYMENT_INFO:"ADD_PAYMENT_INFO",ADD_TO_WISHLIST:"ADD_TO_WISHLIST",INITIATE_CHECKOUT:"INITIATE_CHECKOUT",SUBSCRIBE:"SUBSCRIBE"},i=[r.ADD_TO_CART,r.CHECKOUT,r.LEAD,r.SIGNUP];t.ZP=r},688361:function(e,t,n){n.d(t,{Z:function(){return v}});var r,o=n(178614),i=n(236269),a=n(856853),s=n(424868),l=n(660947),c=n(890893),d=n(694219);function _(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=u(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=(Object.defineProperty(r=function e(){if(!(this instanceof e))throw TypeError("Cannot call a class as a function")},"prototype",{writable:!1}),r);m(v,"THROTTLE_BATCH_SIZE",40),m(v,"THROTTLE_DELAY",2e3),m(v,"getConversionTypeLabel",function(e,t){return({VIEW_CATEGORY:t._('Category view', 'm10n - Category view conversion type', 'm10n - Category view conversion type'),ADD_TO_CART:t._('Add to cart', 'm10n - Add to cart conversion type', 'm10n - Add to cart conversion type'),CHECKOUT:t._('Checkout', 'm10n - Checkout conversion type', 'm10n - Checkout conversion type'),LEAD:t._('Lead', 'm10n - Lead conversion type', 'm10n - Lead conversion type'),PAGE_VISIT:t._('Page visit', 'm10n - Page visit conversion type', 'm10n - Page visit conversion type'),SEARCH:t._('Search', 'm10n - Search conversion type', 'm10n - Search conversion type'),SIGNUP:t._('Signup', 'm10n - Signup conversion type', 'm10n - Signup conversion type'),WATCH_VIDEO:t._('Video view', 'm10n - Video view conversion type', 'm10n - Video view conversion type'),APP_INSTALL:t._('App install', 'm10n - App install conversion type', 'm10n - App install conversion type'),UNKNOWN:t._('Unknown', 'm10n - Unknown conversion type', 'm10n - Unknown conversion type'),CUSTOM:t._('Custom', 'm10n - Custom conversion type', 'm10n - Custom conversion type'),INITIALIZED:t._('Init', '[m10n] ConversionTypeLabel.init', 'Init conversion type')})[e]||e}),m(v,"getEventsMetricsForTags",function(e,t){return new Promise(function(n,r){var a={};e.forEach(function(e){var n;a[e.id]=(n=regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,o.Z)({advertiser_id:t,conversion_tag_id:e.id});case 3:return n.abrupt("return",n.sent);case 6:if(n.prev=6,n.t0=n.catch(0),(0,i.Z)(n.t0,"code")!==s.OW){n.next=10;break}return n.abrupt("return",Promise.resolve([]));case 10:throw n.t0;case 11:case"end":return n.stop()}},n,null,[[0,6]])}),function(){var e=this,t=arguments;return new Promise(function(r,o){var i=n.apply(e,t);function a(e){_(i,r,o,a,s,"next",e)}function s(e){_(i,r,o,a,s,"throw",e)}a(void 0)})})}),new d.b(15).process(a).then(function(e){var t=e.resolved,o={};Object.keys(t).length?(Object.keys(t).forEach(function(e){"undefined"!==e&&(o[e]=t[e].map(function(e){return{tagId:e.conversion_tag_id,id:e.conversion_type,conversionType:e.conversion_type,rawEventName:e.raw_event_name,eventCount:e.event_count,enhancedMatchStatus:e.enhanced_match_status,updatedTime:e.updated_time,lastFiredTime:e.last_fired_time,subKeys:e.sub_keys}}))}),n(o)):r(Error("Could not fetch Pinterest tag event metrics"))})})}),m(v,"getEventsMetricsForTagsThrottled",function(e,t){return new Promise(function(n,r){var o=Array.from({length:Math.ceil(e.length/v.THROTTLE_BATCH_SIZE)},function(t,n){return e.slice(n*v.THROTTLE_BATCH_SIZE,n*v.THROTTLE_BATCH_SIZE+v.THROTTLE_BATCH_SIZE)}),i={},a=new Promise(function(e){return setTimeout(e,0)}),s=!1,l=[a];o.forEach(function(e){a=a.then(function(){return v.getEventsMetricsForTags(e,t).then(function(e){e?i=Object.assign(i,e):s=!0}).catch(function(e){s=!0,r(Error("Could not fetch Pinterest tag event metrics, error: ".concat(e)))}),new Promise(function(e){return setTimeout(e,v.THROTTLE_DELAY)})}),l.push(a)}),Promise.all(l).then(function(){s?r(Error("Could not fetch Pinterest tag event metrics")):n(i)})})}),m(v,"checkForConversionEvents",function(e,t){return e.some(function(e){return t&&!(0,a.Z)(t[e.id])||e.status===l.Hu.ACTIVE&&e.lastFiredTime})}),m(v,"getShoppingOcpmEventMetricStats",function(e,t,n,r){if(n){var o=Object.keys(n).map(function(e){var t=n[e];return{id:t.id,name:t.name,verificationStatus:t.verification_status,lastFiredTime:t.last_fired_time_ms,status:t.status}}),i={noTags:!1,noConversionEvents:!1,noOcpmEligibleEvents:!1,noPerformancePlusEligibleEvents:!1},s=r&&!(0,a.Z)(r);return(i.noPerformancePlusEligibleEvents=!(0,c.R)(r),0===o.length)?(i.noTags=!0,s||(i.noConversionEvents=!0,i.noOcpmEligibleEvents=!0),Promise.resolve(i)):s?Promise.resolve(i):(i.noOcpmEligibleEvents=!0,(e("aid_throttled_get_conv_metrics_gate").anyEnabled?v.getEventsMetricsForTagsThrottled:v.getEventsMetricsForTags)(o,t).then(function(e){return v.checkForConversionEvents(o,e)||(i.noConversionEvents=!0),i}))}return Promise.resolve()})},664314:function(e,t,n){n.d(t,{m:function(){return r}});var r={CONSIDERATION:"CONSIDERATION",AWARENESS:"AWARENESS",APP_INSTALL:"APP_INSTALL",WEB_CONVERSION:"WEB_CONVERSION",CATALOG_SALES:"CATALOG_SALES",VIDEO_VIEW:"VIDEO_VIEW",WEB_SESSIONS:"WEB_SESSIONS",VIDEO_COMPLETION:"VIDEO_COMPLETION"}}}]);