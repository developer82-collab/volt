"use strict";(self.legacyJsonp=self.legacyJsonp||[]).push([["58952"],{231495:function(e,t,n){n.r(t);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ActivityAvatar_user",selections:[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"firstName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageMediumUrl",storageKey:null}],type:"User",abstractKey:null};r.hash="abf151ba4d389a02e4541aa5f969d468",t.default=r},349507:function(e,t,n){n.r(t);var r,o,i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"AggregatedCommentListUnified_pin",selections:[{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:o=[r={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],storageKey:null},r,{alias:null,args:null,kind:"ScalarField",name:"highlightedAggregatedComments",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:o,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null}],type:"Pin",abstractKey:null};i.hash="ba6cb3d83648d5a9f07e044db4a9cf58",t.default=i},400411:function(e,t,n){var r;void 0===r&&(r=n.g),t.Z={setTimeout:function(e,t){return r.setTimeout(e,t)},clearTimeout:function(e){return r.clearTimeout(e)},setInterval:function(e,t){return r.setInterval(e,t)},clearInterval:function(e){return r.clearInterval(e)}}},377436:function(e,t,n){n.d(t,{Z:function(){return u}}),n(115821);var r,o=n(20256),i=n(583875),a=n(935059),l=n(183e3),s=n(680811),c=(void 0!==r||(r=n(231495)).hash&&"abf151ba4d389a02e4541aa5f969d468"!==r.hash&&console.error("The definition of 'ActivityAvatar_user' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r);function u(e){var t,n=e.userKey,r=e.size,u=e.hasOutline,d=(0,l.Z)(c,n),f=(0,a.Z)(),p=f.isAuth?null==f?void 0:f.avatar_color_index:void 0;if(!d)return null;var h=d.firstName,m=d.imageMediumUrl,y=null!=(t=d.username)?t:"";return(0,s.jsx)(o.Tg,{href:"/".concat(y,"/"),rounding:"circle",children:(0,s.jsx)(i.qE,{color:p,name:h||y||"",outline:u,size:void 0===r?"md":r,src:null!=m?m:""})})}},409521:function(e,t,n){var r=n(387784),o=n(20256),i=n(367683),a=n(24246),l=n(564377),s=n(632492),c=n(680811);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.Z=function(e){var t,n=e.handleBlockUser,d=void 0===n?null:n,f=e.handleClickReport,p=void 0===f?null:f,h=e.handleDelete,m=void 0===h?null:h,y=e.handleOnEdit,g=void 0===y?null:y,_=e.handleRemoveMention,b=void 0===_?null:_,v=e.handleHighlight,x=e.handleRemoveHighlight,j=e.showHighlightEducator,P=e.iconColor,w=e.small,O=(0,a.Z)(),C=function(e){if(Array.isArray(e))return e}(t=(0,r.useState)(!1))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{for(i=(n=n.call(e)).next;!(s=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,2)||function(e,t){if(e){if("string"==typeof e)return u(e,2);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,2):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),S=C[0],A=C[1],I=(0,r.useRef)(null),T=function(e){var t=null==e?void 0:e.event;null!=t&&t.preventDefault&&(t.preventDefault(),t.stopPropagation()),A(!S)};if(!(d||p||m||g||b||v))return null;var E={highlight:O._('Highlight', 'Highlight a community post or comment', 'Highlight a community post or comment'),remove:O._('Remove highlight', 'Remove highlight for a community post or comment', 'Remove highlight for a community post or comment'),edit:O._('Edit', 'Edit a community post or comment', 'Edit a community post or comment'),delete:O._('Delete', 'Delete a community post or comment', 'Delete a community post or comment'),report:O._('Report this content', 'Report a community post or comment', 'Report a community post or comment'),removeMention:O._('Remove @mention', 'closeup.activityItem.removeMention', 'Button that allows user to remove their @mention in a comment on a pin'),blockUser:O._('Block user', 'closeup.activityItem.blockUser', 'Block comment author')};return(0,c.jsxs)(o.kC,{alignItems:"end",direction:"column",justifyContent:"start",children:[(0,c.jsx)(o.xu,{"data-test-id":"flyout-toggle",children:(0,c.jsx)(o.hU,{ref:I,accessibilityExpanded:S,accessibilityHaspopup:!0,accessibilityLabel:O._('more options', 'accessible label for button to see more options on report content', 'accessible label for button to see more options on report content'),icon:"ellipsis",iconColor:P||"gray",onClick:T,size:w?"sm":"md"})}),j&&(0,c.jsx)(o.mh,{zIndex:s.lI,children:(0,c.jsx)(l.Z,{children:(0,c.jsx)(i.Qp,{anchor:I.current,experienceIds:[503461],idealDirection:"down",placementId:12,positionRelativeToAnchor:!1,showCaret:!0,textAlign:"center"})})}),S&&(0,c.jsxs)(o.Lt,{anchor:I.current,disableMobileUI:!0,id:"dropdown-flyout",idealDirection:"down",onDismiss:T,children:[v&&(0,c.jsx)(o.Lt.Item,{dataTestId:"dropdown-item-highlight",onSelect:function(){v(),T()},option:{label:E.highlight,value:E.highlight}}),x&&(0,c.jsx)(o.Lt.Item,{dataTestId:"dropdown-item-removeHighlight",onSelect:function(){x(),T()},option:{label:E.remove,value:E.remove}}),g&&(0,c.jsx)(o.Lt.Item,{dataTestId:"dropdown-item-edit",onSelect:function(){return g()},option:{label:E.edit,value:E.edit}}),m&&(0,c.jsx)(o.Lt.Item,{dataTestId:"dropdown-item-delete",onSelect:function(){return m()},option:{label:E.delete,value:E.delete}}),p&&(0,c.jsx)(o.Lt.Item,{dataTestId:"dropdown-item-report",onSelect:function(){return p()},option:{label:E.report,value:E.report}}),b&&(0,c.jsx)(o.Lt.Item,{dataTestId:"dropdown-item-removeMention",onSelect:function(){b(),T()},option:{label:E.removeMention,value:E.removeMention}}),d&&(0,c.jsx)(o.Lt.Item,{dataTestId:"dropdown-item-blockUser",onSelect:function(){return d()},option:{label:E.blockUser,value:E.blockUser}})]})]})}},233130:function(e,t,n){var r=n(387784),o=n(20256),i=n(761237),a=n(371048),l=n(299136),s=n(24246),c=n(680811);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){g(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(m=function(){return!!e})()}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,n){return(t=_(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=u(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u(t)?t:t+""}var b=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");d.prototype=Object.create(e&&e.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),Object.defineProperty(d,"prototype",{writable:!1}),e&&p(d,e);var t,n,s=(t=m(),function(){var e,n=y(d);return e=t?Reflect.construct(n,arguments,y(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==u(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return h(e)}(this,e)});function d(){var e;if(!(this instanceof d))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return g(h(e=s.call.apply(s,[this].concat(n))),"state",{truncate:!!e.props.text&&e.props.text.length>(e.props.maxCharLength||i.lr)+e.revealText.length}),g(h(e),"showFullText",function(){return e.setState({truncate:!1})}),e}return n=[{key:"revealText",get:function(){return this.props.inUnifiedComments?this.props.i18n._('... More', 'click to see more of a long post', 'click to see more of a long post'):this.props.i18n._('... See more', 'click to see more of a long post', 'click to see more of a long post')}},{key:"render",value:function(){var e=this.props,t=e.allowReveal,n=e.maxCharLength,s=e.size,u=e.tags,d=e.taggedUsers,f=e.text,p=this.state.truncate,h=p?f.substring(0,n||i.lr).trim():f;return(0,c.jsxs)(r.Fragment,{children:[(0,c.jsx)(l.Z,{shouldShowFirstNameOnly:!0,taggedUsers:d,tags:u,text:h}),p&&!t&&(0,c.jsx)(o.xv,{inline:!0,overflow:"normal",weight:"bold",children:this.revealText}),p&&t&&(0,c.jsx)(a.Z,{color:"default",handleClick:this.showFullText,size:s,text:this.revealText})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_(r.key),r)}}(d.prototype,n),Object.defineProperty(d,"prototype",{writable:!1}),d}(r.PureComponent);g(b,"defaultProps",{allowReveal:!1,size:"200",tags:[],taggedUsers:[],text:""}),t.Z=function(e){var t=(0,s.Z)();return(0,c.jsx)(b,f(f({},e),{},{i18n:t}))}},371048:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(20256),o=n(680811);function i(e){var t=e.color,n=e.handleClick,i=e.size,a=e.text;return(0,o.jsx)(r.xu,{display:"inlineBlock",children:(0,o.jsx)(r.iP,{onTap:n,rounding:"pill",children:(0,o.jsx)(r.xv,{color:void 0===t?"subtle":t,size:void 0===i?"100":i,weight:"bold",children:a})})})}},761237:function(e,t,n){n.d(t,{A7:function(){return o},YD:function(){return i},lr:function(){return r}});var r=170,o=function(e,t,n){var r=new Date(e);return 60>Math.floor((new Date().getTime()-r.getTime())/1e3)?t._('now', 'timestamp for a comment or post that was created within the last minute', 'timestamp for a comment or post that was created within the last minute'):n(e,!0)},i=function(e){var t=e.first_name||e.full_name||e.username;return t&&t.length>60?t.substring(0,60).trim().concat("..."):t}},381813:function(e,t,n){n.d(t,{Z:function(){return h}});var r=n(581722),o=n(27399),i=n(458465),a=n(264267),l=n(426130),s=n(779686),c=n(578321),u=n(438274);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e,t,n,r,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function h(){var e,t,n=(0,r.I0)(),h=(0,a.nf)(),m=h.aggregatedCommentDeleted,y=h.updateCommentCount;return e=regeneratorRuntime.mark(function e(t){var r,a,p,h,g,_,b,v;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.aggregatedCommentId,a=t.aggregatedPinId,p=t.feedType,h=t.orbacSubjectId,g=t.parentId,_=t.type,b=t.updateParentCommentCount,v=t.pinId,e.next=3,o.Z.create("AggregatedCommentResource",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=d(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({commentId:r},h?{orbacSubjectId:h}:{})).callDelete({showError:!1});case 3:g&&(n((0,s.EX)({feedId:a||g,feedType:p||u.Z.AGGREGATED_COMMENTS,itemIds:[r],itemType:"aggregatedcomment"})),m(g,r),b&&(_||0===_)&&(_===i.Rv.TOP&&v?n((0,c.R)(v,-1)):_===i.Rv.REPLY_TO_AGGREGATED?y(g,-1):n((0,l.L8)(g,-1))));case 4:case"end":return e.stop()}},e)}),t=function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){p(i,r,o,a,l,"next",e)}function l(e){p(i,r,o,a,l,"throw",e)}a(void 0)})},function(e){return t.apply(this,arguments)}}},365278:function(e,t,n){n.d(t,{Z:function(){return e$}});var r=n(387784),o=n(20256),i=n(591200),a=n(581722),l=n(805674),s=n(327730),c=n(230201),u=n(32562),d=n(27399),f=n(66160),p=n(997526),h=n(24246),m=n(59111),y=n(174481),g=n(680811);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach(function(t){O(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function x(e,t){return(x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function j(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(P=function(){return!!e})()}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t,n){return(t=C(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e){var t=function(e,t){if("object"!=_(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=_(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_(t)?t:t+""}var S="\n.uploadProgressBar {\n  background-color: ".concat(p.$rz,";\n  border-radius: 8px;\n  height: 16px;\n  opacity: 1;\n  position: absolute;\n  transition: opacity 85ms ease-in, width 85ms ease-in;\n  z-index: 10;\n\n  &.transition {\n    opacity: 0;\n    transition: opacity 85ms ease-in, width 85ms ease-in;\n  }\n}\n"),A=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),e&&x(a,e);var t,n,i=(t=P(),function(){var e,n=w(a);return e=t?Reflect.construct(n,arguments,w(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==_(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return j(e)}(this,e)});function a(){var e;if(!(this instanceof a))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return O(j(e=i.call.apply(i,[this].concat(n))),"_videoContainerRef",null),O(j(e),"removeVideoTag",function(){e._videoContainerRef&&e._videoContainerRef.childNodes[0]&&e._videoContainerRef.removeChild(e._videoContainerRef.childNodes[0])}),O(j(e),"clear",function(t){t.event.stopPropagation(),e.removeVideoTag(),e.props.handleRemoveClick()}),e}return n=[{key:"isPin",get:function(){var e=this.props,t=e.display,n=e.imagePreviewSrc,r=e.videoUrls;return"pin"===t&&(!!n||!!r)}},{key:"renderProgressBar",value:function(){var e=this.props.progress;return(0,g.jsx)("div",{className:100===e||0===e?"uploadProgressBar transition":"uploadProgressBar",style:{width:"".concat(e,"%")}})}},{key:"renderDropZone",value:function(){return(0,g.jsxs)(o.xu,{children:[(0,g.jsx)(o.kC,{alignItems:"center",justifyContent:"center",children:(0,g.jsx)(o.kC,{alignItems:"center",justifyContent:"center",children:(0,g.jsx)(o.JO,{accessibilityLabel:this.props.i18n._('Add a Photo', 'Add a photo as part of a form', 'Add a photo as part of a form'),color:"default",icon:"camera",size:32})})}),(0,g.jsx)(o.xu,{marginTop:2,paddingX:12,children:(0,g.jsx)(o.xv,{align:"center",color:"default",weight:"bold",children:this.props.i18n._('Drag and drop or click to upload', 'Label on drag/drop area for uploading a pin', 'Label on drag/drop area for uploading a pin')})})]})}},{key:"renderImage",value:function(){var e=this.props,t=e.height,n=e.imagePreviewSrc,r=e.width,i=this.props.i18n._('Your Upload', 'Image a pinner just uploaded to a form', 'Image a pinner just uploaded to a form');return this.isPin?(0,g.jsx)(o.Ee,{alt:i,src:n}):(0,g.jsx)(o.xu,{height:t,width:r,children:(0,g.jsx)(o.Ee,{alt:i,color:"white",naturalHeight:t,naturalWidth:r,src:n})})}},{key:"renderResetButton",value:function(){return(0,g.jsx)(o.xu,{left:!0,margin:2,position:"absolute",top:!0,children:(0,g.jsx)(o.hU,{accessibilityLabel:this.props.i18n._('Remove Photo', 'Remove photo from a form', 'Remove photo from a form'),bgColor:"lightGray",icon:"clear",iconColor:"darkGray",onClick:this.clear,size:"sm"})})}},{key:"renderContent",value:function(){var e=this.props,t=e.height,n=e.imagePreviewSrc,i=e.isHovering,a=e.isVideo,l=e.isVideoComplete,s=e.isOver,c=e.thumbnail,u=e.videoUrls,d=e.allowReset,f=e.width,p=u?(0,g.jsx)("video",{autoPlay:!0,controls:!0,height:this.isPin?"auto":t,loop:!0,poster:c||"",width:f,children:Object.keys(u).map(function(e){return(0,g.jsx)("source",{src:u[e],type:"hls"===e?"m3u8":"video/mp4"},e)})}):null;return(0,g.jsxs)(r.Fragment,{children:[(0,g.jsx)(o.zd,{height:"100%",rounding:2,children:(0,g.jsxs)(o.xu,{alignItems:"center",color:s?"secondary":"default",display:"flex",height:"100%",justifyContent:"center",width:"100%",children:[!n&&!a&&this.renderDropZone(),a&&!u&&(0,g.jsxs)(o.xu,{children:[l&&(0,g.jsx)(o.xv,{align:"center",weight:"bold",children:this.props.i18n._('Processing Video', 'Loading message shown while user video is uploading', 'Loading message shown while user video is uploading')}),(0,g.jsx)(o.xu,{paddingY:4,children:(0,g.jsx)(o.xH,{accessibilityLabel:this.props.i18n._('Video uploading', 'Loading spinner while video uploads', 'Loading spinner while video uploads'),show:!0})})]}),p,n&&this.renderImage()]})}),(n||u)&&(void 0===d||d)&&i&&this.renderResetButton()]})}},{key:"render",value:function(){var e=this.props,t=e.connectDropTarget,n=e.height,r=e.imagePreviewSrc,i=e.onClick,a=e.videoUrls,l=e.width,s=e.hoverHandlers,c=s.onMouseOver,u=s.onMouseLeave,d=this.isPin?"auto":n,f=(0,g.jsxs)(o.xu,{position:"relative",children:[(0,g.jsx)(m.Z,{unsafeCSS:S}),this.renderProgressBar(),r||a?(0,g.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{border:this.isPin?0:"2px dashed #767676",borderRadius:"10px",outline:"none"}},height:d,marginEnd:"auto",marginStart:"auto",padding:0,width:l,children:(0,g.jsx)(o.iP,{fullWidth:!1,mouseCursor:r?"default":"pointer",onMouseEnter:c,onMouseLeave:u,children:this.renderContent()})}):(0,g.jsx)(o.iP,{onMouseEnter:c,onMouseLeave:u,onTap:i,children:(0,g.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{border:this.isPin?0:"2px dashed #767676",borderRadius:"10px",cursor:r?"default":"pointer",outline:"none"}},height:d,marginEnd:"auto",marginStart:"auto",padding:0,width:l,children:this.renderContent()})})]});return t((0,g.jsx)("div",{children:f}))}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,C(r.key),r)}}(a.prototype,n),Object.defineProperty(a,"prototype",{writable:!1}),a}(r.Component),I=(0,f.DropTarget)(function(e){return e.accepts},{drop:function(e,t){e.onDrop&&e.onDrop(e,t)}},function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver(),canDrop:t.canDrop()}})(function(e){var t=(0,h.Z)(),n=(0,y.Z)(),r=n.isHovering,o=n.hoverHandlers;return(0,g.jsx)(A,v(v({},e),{},{hoverHandlers:o,i18n:t,isHovering:r}))}),T=n(681698),E=n(774838);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach(function(t){B(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function M(e,t,n,r,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function R(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){M(i,r,o,a,l,"next",e)}function l(e){M(i,r,o,a,l,"throw",e)}a(void 0)})}}function L(e,t){return(L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function U(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(H=function(){return!!e})()}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e,t,n){return(t=N(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N(e){var t=function(e,t){if("object"!=k(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=k(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==k(t)?t:t+""}var F=["video/quicktime","video/mp4"],V=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1200x";return e&&"https://i.pinimg.com/".concat(t,"/").concat(e.substring(0,2),"/").concat(e.substring(2,4),"/").concat(e.substring(4,6),"/").concat(e,".jpg")||""},Y=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),e&&L(a,e);var t,n,r,i=(t=H(),function(){var e,n=Z(a);return e=t?Reflect.construct(n,arguments,Z(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==k(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return U(e)}(this,e)});function a(){var e,t;if(!(this instanceof a))throw TypeError("Cannot call a class as a function");for(var n=arguments.length,r=Array(n),l=0;l<n;l++)r[l]=arguments[l];return B(U(e=i.call.apply(i,[this].concat(r))),"state",{imagePreviewSrc:e.props.existingImageSrc||"",isVideo:!1,isVideoComplete:!1,thumbnail:null,videoUrls:null,errorFlyout:null,progress:0}),B(U(e),"mounted",!1),B(U(e),"containerRef",null),B(U(e),"fileInputRef",null),B(U(e),"xhr",null),B(U(e),"CHECK_VIDEO_TIMEOUT",null),B(U(e),"ERROR_MESSAGE",e.props.i18n._('Unable to upload video. Please try again later.', 'Error shown when we can\'t accept video uploads', 'Error shown when we can\'t accept video uploads')),B(U(e),"handleFileDrop",function(t,n){if(n&&(!e.xhr||4===e.xhr.readyState)){var r=n.getItem().files[0];e.handleFile(r)}}),B(U(e),"handleFile",function(t){var n=e.props.onImageUploadStart;t.size>2e9?e.showError(e.props.i18n._('The video is too large. The maximum size is 2 GB.', 'Error if a user tries to upload a video that is too large', 'Error if a user tries to upload a video that is too large')):(e.props.allowVideo&&F.includes(t.type)&&e.setState({isVideo:!0}),e.loadMedia(t),n&&n())}),B(U(e),"showError",function(t){var n=(0,g.jsx)(o.J2,{anchor:e.containerRef,idealDirection:e.props.idealErrorDirection,onDismiss:function(){return e.setState({errorFlyout:null})},shouldFocus:!1,size:"sm",children:(0,g.jsx)(o.xu,{padding:3,children:(0,g.jsx)(o.qb,{title:t,type:"problem"})})});e.removePreview(n)}),B(U(e),"openFileDialog",function(){e.state.imagePreviewSrc||e.state.isVideo||(e.props.logContextEvent({event_type:101,component:192,element:1156}),e.fileInputRef&&e.fileInputRef.click())}),B(U(e),"openFile",function(t){var n=t.target.files[0];e.handleFile(n)}),B(U(e),"removePreview",function(t){e.setState({imagePreviewSrc:"",progress:0,isVideo:!1,isVideoComplete:!1,videoUrls:null,errorFlyout:t}),e.fileInputRef&&(e.fileInputRef.value=""),e.xhr&&e.xhr.abort&&(e.xhr.abort(),e.xhr=null),e.CHECK_VIDEO_TIMEOUT&&clearTimeout(e.CHECK_VIDEO_TIMEOUT),e.props.onReset&&e.props.onReset()}),B(U(e),"checkForMedia",(t=R(regeneratorRuntime.mark(function t(n){var r,o,i,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.Z.create("VIPResource",{upload_ids:[n]}).callGet();case 2:(r=t.sent).resource_response&&r.resource_response.data&&r.resource_response.data[n]?(i=(o=r.resource_response.data[n]).status,a=o.signature,"processing"===i||"registered"===i?e.CHECK_VIDEO_TIMEOUT=setTimeout(function(){return e.checkForMedia(n)},1e3):"succeeded"===i?e.handleMediaUploadSuccess(a,n):e.showError(e.ERROR_MESSAGE)):e.showError(e.ERROR_MESSAGE);case 4:case"end":return t.stop()}},t)})),function(e){return t.apply(this,arguments)})),B(U(e),"loadMedia",function(t){var n=e.state.isVideo;d.Z.create("VIPResource",{type:n?"video":"triedit-image"}).callCreate().then(function(n){var r,o=null!=(r=n.resource_response.data)?r:{},i=o.upload_id,a=o.upload_url,l=o.upload_parameters;e.uploadMedia(t,i,a,l)},function(){e.showError(e.ERROR_MESSAGE)})}),B(U(e),"uploadMedia",function(t,n,r,o){var i=e.state.isVideo,a=new XMLHttpRequest;a.open("POST",r,!0),a.onload=function(){var t;(t=a.status)>=200&&t<400?e.setState({errorFlyout:null,isVideoComplete:i}):e.showError(e.props.i18n._('Something went wrong. Please try again later.', 'Error if video fails to upload', 'Error if video fails to upload')),e.checkForMedia(n)},a.upload.onprogress=function(t){var n=Math.round(99*t.loaded/t.total);e.setState({progress:n})};var l=new FormData;for(var s in o)l.append(s,o[s]);l.append("file",t),a.send(l),e.xhr=a}),e}return r=[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"handleMediaUploadSuccess",value:(n=R(regeneratorRuntime.mark(function e(t,n){var r,o,i,a,l,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.state.isVideo,i=(o=this.props).width,a=o.height,!r){e.next=12;break}if(this.props.isAuthenticated){e.next=6;break}return this.showError(this.ERROR_MESSAGE),e.abrupt("return");case 6:return e.next=8,(0,T.Z)({url:"/v3/videos/urls/",data:{signatures:[t]}});case 8:l=e.sent,this.handleVideoUploadSuccess(l,t,n),e.next=15;break;case 12:s=V(t),this.setState({imagePreviewSrc:s,progress:100}),this.props.onImageUploadFinished({image:{url:s,width:i,height:a}});case 15:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})},{key:"handleVideoUploadSuccess",value:function(e,t,n){var r=this;if(this.mounted){var o=e.resource_response.data,i="https://i.pinimg.com/".concat(o[t].metadata.thumbnail),a=o[t].urls;this.setState({videoUrls:a,thumbnail:i,progress:100});var l=new XMLHttpRequest;l.onload=function(){var e=new FileReader;e.readAsDataURL(l.response),e.onloadend=function(){var t;r.props.onImageUploadFinished({video:{uploadId:n,imageBase64:null!=(t=e.result)?t:""}})}},l.open("GET",i),l.responseType="blob",l.send()}}},{key:"render",value:function(){var e=this,t=u.NativeTypes.FILE,n=this.state,r=n.errorFlyout,i=n.imagePreviewSrc,a=n.isVideo,l=n.isVideoComplete,s=n.progress,c=n.thumbnail,d=n.videoUrls,f=this.props,p=f.allowReset,h=f.allowVideo,m=f.display,y=f.height,_=f.width;return(0,g.jsxs)(o.xu,{ref:function(t){e.containerRef=t},children:[(0,g.jsx)(o.xu,{display:"visuallyHidden",children:(0,g.jsx)("input",{ref:function(t){e.fileInputRef=t},accept:h?"image/*,video/mp4,video/quicktime":"image/*","data-gestalt-valid-html":"TextField",onChange:this.openFile,type:"file"})}),(0,g.jsx)(I,{accepts:[t],allowReset:p,display:m,handleRemoveClick:this.removePreview,height:y,imagePreviewSrc:i,isVideo:a,isVideoComplete:l,onClick:this.openFileDialog,onDrop:this.handleFileDrop,progress:s,thumbnail:c,videoUrls:d,width:_}),r]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,N(r.key),r)}}(a.prototype,r),Object.defineProperty(a,"prototype",{writable:!1}),a}(r.Component);B(Y,"defaultProps",{onImageUploadStart:function(){}});var W=function(e){var t=(0,c.u)().logContextEvent,n=(0,E.B)().isAuthenticated,r=(0,h.Z)();return(0,g.jsx)(Y,z(z({},e),{},{i18n:r,isAuthenticated:n,logContextEvent:t}))},G=n(548303),K=n(924591),X=n(577356),q=n(426130),J=n(449058);function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach(function(t){ei(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function et(e,t){return(et=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function en(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function er(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(er=function(){return!!e})()}function eo(e){return(eo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ei(e,t,n){return(t=ea(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ea(e){var t=function(e,t){if("object"!=$(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=$(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$(t)?t:t+""}var el=/#[^(. #,\/$%\^&\*;:{}=\`~()\[\]@|<>)]*$/,es=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&et(i,e);var t,n,r=(t=er(),function(){var e,n=eo(i);return e=t?Reflect.construct(n,arguments,eo(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==$(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return en(e)}(this,e)});function i(e){if(!(this instanceof i))throw TypeError("Cannot call a class as a function");ei(en(t=r.call(this,e)),"setTextAreaRef",function(e){t._textAreaRef=e}),ei(en(t),"handleTextInputChange",function(e){var n=e.value;t.setState({notes:n.substring(0,1e3)}),n.length>1e3?t.forceUpdate():t.handleHashtagTypeahead(n)}),ei(en(t),"handleHashtagTypeahead",function(e){var n=el.exec(e),r=n?n[0]:"";!t.state.inTypeahead&&r?t.setState({inTypeahead:!0,typeaheadValue:r}):t.state.inTypeahead&&(r?t.setState({typeaheadValue:r}):t.setState({inTypeahead:!1,typeaheadValue:""}))}),ei(en(t),"addHashtag",function(e){t.setState(function(t){return{inTypeahead:!1,notes:t.notes.replace(el,e),typeaheadValue:""}})}),ei(en(t),"uploadImageAndCreateDidIt",function(){(0,T.Z)({url:"/v3/did_it/image/upload/",method:"PUT",data:{image_url:t.state.imageUrlToSend}}).then(function(e){var n=e.resource_response.data.image_signature;return t.createUpdateDidIt(n)}).catch(function(){return t.createUpdateDidIt()})}),ei(en(t),"handleImageReset",function(){return t.setState({imageUrlToSend:null})}),ei(en(t),"handleFinishImageUpload",function(e){e.image&&t.setState({imageUrlToSend:e.image.url})}),ei(en(t),"handleDoneClick",function(){var e=t.props,n=e.pinId;(0,e.logContextEvent)({event_type:101,view_type:101,component:192,element:1112,object_id_str:n}),t.setState({submitted:!0}),t.handleDoneSubmission()}),ei(en(t),"handleDoneSubmission",function(){var e=t.state.imageUrlToSend,n=t.props.pinActivity;if(e){if(!n||e!==n.oldImageUrl)return t.uploadImageAndCreateDidIt();else if(n.imageSignatures&&n.imageSignatures.length>0)return t.createUpdateDidIt(n.imageSignatures[0])}return t.createUpdateDidIt()}),ei(en(t),"handleCancel",function(){var e=t.props.onDoneStateChanged;e&&e(!1)}),ei(en(t),"handleDeleteConfirmation",function(e){var n=t.props,r=n.aggregatedPinDataId,o=n.deleteUserDidItData,i=n.isDoneByMe,a=n.loggedInUser.username,l=n.onDoneStateChanged,s=n.pinId,c=n.logContextEvent;t.setState({showDeleteModal:!1}),e&&(c({event_type:101,view_type:101,component:192,element:1264,object_id_str:s}),o({aggregatedPinDataId:r,pinId:s,username:a,id:e,isOwnedByMe:!0}),l&&l(i))}),ei(en(t),"handleShowDeleteModal",function(){return t.setState({showDeleteModal:!0})});var t,n=e.pinActivity;return t.state={id:(null==n?void 0:n.id)||null,imageUrlToSend:(null==n?void 0:n.oldImageUrl)||null,inTypeahead:!1,notes:(null==n?void 0:n.notes)||"",showDeleteModal:!1,submitted:!1,typeaheadValue:""},t}return n=[{key:"createUpdateDidIt",value:function(e){var t=this,n=this.props,r=n.aggregatedPinDataId,o=n.createUserDidItData,i=n.isDoneByMe,a=n.loggedInUser.username,l=n.onDoneStateChanged,s=n.pinId,c=n.toastManagerContext,u=n.updateUserDidItData,d=this.state,f=d.id,p=d.notes;p&&(i?f&&u({id:f,pinId:s,details:p,image_signatures:e?[e]:[]}):o({aggregatedPinDataId:r,username:a,details:p,image_signatures:e?[e]:[],pin_id:s}),l&&l(!i),-1===window.location.href.indexOf(a+"/tried")&&c.showToast(function(e){var n=e.hideToast;return(0,g.jsx)(K.Z,{duration:3e3,href:"/".concat(a,"/tried/"),onHide:n,text:t.props.i18n._('Nice work! Pins you\'ve tried live on your profile', 'Congratulations after trying a pin', 'Congratulations after trying a pin')})}))}},{key:"render",value:function(){var e=this.state,t=e.imageUrlToSend,n=e.notes,r=e.showDeleteModal,i=e.submitted,a=this.props,l=a.isDoneByMe,c=a.pinActivity,u=!!t&&(c||{}).oldImageUrl!==t,d=!!t,f=c&&c.notes!==n,p=!!n&&""!==n.trim();return(0,g.jsxs)(o.xu,{children:[(0,g.jsx)(o.xu,{marginTop:4,paddingX:12,children:(0,g.jsx)(o.xu,{column:12,children:(0,g.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{transition:"padding-top 0.2s ease"}},paddingY:10*!t,children:(0,g.jsx)(o.xu,{alignItems:"center",color:"transparent",column:12,display:"flex",justifyContent:"center",marginBottom:2,rounding:2,children:(0,g.jsx)(W,{display:"image",existingImageSrc:t,height:366,idealErrorDirection:"up",onImageUploadFinished:this.handleFinishImageUpload,onReset:this.handleImageReset,width:366})})})})}),(0,g.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{transition:"opacity 0.2s ease",transitionDelay:"0.2s",visibility:t?"visible":"hidden"}},height:t?"auto":0,opacity:+!!t,children:(0,g.jsxs)(o.xu,{margin:3,marginEnd:"auto",marginStart:"auto",width:366,children:[(0,g.jsx)(o.xu,{ref:this.setTextAreaRef,children:(0,g.jsx)(o.Kx,{id:"trynotes",onChange:this.handleTextInputChange,placeholder:this.props.i18n._('Add a note or tip', 'Tip input for tried it', 'Tip input for tried it'),value:n})}),this.state.inTypeahead&&this._textAreaRef?(0,g.jsx)(J.Z,{addHashtag:this.addHashtag,anchor:this._textAreaRef,idealDirection:"up",query:this.state.typeaheadValue}):null,n.length>900&&(0,g.jsx)(o.xu,{paddingY:1,children:(0,g.jsxs)(o.xv,{align:"end",size:"200",children:[" ",n.length,"/",1e3," "]})})]})}),(0,g.jsxs)(o.kC,{alignItems:"stretch",justifyContent:"end",children:[r&&(0,g.jsx)(s.Z,{didItData:c,onDeleteConfirmation:this.handleDeleteConfirmation}),i?(0,g.jsx)(o.xu,{marginEnd:2,children:(0,g.jsx)(o.xH,{accessibilityLabel:this.props.i18n._('submit', 'accessible label for loading spinner on submit button', 'accessible label for loading spinner on submit button'),show:!0})}):null,(0,g.jsxs)(o.xu,{display:"flex",marginBottom:3,marginEnd:4,children:[l?(0,g.jsx)(o.xu,{marginEnd:1,children:(0,g.jsx)(o.zx,{onClick:this.handleShowDeleteModal,size:"md",text:this.props.i18n._('Delete', 'delete button in modal for tried-it info', 'delete button in modal for tried-it info')})}):(0,g.jsx)(o.xu,{marginEnd:1,children:(0,g.jsx)(o.zx,{onClick:this.handleCancel,size:"md",text:this.props.i18n._('Cancel', 'cancel button in modal for tried-it info', 'cancel button in modal for tried-it info')})}),(0,g.jsx)(o.xu,{children:(0,g.jsx)(o.zx,{color:"red",disabled:!d||!p||!f&&!u,onClick:this.handleDoneClick,size:"md",text:this.props.i18n._('Done', 'done button in modal for tried-it info', 'done button in modal for tried-it info')})})]})]})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ea(r.key),r)}}(i.prototype,n),Object.defineProperty(i,"prototype",{writable:!1}),i}(r.PureComponent),ec=(0,G.Z)(function(e){var t=(0,c.u)().logContextEvent,n=(0,h.Z)(),r=(0,a.I0)(),o=(0,l.bindActionCreators)(q.DD,r),i=(0,l.bindActionCreators)(q.lg,r),s=(0,l.bindActionCreators)(q.IU,r);return(0,g.jsx)(es,ee(ee({},e),{},{createUserDidItData:o,deleteUserDidItData:i,i18n:n,logContextEvent:t,toastManagerContext:(0,X.dI)(),updateUserDidItData:s}))}),eu=n(661376),ed=["onDoneStateChanged","pinActivityResource","pinTitle","userDidItDataId"];function ef(e){return(ef="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ep(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ep(Object(n),!0).forEach(function(t){eb(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ep(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function em(e,t){return(em=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ey(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eg(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(eg=function(){return!!e})()}function e_(e){return(e_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eb(e,t,n){return(t=ev(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ev(e){var t=function(e,t){if("object"!=ef(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ef(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ef(t)?t:t+""}var ex=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),e&&em(a,e);var t,n,r=(t=eg(),function(){var e,n=e_(a);return e=t?Reflect.construct(n,arguments,e_(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==ef(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return ey(e)}(this,e)});function a(){var e;if(!(this instanceof a))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return eb(ey(e=r.call.apply(r,[this].concat(n))),"onDoneStateChanged",function(t){var n=e.props,r=n.onDoneStateChanged,o=n.pinActivityResource;r&&r(t),t&&o&&o.refresh&&o.refresh()}),e}return n=[{key:"render",value:function(){var e=this.props,t=(e.onDoneStateChanged,e.pinActivityResource),n=(e.pinTitle,e.userDidItDataId,function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&({}).propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,ed));return!t||t&&t.isLoaded?(0,g.jsx)(o.xu,{rounding:2,children:(0,g.jsx)(ec,eh({onDoneStateChanged:this.onDoneStateChanged,pinActivity:function(e){if(!e)return null;var t=e.details,n=e.images,r=e.image_signatures;return{id:e.id,imageSignatures:r,notes:t,oldImageUrl:n[0]["200x"].url}}(t&&t.data)},n))}):(0,g.jsx)(i.Z,{})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ev(r.key),r)}}(a.prototype,n),Object.defineProperty(a,"prototype",{writable:!1}),a}(r.Component);function ej(e){var t=(0,eu.Z)({name:"DidItActivityResource",options:{user_did_it_data_id:e.userDidItDataId,username:"me"},noCache:!0});return(0,g.jsx)(ex,eh(eh({},e),{},{pinActivityResource:t}))}function eP(e){return e.isDoneByMe?(0,g.jsx)(ej,eh({},e)):(0,g.jsx)(ex,eh({},e))}var ew=n(465784),eO=n(569377);function eC(e){return(eC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eS(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=eC(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=eC(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==eC(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eS(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var eI=function(e){if(!e)return null;var t=e.richMetadata.title;return t?eA(eA({},e),{},{title:t}):null},eT=n(438303),eE=n(180483);function ek(e){return(ek="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ez(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eD(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=eM(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eD(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function eM(e){var t=function(e,t){if("object"!=ek(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ek(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ek(t)?t:t+""}function eR(e,t){return(eR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function eL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(eL=function(){return!!e})()}function eU(e){return(eU=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var eH=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),e&&eR(a,e);var t,n,r=(t=eL(),function(){var e,n=eU(a);return e=t?Reflect.construct(n,arguments,eU(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==ek(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this,e)});function a(){if(!(this instanceof a))throw TypeError("Cannot call a class as a function");return r.apply(this,arguments)}return n=[{key:"render",value:function(){var e=this.props,t=e.aggregatedPinDataId,n=e.isDoneByMe,r=e.loggedInUser,a=e.onDoneStateChanged,l=e.onHide,s=e.pinId,c=e.pinResource,u=e.pinTitle,d=e.userDidItDataId;if(!c.isLoaded)return(0,g.jsx)(i.Z,{});var f=(eI((0,eO.Z)((0,eT.Z)({pin:c.data})))||{}).title,p=u||f?(0,eE.Z)(this.props.i18n._('Add a photo of {{pinTitle}}', 'Adding photo of a pin', 'Adding photo of a pin'),{pinTitle:u||f||""}):this.props.i18n._('Add a photo', 'Adding a photo', 'Adding a photo');return(0,g.jsx)(ew.ZP,{accessibilityModalLabel:p,heading:p,onDismiss:l,size:500,children:(0,g.jsx)(o.xu,{color:"default",display:"flex",justifyContent:"center",rounding:2,children:(0,g.jsx)(eP,{aggregatedPinDataId:t,isDoneByMe:n,loggedInUser:r,onDoneStateChanged:a,pinId:s,pinTitle:u||f,userDidItDataId:d})})})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,eM(r.key),r)}}(a.prototype,n),Object.defineProperty(a,"prototype",{writable:!1}),a}(r.PureComponent);function eZ(e){var t=(0,h.Z)(),n=(0,eu.Z)({name:"PinResource",options:{field_set_key:"detailed",id:e.pinId}});return(0,g.jsx)(eH,ez(ez({},e),{},{i18n:t,pinResource:n}))}var eB=n(943152);function eN(e){return(eN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eV(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eF(Object(n),!0).forEach(function(t){eX(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eF(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function eY(e,t){return(eY=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function eW(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(eG=function(){return!!e})()}function eK(e){return(eK=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eX(e,t,n){return(t=eq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eq(e){var t=function(e,t){if("object"!=eN(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=eN(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==eN(t)?t:t+""}var eJ=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&eY(i,e);var t,n,o=(t=eG(),function(){var e,n=eK(i);return e=t?Reflect.construct(n,arguments,eK(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==eN(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return eW(e)}(this,e)});function i(){var e;if(!(this instanceof i))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return eX(eW(e=o.call.apply(o,[this].concat(n))),"state",{showModal:!1}),eX(eW(e),"onTriedItButtonClick",function(t){var n=e.props,r=n.requireAuth,o=n.logContextEvent;if(t&&t.stopPropagation(),r)return void r();e.handleModalStateChange(!0),o({event_type:101,view_type:101,component:e.props.thriftComponentType,element:1141,object_id_str:e.props.pinId,aux_data:{is_create:!e.props.isDoneByMe}})}),eX(eW(e),"handleHideModal",function(){e.handleModalStateChange(!1),e.props.logContextEvent({event_type:101,view_type:101,component:192,element:75,object_id_str:e.props.pinId})}),eX(eW(e),"onModalDoneStateChanged",function(t){e.handleModalStateChange(!1,t)}),eX(eW(e),"handleModalStateChange",function(t,n){var r=e.props,o=r.onDoneStateChanged,i=r.onToggleModal;e.setState({showModal:t},function(){!t&&o&&o("boolean"==typeof n&&n),i&&i(t)})}),e}return n=[{key:"render",value:function(){var e=this.props,t=e.aggregatedPinDataId,n=e.isDoneByMe,o=e.loggedInUser,i=e.pinId,a=e.pinTitle,l=e.userDidItDataId;return(0,g.jsxs)(r.Fragment,{children:[this.props.children({onTriedItButtonClick:this.onTriedItButtonClick}),this.state.showModal?(0,g.jsx)(eZ,{aggregatedPinDataId:void 0===t?"":t,isDoneByMe:void 0!==n&&n,loggedInUser:void 0===o?{id:"",username:""}:o,onDoneStateChanged:this.onModalDoneStateChanged,onHide:this.handleHideModal,pinId:void 0===i?"":i,pinTitle:null!=a?a:"",userDidItDataId:l}):null]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,eq(r.key),r)}}(i.prototype,n),Object.defineProperty(i,"prototype",{writable:!1}),i}(r.PureComponent);function e$(e){var t=(0,c.u)().logContextEvent,n=(0,eB.Z)();return(0,g.jsx)(eJ,eV(eV({},e),{},{logContextEvent:t,requireAuth:n}))}},327730:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(20256),o=n(465784),i=n(24246),a=n(680811);function l(e){var t=e.onDeleteConfirmation,n=e.didItData,l=(0,i.Z)(),s=n&&n.id,c=l._('Are you sure?', 'Confirmation dialog for deleting data', 'Confirmation dialog for deleting data');return(0,a.jsx)(o.ZP,{accessibilityModalLabel:l._('Are you sure you want to delete the did it photo?', 'Label for a modal showing to confirm deleting a did it photo', 'Label for a modal showing to confirm deleting a did it photo'),footer:(0,a.jsxs)(r.xu,{display:"flex",justifyContent:"end",marginEnd:-1,marginStart:-1,children:[(0,a.jsx)(r.xu,{padding:1,children:(0,a.jsx)(r.zx,{fullWidth:!0,onClick:function(){return t(null)},size:"lg",text:l._('Cancel', 'Cancel the deleting data in a modal form', 'Cancel the deleting data in a modal form')})}),(0,a.jsx)(r.xu,{padding:1,children:(0,a.jsx)(r.zx,{color:"red",dataTestId:"delete-did-it-button",fullWidth:!0,onClick:function(){t(s)},size:"lg",text:l._('Delete', 'Confirmation of deleting data', 'Confirmation of deleting data')})})]}),heading:c,onDismiss:function(){return t(null)},role:"alertdialog",size:"sm",children:(0,a.jsx)(r.xu,{paddingX:4,paddingY:2,children:(0,a.jsx)(r.xv,{children:l._('This will remove this photo', 'Confirmation dialog for deleting data', 'Confirmation dialog for deleting data')})})})}},591200:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(20256),o=n(24246),i=n(680811);function a(){var e=(0,o.Z)();return(0,i.jsx)(r.xu,{alignItems:"center",color:"default",dangerouslySetInlineStyle:{__style:{outline:"none"}},display:"flex",height:155,justifyContent:"center",rounding:2,width:300,children:(0,i.jsx)(r.xH,{accessibilityLabel:e._('Tried it', ' - ', ' -- '),show:!0})})}},358285:function(e,t,n){n.d(t,{Z:function(){return tl}});var r,o=n(387784),i=n(581722),a=n(805674),l=n(20256),s=n(405897),c=n(680811),u="__SafeLinkFlag__",d=function(e){var t=e.html,n=e.onClick||null,r=[],o=(t=(t=t||"").replace(/#[^(\-\\.\s#,\/$%\^&\*;:{}=\`~()\[\]@|<>)]+/gi,function(e){return r.push({url:"/search/pins/?q=".concat(encodeURIComponent(e),"&rs=").concat(s.i.HASHTAG_CLOSEUP),text:e}),u})).replace(/<a[\s]+href=['"]([^'"<>]+)['"][^>]*>([^<]*)<\/a>/gi,function(e,t,n){return r.push({url:t,text:n}),u});return(0,c.jsx)(l.xu,{"data-test-id":"safe-link",children:o.split(new RegExp("(".concat(u,")"))).filter(function(e){return e.length>0}).map(function(e,t){var o=e;if(e===u&&r.length){var i=r.shift(),a=i.url,s=i.text;o=(0,c.jsx)(l.rU,{display:"inlineBlock",href:a,onClick:n||void 0,underline:"hover",children:s})}return(0,c.jsx)(l.xv,{color:"default",inline:!0,weight:"bold",children:o},t)})})};n(115821);var f=n(653551),p=n(377436),h=n(465784),m=function(e){var t=e.accessibilityModalLabel,n=e.cancelButtonText,r=e.confirmButtonText,o=e.detail,i=e.heading,a=e.onConfirm,s=e.onDismiss;return(0,c.jsx)(h.ZP,{accessibilityModalLabel:t,heading:i,onDismiss:s,size:"md",children:(0,c.jsxs)(l.xu,{children:[(0,c.jsx)(l.xu,{padding:4,children:(0,c.jsx)(l.xv,{children:o})}),(0,c.jsxs)(l.kC,{alignItems:"stretch",justifyContent:"end",children:[(0,c.jsx)(l.xu,{margin:2,children:(0,c.jsx)(l.xu,{"data-test-id":"confirm-modal-cancel",children:(0,c.jsx)(l.zx,{fullWidth:!0,onClick:s,text:n})})}),(0,c.jsx)(l.xu,{margin:2,children:(0,c.jsx)(l.xu,{"data-test-id":"confirm-modal-confirm",children:(0,c.jsx)(l.zx,{color:"red",fullWidth:!0,onClick:function(){a(),s()},text:r})})})]})]})})},y=n(24246),g=n(59111);function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var b=(0,o.forwardRef)(function(e,t){var n,r=e.isCloseup,i=e.isEmojiTrayOpen,a=e.onClick,s=function(e){if(Array.isArray(e))return e}(n=(0,o.useState)(!1))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{for(i=(n=n.call(e)).next;!(s=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(n,2)||function(e,t){if(e){if("string"==typeof e)return _(e,2);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,2):void 0}}(n,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),u=s[0],d=s[1],f=(0,l.JZ)(),p=(0,y.Z)(),h=(0,o.useRef)(null);(0,o.useEffect)(function(){t&&(t.current=h.current)},[t]);var m=function(){null==a||a()},b=p._('Select an emoji', 'emojitray.button.accessibilityLabel', 'Accessibility label for emoji tray button');return(0,c.jsx)(l.xu,{color:i?"secondary":"transparent","data-test-id":"emoji-selector",display:"flex",justifyContent:"center",rounding:"circle",children:void 0!==r&&r?(0,c.jsx)(l.xu,{ref:h,children:(0,c.jsx)(l.hU,{accessibilityLabel:b,icon:"face-smiley",iconColor:"darkGray",onClick:m,size:"lg"})}):(0,c.jsx)(l.iP,{ref:h,accessibilityLabel:b,fullWidth:!1,onMouseEnter:function(){d(!0)},onMouseLeave:function(){d(!1)},onTap:m,rounding:"circle",children:(0,c.jsxs)(o.Fragment,{children:[(0,c.jsx)(g.Z,{unsafeCSS:"@keyframes wiggle {\n        0% {transform: rotate(0deg);}\n        25% {transform: rotate(15deg);}\n        50% {transform: rotate(-15deg);}\n        75% {transform: rotate(15deg);}\n        100% {transform: rotate(0deg);}\n      }"}),(0,c.jsx)(l.xu,{ref:t,alignItems:"center",dangerouslySetInlineStyle:{__style:u&&!f?{fontSize:"24px",animationName:"wiggle",animationDuration:"0.9s"}:{fontSize:"24px"}},display:"flex",height:40,justifyContent:"center",width:40,children:"\uD83D\uDE03"})]})})})}),v=n(230201),x=n(548303),j=n(935059),P=n(107889),w=n(123215),O=n(649766);function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach(function(t){z(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function T(e,t){return(T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function E(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(k=function(){return!!e})()}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,t,n){return(t=M(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e){var t=function(e,t){if("object"!=C(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=C(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==C(t)?t:t+""}var R={isTextChanged:!1,showConfirmDiscardModal:!1,submissionInProgress:!1,textValue:"",userMentionOverLimitError:!1},L=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&T(o,e);var t,n,r=(t=k(),function(){var e,n=D(o);return e=t?Reflect.construct(n,arguments,D(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==C(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return E(e)}(this,e)});function o(){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return z(E(e=r.call.apply(r,[this].concat(n))),"state",I(I({},R),{},{tags:e.props.tags||[],textValue:e.props.text||"",isEmojiTrayOpen:!1})),z(E(e),"handleFocus",function(){e.props.onEnter()}),z(E(e),"handleChange",function(t){var n=t.text,r=t.mentions;r.length<e.state.tags.length&&e.props.logContextEvent({event_type:8906,aux_data:{tag_type:1}});var o=e.props.text||"";e.setState({isTextChanged:o!==n,textValue:n,tags:r,userMentionOverLimitError:r.length>5})}),z(E(e),"handleOnClickEdit",function(){var t=e.props.onEditItem,n=e.state,r={contentMarkdown:n.textValue,imageSignatures:"",objectIds:[],tags:JSON.stringify(n.tags)};t&&t(r),e.setState({submissionInProgress:!1})}),z(E(e),"handleOnClickPost",function(){e.state.userMentionOverLimitError||(e.setState({submissionInProgress:!0,isEmojiTrayOpen:!1}),e.handleOnClickPostFinal())}),z(E(e),"handleOnClickPostFinal",function(){var t=e.props.onAddItem,n=e.state,r={contentMarkdown:n.textValue,imageSignatures:"",objectIds:[],tags:JSON.stringify(n.tags)};t&&t(r),e.setState(R)}),z(E(e),"handleOnFinalDiscardItem",function(){var t=e.props.onCancelItem;e.setState(R),t()}),z(E(e),"isSubmitEditDisabled",function(){return!e.state.isTextChanged}),z(E(e),"toggleShowConfirmDiscardModal",function(){var t=e.state.showConfirmDiscardModal;e.setState({showConfirmDiscardModal:!t,isEmojiTrayOpen:!1})}),z(E(e),"renderConfirmDiscardModal",function(){var t,n;return"textInFlightNested"===e.props.statusType?(t=e.props.i18n._('Your changes will be discarded', 'Confirmation dialog before discarding changes', 'Confirmation dialog before discarding changes'),n=e.props.i18n._('Discard changes', 'Clear edits', 'Clear edits')):(t=e.props.i18n._('Once you delete a draft, you can\u2019t undo it', 'Confirmation before discarding changes', 'Confirmation before discarding changes'),n=e.props.i18n._('Delete', 'delete draft of a post or comment', 'delete draft of a post or comment')),(0,c.jsx)(m,{accessibilityModalLabel:e.props.i18n._('Confirm discard composer', 'Confirm discarding a post or comment', 'Confirm discarding a post or comment'),cancelButtonText:e.props.i18n._('Cancel', 'Cancel discarding a post or comment', 'Cancel discarding a post or comment'),confirmButtonText:n,detail:t,heading:e.props.i18n._('Are you sure?', 'Confirm discarding a post or comment', 'Confirm discarding a post or comment'),onConfirm:e.handleOnFinalDiscardItem,onDismiss:e.toggleShowConfirmDiscardModal})}),z(E(e),"getReplyToEntity",function(e){return[e?"@".concat(e.user.username," "):"",e?[{offset:0,object_id:e.user.id,length:e.user.username.length+1,tag_type:1}]:[]]}),e}return n=[{key:"isAggregatedComment",get:function(){var e=this.props.objectType;return e===P.o.pin||e===P.o.didIt||e===P.o.aggregatedComment}},{key:"render",value:function(){var e,t,n,r=this,o=this.props,i=o.avatarSize,a=o.replyToObject,s=o.privatePin,u=o.statusType,d=o.viewingUser,f=this.state,h=f.isTextChanged,m=f.isEmojiTrayOpen,y=f.showConfirmDiscardModal,g=f.submissionInProgress,_=f.tags,v=f.textValue,x=f.userMentionOverLimitError,j=function(e){if(Array.isArray(e))return e}(e=this.getReplyToEntity(a))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{for(i=(n=n.call(e)).next;!(s=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,2)||function(e,t){if(e){if("string"==typeof e)return S(e,2);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,2):void 0}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),P=j[0],C=j[1],A=(0,c.jsx)(l.xu,{children:(0,c.jsx)(l.xv,{align:"end",color:"error",size:"100",children:(0,O.bl)(!1,this.props.i18n)})});return(t=this.isAggregatedComment&&s?this.props.i18n._('Add a public comment', 'Add a comment', 'Add a comment'):this.isAggregatedComment?this.props.i18n._('Add a comment', 'Prompt to add a comment', 'Prompt to add a comment'):this.props.i18n._('Reply', 'Adding text to a community comment', 'Adding text to a community comment'),n=this.isAggregatedComment?this.props.i18n._('Done', 'Post a top level comment on a pin or tried it', 'Post a top level comment on a pin or tried it'):this.props.i18n._('Reply', 'Posting a reply to a post or comment', 'Posting a reply to a post or comment'),"textInflightCreation"===u)?(0,c.jsxs)(l.xu,{column:12,display:"flex",justifyContent:"center",children:[(0,c.jsxs)(l.xu,{width:"100%",children:[(0,c.jsxs)(l.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,c.jsx)(l.xu,{marginEnd:2,children:(0,c.jsx)(p.Z,{size:i,userKey:{type:"Legacy",data:d}})}),(0,c.jsx)(l.xu,{borderStyle:"sm",flex:"grow",padding:3,rounding:4,children:(0,c.jsx)(w.Z,{focusOnMount:!0,initialMentions:C,initialText:P,onAddMention:function(){r.props.logContextEvent({event_type:8905,aux_data:{tag_type:1}})},onChange:this.handleChange,onSearchMentionCancel:function(){r.props.logContextEvent({event_type:8908,aux_data:{tag_type:1}})},onSuggestionsPopoverOpen:function(){r.props.logContextEvent({event_type:8907,aux_data:{tag_type:1}})},placeholder:t})})]}),x&&A,(0,c.jsxs)(l.xu,{display:"flex",justifyContent:"end",marginTop:4,children:[(0,c.jsx)(l.xu,{"data-test-id":"activity-item-create-cancel",children:(0,c.jsx)(l.zx,{color:"gray",onClick:h?this.toggleShowConfirmDiscardModal:this.handleOnFinalDiscardItem,text:this.props.i18n._('Cancel', 'Cancel making post or comment', 'Cancel making post or comment')})}),(0,c.jsx)(l.xu,{marginStart:2,children:(0,c.jsx)(l.xu,{"data-test-id":"activity-item-create-submit",children:(0,c.jsx)(l.zx,{color:"red",disabled:!h||g||!v.length,onClick:this.handleOnClickPost,text:n})})})]})]}),y&&this.renderConfirmDiscardModal()]}):"textInFlightNested"===u?(0,c.jsxs)(l.xu,{column:12,"data-test-id":"activity-item-create",display:"flex",justifyContent:"center",children:[(0,c.jsxs)(l.xu,{width:"100%",children:[(0,c.jsx)(l.kC,{alignItems:"stretch",justifyContent:"start",children:(0,c.jsx)(l.xu,{borderStyle:"sm",flex:"grow",padding:3,rounding:4,children:(0,c.jsx)(w.Z,{focusOnMount:!0,initialMentions:_,initialText:v,onAddMention:function(){r.props.logContextEvent({event_type:8905,aux_data:{tag_type:1}})},onChange:this.handleChange,onSearchMentionCancel:function(){r.props.logContextEvent({event_type:8908,aux_data:{tag_type:1}})},onSuggestionsPopoverOpen:function(){r.props.logContextEvent({event_type:8907,aux_data:{tag_type:1}})},placeholder:t})})}),x&&A,(0,c.jsxs)(l.xu,{display:"flex",justifyContent:"end",marginTop:4,children:[(0,c.jsx)(l.zx,{color:"gray",onClick:h?this.toggleShowConfirmDiscardModal:this.handleOnFinalDiscardItem,text:this.props.i18n._('Cancel', 'Cancel making post or comment', 'Cancel making post or comment')}),(0,c.jsx)(l.xu,{marginStart:2,children:(0,c.jsx)(l.zx,{color:"red",disabled:this.isSubmitEditDisabled()||g,onClick:this.handleOnClickEdit,text:this.props.i18n._('Save', 'comment save button', 'comment save button')})})]})]}),y&&this.renderConfirmDiscardModal()]}):(0,c.jsx)(l.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{cursor:"text"}},display:"flex",justifyContent:"between",rounding:2,children:(0,c.jsx)(l.iP,{"aria-label":this.props.i18n._('Add comment field', 'ActivityItemCreate.textbox.accessibilityLabel', 'Textbox for comment field.'),mouseCursor:"default",onKeyDown:this.handleFocus,onTap:this.handleFocus,tabIndex:0,children:(0,c.jsxs)(l.xu,{column:12,display:"flex",children:[(0,c.jsx)(l.xu,{width:48,children:(0,c.jsx)(p.Z,{size:i,userKey:{type:"Legacy",data:d}})}),(0,c.jsxs)(l.xu,{alignItems:"center",borderStyle:"sm",dangerouslySetInlineStyle:{__style:{borderRadius:"26px"}},display:"flex",height:48,marginStart:4,padding:4,width:"100%",children:[(0,c.jsx)("textarea",{"data-gestalt-valid-html":"TextArea","data-test-id":"communityItemTextBox",maxLength:2e3,name:"communityItemTextBox",onFocus:this.handleFocus,placeholder:t,rows:1,style:{background:"transparent",border:"0",display:h?"inline-block":"block",minHeight:"textStaticDisplay"===u?"":"50px",fontSize:"16px",outline:"0",overflowX:"hidden",resize:"none",whiteSpace:"pre-wrap",width:"100%"}}),(0,c.jsx)(b,{isEmojiTrayOpen:m,onClick:function(){r.setState({isEmojiTrayOpen:!m})}})]})]})})})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,M(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(o.Component);z(L,"defaultProps",{imageSignature:"",onEnter:function(){},text:"",widthAuto:!1});var U=(0,x.Z)(function(e){var t=(0,v.u)().logContextEvent,n=(0,y.Z)(),r=(0,j.Z)(),o=r.isAuth?{image_medium_url:r.imageMediumUrl,type:"user",username:r.username,full_name:r.fullName,first_name:"",id:""}:{id:"",type:"user",username:""};return(0,c.jsx)(L,I(I({},e),{},{i18n:n,logContextEvent:t,viewingUser:o}))}),H=n(371048),Z=n(409521),B=n(400411);function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){return(F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function V(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Y=function(){return!!e})()}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function G(e,t,n){return(t=K(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K(e){var t=function(e,t){if("object"!=N(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=N(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==N(t)?t:t+""}var X=(0,n(9065).Z)(function(){return n.e("15564").then(n.bind(n,129460))},void 0,function(e){return 129460},"app-common-react-components-Activities-Utils-Linkify",function(e){return ["15564"]}),q=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&F(o,e);var t,n,r=(t=Y(),function(){var e,n=W(o);return e=t?Reflect.construct(n,arguments,W(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==N(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return V(e)}(this,e)});function o(){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return G(V(e=r.call.apply(r,[this].concat(n))),"parseText",function(){var t=e.props,n=t.tags,r=t.taggedUsers,o=t.text,i=t.size;if(!n.length||!r||n.length!==r.length)return e.renderRegularText(o,"1");var a=0,s=[];return n.forEach(function(t,n){var r=o.substring(a,t.offset);a=t.offset+t.length;var i=o.substring(t.offset,a);s=s.concat(e.renderRegularText(r,"".concat(n,"a"))).concat(e.renderTaggedText(i,n,"".concat(n,"b")))}),s=s.concat(e.renderRegularText(o.substring(a),"2")),(0,c.jsx)(l.xv,{inline:!0,overflow:"normal",size:i,children:s})}),G(V(e),"renderRegularText",function(t,n){return(0,c.jsx)(l.xv,{inline:!0,overflow:"normal",size:e.props.size,children:e.props.allowLink?(0,c.jsx)(X,{children:t}):t},n)}),G(V(e),"renderTaggedText",function(t,n,r){return(0,c.jsx)(l.xv,{color:"default",inline:!0,overflow:"normal",size:e.props.size,weight:"bold",children:(0,c.jsx)(l.rU,{display:"inlineBlock",href:"/".concat(e.props.taggedUsers[n].username),underline:"hover",children:t})},r)}),e}return n=[{key:"render",value:function(){return(0,c.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{whiteSpace:"pre-wrap",wordWrap:"break-word"}},children:this.parseText()})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,K(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(o.PureComponent);G(q,"defaultProps",{allowLink:!0,size:"200"});var J=n(233130),$=n(761237),Q=n(995514);function ee(e){var t=e.createdAt,n=e.user,r=e.isHighlighted,o=(0,y.Z)(),i=(0,Q.Z)(),a=(0,c.jsx)(l.xv,{color:"subtle",size:"200",children:(0,$.A7)(t,o,i)}),s=(0,c.jsxs)(l.xv,{color:"subtle",size:"200",children:["\xb7 ",o._('Highlighted', 'pin.comments.highlight', 'Identifier for highlighted comments')]});return(0,c.jsxs)(l.xu,{alignItems:"start",display:"flex",marginEnd:-1,marginStart:-1,children:[(0,c.jsx)(l.xu,{paddingX:1,children:(0,c.jsx)(l.xv,{size:"200",weight:"bold",children:(0,c.jsx)(l.rU,{href:"/".concat(n.username,"/"),children:(0,$.YD)(n)})})}),(0,c.jsx)(l.xu,{paddingX:1,children:a}),r&&(0,c.jsx)(l.xu,{paddingX:1,children:s})]})}var et=n(734473),en=n(661376),er=n(825605),eo=n(653247),ei=n(285676),ea=n(849877);function el(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function es(e){var t,n=e.avatarSize,r=e.commentCount,i=e.contentImageSignature,a=e.contentText,s=e.flyout,u=e.handleOnEditCancel,d=e.handleOnEdited,f=e.handleHelpfulClick,h=e.handleLikeClick,m=e.handleReplyClick,g=e.handleReplyCountClick,_=e.helpfulCount,b=e.hideAddObjects,v=e.hideReplyCount,x=e.inEditMode,j=e.isHighlighted,P=e.isLikedByMe,w=e.isMarkedHelpfulByMe,O=e.isPlainComment,C=e.parentObject,S=e.reactionCounts,A=e.responsePinId,I=e.slotIndex,T=e.taggedUsers,E=e.tags,k=e.truncateText,D=e.commentId,z=e.createdAt,M=e.commentAuthor,R=e.type,L=e.isORBACProfileManager,H=(0,et.K)(),Z=(0,y.Z)(),N=function(e){if(Array.isArray(e))return e}(t=(0,o.useState)(D===H))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{for(i=(n=n.call(e)).next;!(s=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,2)||function(e,t){if(e){if("string"==typeof e)return el(e,2);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?el(e,2):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),F=N[0],V=N[1],Y=(0,en.Z)(A?{name:"PinResource",options:{id:A,field_set_key:"detailed"}}:null),W=Y.isLoaded,G=Y.data;(0,o.useEffect)(function(){D===H&&B.Z.setTimeout(function(){V(!1)},1500)},[]);var K=W&&!!A;return(0,c.jsx)(l.xu,{"data-test-id":"canonical-comment",children:(0,c.jsxs)(l.xu,{display:"flex",marginBottom:4*!!O,children:[(0,c.jsx)(l.xu,{marginEnd:2,children:(0,c.jsx)(p.Z,{size:void 0===n?"sm":n,userKey:{type:"Legacy",data:M}})}),(0,c.jsxs)(l.xu,{flex:"grow",marginStart:2,children:[(0,c.jsx)(l.xu,{borderStyle:"sm",dangerouslySetInlineStyle:{__style:{borderColor:x?"transparent":void 0,transition:"".concat(1e3,"ms"),backgroundColor:F?"lightGray":void 0}},padding:3*!x,rounding:4,children:x?(0,c.jsx)(U,{hideAddObjects:b,imageSignature:i,objectType:R,onAddItem:function(){},onCancelItem:u,onEditItem:d,onEnter:function(){},parentObjectId:C.id,statusType:"textInFlightNested",tags:E,text:a,widthAuto:!0}):(0,c.jsxs)(o.Fragment,{children:[(0,c.jsx)(ee,{createdAt:z,isHighlighted:j,user:M}),k?(0,c.jsx)(J.Z,{allowReveal:!0,size:"100",taggedUsers:T,tags:E,text:a}):(0,c.jsx)(q,{size:"100",taggedUsers:T,tags:E,text:a}),A&&K&&G&&(0,c.jsx)(er.Z,{fallback:(0,c.jsx)(eo.Z,{accessibilityLabel:Z._('Loading comment reply Pin preview', 'Loading pin previews for comment reply comments component', 'Loading pin previews for comment reply comments component')}),children:(0,c.jsx)(l.xu,{marginTop:1,maxWidth:"21%",children:(0,c.jsx)(ei.r,{pinKey:{type:"Legacy",data:G},slotIndex:I,surface:"CommentReply"})})})]})}),!L&&!K&&!x&&!O&&(0,c.jsx)(l.xu,{padding:1,children:(0,c.jsx)(ea.Z,{commentCount:r,flyout:x?null:s,helpfulCount:_,hideReplyCount:v,isLikedByMe:P,isMarkedHelpfulByMe:w,onHelpfulClick:f,onLikeClick:h,onReplyClick:m,onReplyCountClick:g,reactionCounts:S,small:!0})})]})]})})}var ec=n(331128),eu=n(381813),ed=n(302861),ef=n(458465),ep=n(924591),eh=n(79271),em=n(233597),ey=n(696749),eg=n(577356),e_=n(264267),eb=n(118376),ev=n(872003),ex=n(265994),ej=n(826681),eP=n(228612),ew=n(985543);function eO(e,t,n,r,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function eC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return eS(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?eS(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var eA=function(e){var t,n,r=e.aggregatedCommentId,a=e.apdId,s=e.creatorId,u=e.depth,d=e.didItOwnerId,f=e.isManagedView,p=e.objectType,g=e.onUpdate,_=e.parentObjectId,b=e.pinDomainOwnerId,x=e.pinId,j=e.slotIndex,w=e.viewerId,O=e.showHighlightEducator,C=e.numHighlights,S=e.canSetHighlight,A=e.isORBACProfileManager,I=(0,v.u)().logContextEvent,T=(0,eb.Z)(),E=(0,y.Z)(),k=(0,en.Z)({name:"PinResource",options:{id:x,field_set_key:"detailed"}}).isLoaded,D=(0,eg.dI)().showToast,z=(0,ew.Z)().reportComment,M=(0,e_.lV)(),R=(0,e_.nf)(),L=R.aggregatedCommentsHiddenForUser,H=R.deleteCommentMention,B=R.toggleAggregatedCommentHelpful,N=R.toggleAggregatedCommentHighlight,F=R.toggleAggregatedCommentLike,V=R.updateAggregatedComment,Y=(0,ec.Z)(),W=(0,eu.Z)(),G=M[r],K=(0,ev.G)().nativeEngagementsHiddenForUser,X=eC((0,o.useState)(!1),2),q=X[0],J=X[1],$=eC((0,o.useState)(!1),2),Q=$[0],ee=$[1],et=eC((0,o.useState)(!1),2),er=et[0],eo=et[1],ei=eC((0,o.useState)(!1),2),ea=ei[0],el=ei[1],eS=eC((0,o.useState)(!1),2),eA=eS[0],eI=eS[1],eT=eC((0,o.useState)(!1),2),eE=eT[0],ek=eT[1],eD=(0,i.I0)();(0,o.useEffect)(function(){eD((0,em.U)("AggregatedCommentResource",{options:{commentId:r}}))},[eD,r]),(0,o.useEffect)(function(){g&&g()},[g]);var ez=(0,eP.S6)()(x),eM="pin";if(ez){var eR,eL=!!(null!=(eR=ez.videos)&&eR.video_list);ez.story_pin_data_id?eM="story":eL&&(eM="video")}if(!G||!G.user)return null;var eU=G.comment_response_pin,eH=G.comment_count,eB=G.created_at,eN=G.helpful_count,eF=G.marked_helpful_by_me,eY=G.reaction_by_me,eW=G.reaction_counts,eG=G.tagged_users,eK=G.tags,eX=G.text,eq=G.user,eJ=eq.id,e$=eq.username,eQ=G.highlighted_by_pin_owner,e0=u===eZ,e1=eW[1],e2=function(){F({aggregatedCommentId:r,isLikedByMe:!!eY})},e8=function(){B({aggregatedCommentId:r,isMarkedHelpfulByMe:!!eF})},e3=function(){if(C&&C>=3)return void D(function(e){var t=e.hideToast;return(0,c.jsx)(ep.Z,{onHide:t,text:E._('Only 3 comments can be highlighted', 'closeup.pinActionDropDown.commentHighlightMaxNumberToast', 'Toast that tells user that at most 3 comments can be highlighted.')})});N({aggregatedCommentId:r,pinId:x,isHighlighted:!1}),D(function(e){var t=e.hideToast;return(0,c.jsx)(ep.Z,{onHide:t,primaryAction:{accessibilityLabel:E._('Undo comment highlight or comment highlight removal', 'closeup.pinActionDropDown.commentHighlightToast.a11yUndoButton', 'Accessibility label for toast to undo comment highlight or comment highlight removal'),label:E._('Undo', 'closeup.pinActionDropDown.commentHighlightToast.UndoButton', 'Undo comment highlight or comment highlight removal'),size:"lg",onClick:function(){N({aggregatedCommentId:r,pinId:x,isHighlighted:!0})}},text:E._('Comment highlighted', 'closeup.pinActionDropDown.commentHighlightToast', 'Toast that tells user that they have successfully highlighted a comment.')})})},e6=function(){N({aggregatedCommentId:r,pinId:x,isHighlighted:!0}),D(function(e){var t=e.hideToast;return(0,c.jsx)(ep.Z,{onHide:t,primaryAction:{accessibilityLabel:E._('Undo comment highlight or comment highlight removal', 'closeup.pinActionDropDown.commentHighlightToast.a11yUndoButton', 'Accessibility label for toast to undo comment highlight or comment highlight removal'),label:E._('Undo', 'closeup.pinActionDropDown.commentHighlightToast.UndoButton', 'Undo comment highlight or comment highlight removal'),size:"lg",onClick:function(){N({aggregatedCommentId:r,pinId:x,isHighlighted:!1})}},text:E._('Highlight removed', 'closeup.pinActionDropDown.commentHighlightRemovalToast', 'Toast that tells user that they have successfully removed a comment highlight.')})})},e4=function(){eo(!er)},e5=(t=regeneratorRuntime.mark(function e(t){var n,o,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.contentMarkdown,o=t.tags,a=r,e4(),ee(!0),e0&&(a=_,i=r),e.next=7,eD(Y({objectType:P.o.aggregatedComment,objectId:a,tags:o,text:n,replyToCommentId:i}));case 7:ee(!1);case 8:case"end":return e.stop()}},e)}),n=function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(e){eO(i,r,o,a,l,"next",e)}function l(e){eO(i,r,o,a,l,"throw",e)}a(void 0)})},function(e){return n.apply(this,arguments)}),e7=function(){J(!0)},e9=function(){J(!1)},te=function(e){V({commentId:r,force:!0,tags:e.tags,text:e.contentMarkdown}),J(!1)},tt=function(){H(r),I({event_type:8909,component:13464,view_type:3,view_parameter:140,aux_data:{tag_id:w,tag_type:1}}),D(function(e){var t=e.hideToast;return(0,c.jsx)(ep.Z,{onHide:t,text:E._('@mention removed!', 'closeup.pinActionDropDown.mentionRemovalToast', 'Toast that tells user that they have successfully removed the @mention of them in another user\'s Pin description')})})},tn=function(){el(!0)},tr=function(){ek(!0)},to=function(){el(!1),eI(!1),ek(!1)},ti=function(){z(r,_,p===P.o.aggregatedComment?"aggregatedcomment":"userdiditdata")},ta=function(){var e=[eJ,s,d,b].includes(w),t=w===eJ,n=w!==eJ,r=w!==eJ,o=eG.filter(function(e){return e.id===w}).length>0;return(0,c.jsx)(Z.Z,{handleBlockUser:r?tr:null,handleClickReport:n?ti:null,handleDelete:e?tn:null,handleHighlight:S&&!eQ?e3:null,handleOnEdit:t?e7:null,handleRemoveHighlight:S&&eQ?e6:null,handleRemoveMention:o?tt:null,showHighlightEducator:O,small:!0})};return(0,c.jsxs)(o.Fragment,{children:[(0,c.jsx)(eh.Fw,{componentType:p===P.o.pin?13696:13697,contextLogData:{objectId:G.id},impressionAuxFields:{commentId:G.id,pinId:x,pinType:eM,parentId:_,parentType:p,commentType:P.o.aggregatedComment},impressionType:"Comment",isPaused:!k,loggingId:G.id,slotIndex:j,viewType:3,children:function(e){var t=e.impressionTrackerRef;return(0,c.jsx)(l.xu,{ref:t,"data-test-id":"aggregatedCommentContainer-comment",children:(0,c.jsx)(es,{avatarSize:e0?"sm":"md",commentAuthor:G.user,commentCount:eH,commentId:r,contentText:eX,createdAt:eB,flyout:ta(),handleHelpfulClick:e8,handleLikeClick:e2,handleOnEditCancel:e9,handleOnEdited:te,handleReplyClick:e4,helpfulCount:eN,hideAddObjects:!0,hideReplyCount:!0,inEditMode:q,isHighlighted:eQ,isLikedByMe:!!eY,isMarkedHelpfulByMe:eF,isORBACProfileManager:A,parentObject:{id:_},reactionCounts:eW,responsePinId:null==eU?void 0:eU.id,slotIndex:j,taggedUsers:eG,tags:eK,truncateText:!0,type:P.o.aggregatedComment})})}}),er&&(0,c.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{paddingLeft:48*!e0}},"data-test-id":"aggregatedCommentContainer-replyComposer",children:(0,c.jsx)(l.xu,{display:"flex",marginTop:2,children:(0,c.jsx)(l.xu,{flex:"grow",children:(0,c.jsx)(U,{avatarSize:"sm",hideAddObjects:!0,objectType:P.o.aggregatedComment,onAddItem:e5,onCancelItem:e4,onEnter:function(){},parentObjectId:_,replyToObject:e0?G:null,statusType:"textInflightCreation"})})})}),eH>0&&(0,c.jsxs)(l.xu,{dangerouslySetInlineStyle:{__style:{paddingLeft:48}},"data-test-id":"aggregatedCommentContainer-replyList",children:[(0,c.jsx)(eV,{baseIndex:j+1,commentCount:eH,creatorId:s,depth:u,didItOwnerId:d,isManagedView:f,isORBACProfileManager:A,objectId:r,objectType:P.o.aggregatedComment,onUpdate:g,parentObjectId:_,pinDomainOwnerId:b,pinKey:null!=ez?{type:"Legacy",data:ez}:null,variant:"legacy"}),(0,c.jsx)(l.xH,{accessibilityLabel:E._('Comments loading', ' - ', ' -- '),show:Q})]}),ea&&(0,c.jsx)(m,{accessibilityModalLabel:E._('Deleting a comment', 'closeup.deleteCommentModal.label', 'Label for deleting a comment'),cancelButtonText:E._('Cancel', 'closeup.deleteCommentModal.cancelButton', 'Cancel deleting comment'),confirmButtonText:E._('Delete', 'closeup.deleteCommentModal.confirmButton', 'Delete comment'),detail:E._('This comment will be deleted', 'closeup.deleteCommentModal.detailText', 'confirmation before deleting comment'),heading:E._('Are you sure?', 'closeup.deleteCommentModal.heading', 'Are you sure to remove post or comment'),onConfirm:function(){eD(W({aggregatedCommentId:r,aggregatedPinId:a,feedType:"aggregatedComments",type:e0?ef.Rv.REPLY_TO_AGGREGATED:ef.Rv.TOP,parentId:_,updateParentCommentCount:!0,pinId:x}))},onDismiss:to}),eA&&(0,c.jsx)(h.ZP,{accessibilityModalLabel:E._('Users who have liked this.', 'closeup.comment.showLikeListModal.label', 'Label for a modal showing a list of users who have liked a Tried Item Comment'),heading:(0,ey.Z)(E.ngettext('{{count}} Like', '{{count}} Likes', e1, 'closeup.comment.showLikeListModal.heading', 'Number of likes a comment has'),{count:e1.toString()}),onDismiss:to,size:"md",children:(0,c.jsx)(ed.Xd,{id:r})}),eE&&(0,c.jsx)(ex.default,{firstName:e$,onBlockUser:function(){eD((0,ej.Ge)({id:eJ,blockSource:"comment",blockContext:r,logContextEvent:I})),L(eJ),K(eJ),to(),T()},onClearModal:to})]})},eI=n(183e3),eT=n(216975),eE=n(575820),ek=n(893957),eD=n(438274);function ez(e){return(ez="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eM(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=ez(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ez(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ez(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eM(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function eL(e,t,n,r,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function eU(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return eH(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?eH(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eH(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var eZ=2,eB=(void 0!==r||(r=n(349507)).hash&&"ba6cb3d83648d5a9f07e044db4a9cf58"!==r.hash&&console.error("The definition of 'AggregatedCommentListUnified_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r),eN=function(e){var t,n,r,i,a=e.baseIndex,s=void 0===a?0:a,u=e.commentCount,d=e.creatorId,p=e.depth,h=void 0===p?0:p,m=e.didItOwnerId,g=e.feedItems,_=e.feedResourceName,b=e.initialLoadCount,x=e.isManagedView,w=e.objectId,O=e.objectType,C=e.onUpdate,S=e.parentObjectId,A=e.pinDomainOwnerId,I=e.pinKey,T=e.privatePin,E=e.shouldFeatureComment,k=void 0!==E&&E,D=e.variant,z=e.isORBACProfileManager,M=(0,v.u)().logContextEvent,R=(0,y.Z)(),L=eU((0,o.useState)(!1),2),Z=L[0],B=L[1],N=eU((0,o.useState)(!1),2),F=N[0],V=N[1],Y=(0,j.Z)(),W=(0,et.K)(),G=(0,f.TH)(),K=(0,eE.mB)(G.search).comment_is_hidden,X=1===parseInt(void 0===K?"0":K,10),q=(0,eg.dI)().showOneToast,J=(0,ec.Z)(),$=(0,eI.Z)(eB,I);(0,ek.Z)(function(){if(W&&X&&k){var e=R._('Sorry, the comment has been hidden', 'AggregatedCommentList.featuredComment.isHidden', 'Error message for featured comment is unavailable');q(function(t){var n=t.hideToast;return(0,c.jsx)(ep.Z,{onHide:n,text:e})})}});var Q=(0,en.Z)({name:_,options:{objectId:w,page_size:b||2,redux_normalize_feed:!0,featured_ids:k&&W&&!X?[W]:null}}),ee=Q.fetchMore,er=Q.isAtEnd,eo=Q.isLoaded,ei=null==$?void 0:$.entityId,ea=$&&$.pinner?$.pinner.entityId:"",el=!!$&&$.storyPinDataId,es=null!=(r=null==$||null==(i=$.aggregatedPinData)?void 0:i.entityId)?r:"";(0,o.useEffect)(function(){eo&&C&&C()},[eo,C]);var eu=function(){B(!Z)},ed=(t=regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.contentMarkdown,r=t.tags,eu(),V(!0);try{J({objectType:O,objectId:w,pinId:ei,tags:r,text:n}),O===P.o.pin&&M({event_type:7,object_id_str:ei,aux_data:eR({num_user_mention_tags:(r?JSON.parse(r):[]).length},el?{creator_id:d,story_pin_data_id:el}:{})})}catch(e){}V(!1);case 5:case"end":return e.stop()}},e)}),n=function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(e){eL(i,r,o,a,l,"next",e)}function l(e){eL(i,r,o,a,l,"throw",e)}a(void 0)})},function(e){return n.apply(this,arguments)}),ef=!!g&&eo&&u>g.length&&!er,eh=g?u-g.length:0,em=(0,eT.nk)(R.ngettext('{{commentCount}} comment', '{{commentCount}} comments', eh, 'Show comments link with count', 'Show comments link with count'),{commentCount:String(eh)}).join(""),ey=O===P.o.aggregatedComment,e_=O===P.o.pin&&(g&&0===g.length||0===u)&&eo&&!F,eb="default"===D,ev=0===h,ex=ev&&$&&$.highlightedAggregatedComments?$.highlightedAggregatedComments:[],ej=ev&&Y.isAuth&&Y.id===ea,eP=ej;return(0,c.jsxs)(l.xu,{"data-test-id":"aggregated-comment-list",marginTop:ey&&!eb?2:0,paddingY:ey||eb?0:2,children:[!!ei&&ex.map(function(e,t){return(0,c.jsx)(l.xu,{marginBottom:2,children:(0,c.jsx)(eA,{aggregatedCommentId:e,apdId:es,canSetHighlight:ej,creatorId:d,depth:h+1,didItOwnerId:m,isManagedView:x,isORBACProfileManager:z,objectType:O,onUpdate:C,parentObjectId:O===P.o.pin?ei:w,pinDomainOwnerId:A,pinId:ei,slotIndex:s+t,viewerId:Y.isAuth?Y.id:""})},e)}),!!ei&&(null==g?void 0:g.filter(function(e){return!ex.includes(e.id)}).map(function(e,t){var n=e.id,r=eP;return eP=!1,(0,c.jsx)(l.xu,{marginBottom:2,children:(0,c.jsx)(eA,{aggregatedCommentId:n,apdId:es,canSetHighlight:ej,creatorId:d,depth:h+1,didItOwnerId:m,isManagedView:x,isORBACProfileManager:z,numHighlights:ex.length,objectType:O,onUpdate:C,parentObjectId:O===P.o.pin?ei:w,pinDomainOwnerId:A,pinId:ei,showHighlightEducator:r,slotIndex:s+ex.length+t,viewerId:Y.isAuth?Y.id:""})},n)})),(0,c.jsx)(l.xH,{accessibilityLabel:R._('Comments loading', ' - ', ' -- '),show:!eo||F}),ef&&(0,c.jsx)(l.xu,{marginTop:3,children:(0,c.jsx)(H.Z,{handleClick:ee,text:em})}),e_&&(0,c.jsx)(l.xu,{paddingY:2*!eb,children:(0,c.jsx)(l.xv,{size:eb?"100":"200",children:R._('Share feedback, ask a question or give a high five', ' - ', ' -- ')})}),!z&&O!==P.o.aggregatedComment&&!x&&(0,c.jsx)(l.xu,{display:"flex",marginTop:6,children:(0,c.jsx)(l.xu,{"data-test-id":"add-comment",flex:"grow",children:(0,c.jsx)(U,{hideAddObjects:!0,objectType:O,onAddItem:ed,onCancelItem:eu,onEnter:eu,parentObjectId:S||"",privatePin:T,replyToObject:null,statusType:Z?"textInflightCreation":"textStaticDisplay"})})})]})},eF=function(e){return(0,i.v9)(function(t){return t.feeds["".concat(eD.Z.AGGREGATED_COMMENTS,":").concat(e)]})},eV=function(e){var t;return(0,c.jsx)(eN,eR(eR({},e),{},{feedItems:null!=(t=eF(e.objectId))?t:[],feedResourceName:"AggregatedCommentReplyFeedResource"}))},eY=function(e){var t;return(0,c.jsx)(eN,eR(eR({},e),{},{feedItems:null!=(t=eF(e.objectId))?t:[],feedResourceName:"DidItCommentsResource"}))};function eW(e){var t=e.item.images,n=e.item.pin&&e.item.pin.title||"",r=t.length>0,o=t[0]?t[0]["750x"]:null;if(!r||!o)return null;var i=o.url;return(0,c.jsx)(l.zd,{rounding:2,wash:!0,children:(0,c.jsx)(l.Ee,{alt:n,color:"#efefef",naturalHeight:o.height,naturalWidth:o.width,src:i},i)})}var eG=n(290805),eK=n(365278);function eX(e){return(eX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eJ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eq(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=eX(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=eX(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==eX(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eq(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function e$(e){var t=(0,y.Z)();return(0,c.jsx)(eK.Z,eJ(eJ({thriftComponentType:193},e),{},{children:function(e){var n=e.onTriedItButtonClick;return(0,c.jsx)(l.iP,{onTap:function(e){return n(e.event)},children:(0,c.jsx)(l.xu,{paddingX:2,paddingY:1,children:(0,c.jsx)(l.xv,{weight:"bold",children:t._('Save', 'comment save button', 'comment save button')})})})}}))}var eQ=n(327730),e0=n(735571),e1=n(943152),e2=n(681698),e8=n(426130),e3=n(36351),e6=n(864636);function e4(e){return(e4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function e5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function e7(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?e5(Object(n),!0).forEach(function(t){tr(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e5(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function e9(e,t){return(e9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function te(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(tt=function(){return!!e})()}function tn(e){return(tn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tr(e,t,n){return(t=to(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function to(e){var t=function(e,t){if("object"!=e4(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=e4(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==e4(t)?t:t+""}var ti=function(e){var t=e.isLikedByMe,n=e.onClick,r=(0,y.Z)(),o=(0,e1.Z)();return(0,c.jsx)(l.hU,{accessibilityLabel:r._('Like', ' - ', ' -- '),icon:"heart",iconColor:t?"red":"gray",onClick:function(){o?o():n()},size:"md"})},ta=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&e9(o,e);var t,n,r=(t=tt(),function(){var e,n=tn(o);return e=t?Reflect.construct(n,arguments,tn(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==e4(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return te(e)}(this,e)});function o(){if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var e,t,n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];return tr(te(t=r.call.apply(r,[this].concat(i))),"state",{isLikedByMe:null!=(e=t.props.item.liked_by_me)&&e,likeCount:t.props.item.like_count,showDeleteModal:!1,showEditModal:!1,showFlyout:!1,showLikesListModal:!1,showShareFlyout:!1,isDeleteHover:!1,isReportHover:!1}),tr(te(t),"handleClickthrough",function(){var e=t.props,n=e.handlePinClickLogging,r=e.logContextEvent,o=e.item.id;n&&n(),r({event_type:101,component:172,element:1263,object_id_str:o})}),tr(te(t),"handleClickHashTag",function(){var e=t.props;(0,e.logContextEvent)({event_type:101,component:172,element:10194,object_id_str:e.item.id})}),tr(te(t),"handleToggleLikesListModal",function(){return t.setState(function(e){return{showLikesListModal:!e.showLikesListModal}})}),tr(te(t),"handleClickLike",function(){var e=t.props,n=e.item.id,r=e.viewType,o=e.logContextEvent,i=t.state,a=i.isLikedByMe,l=i.likeCount;o({event_type:101,component:172,element:1353,object_id_str:n,view_type:r}),t.setState({isLikedByMe:!a,likeCount:a?l-1:l+1}),(0,e2.Z)({url:"/v3/did_it/".concat(n,"/like/"),method:a?"DELETE":"POST"})}),tr(te(t),"handleToggleFlyout",function(){return t.setState(function(e){return{showFlyout:!e.showFlyout,showShareFlyout:!1}})}),tr(te(t),"handleShowShareFlyout",function(){return t.setState({showShareFlyout:!0})}),tr(te(t),"handleDismissFlyout",function(){t.state.showEditModal||t.setState({showFlyout:!1,showShareFlyout:!1})}),tr(te(t),"handleShowReportModal",function(){var e,n=t.props,r=n.item,o=r.id,i=r.pin.aggregated_pin_data,a=n.removeReportedActivity;(0,n.reportComment)(o,null!=(e=null==i?void 0:i.id)?e:"","userdiditdata"),a&&a(o)}),tr(te(t),"handleShowDeleteModal",function(){return t.setState({showDeleteModal:!0})}),tr(te(t),"handleDeleteConfirmation",function(e){var n=t.props,r=n.item,o=r.id,i=r.pin,a=i.aggregated_pin_data,l=void 0===a?{}:a,s=i.id,c=r.user,u=n.deleteUserDidItData,d=n.logContextEvent;if(t.setState({showDeleteModal:!1}),e&&c){var f=c.username;d({event_type:101,view_type:101,component:192,element:1264,object_id_str:s}),u({aggregatedPinDataId:null==l?void 0:l.id,id:o,isOwnedByMe:t.isOwnedByCurrentUser,pinId:s,username:f})}}),tr(te(t),"handleToggleEditModal",function(e){return t.setState({showEditModal:e,showFlyout:e})}),tr(te(t),"handleClickHelpful",function(){var e=t.props,n=e.didItDataId,r=e.item.marked_helpful_by_me;(0,e.toggleHelpful)({didItDataId:n,isMarkedHelpfulByMe:!!r})}),tr(te(t),"handleDeleteMouseEnter",function(){return t.setState({isDeleteHover:!0})}),tr(te(t),"handleDeleteMouseLeave",function(){return t.setState({isDeleteHover:!1})}),tr(te(t),"handleReportMouseEnter",function(){return t.setState({isReportHover:!0})}),tr(te(t),"handleReportMouseLeave",function(){return t.setState({isReportHover:!1})}),tr(te(t),"renderFlyout",function(){var e,n,r,o=t.props,i=o.creatorId,a=o.item,s=a.details,u=a.id,d=a.images,f=a.pin,p=a.privacy,h=a.user,m=o.viewer,y=f||{},g=y.aggregated_pin_data,_=void 0===g?{}:g,b=y.id,v=y.images,x=y.link_domain,j=y.rich_metadata,P=y.title,w=t.state,O=w.showFlyout,C=w.showShareFlyout,S=((void 0===x?{}:x)||{}).official_user||{},A=((void 0===j?{}:j)||{}).title,I={description:s,id:u,imageUrl:d.length>0?null==d||null==(e=d[0])||null==(n=e["550x"])?void 0:n.url:null==(r=(void 0===v?{}:v)["136x136"])?void 0:r.url,name:A||t.props.i18n._('this idea', ' - ', ' -- '),type:e6.d.DID_IT,url:"/pin/".concat(b,"/activity/tried/").concat(u)},T=t.isOwnedByCurrentUser||m.isAuth&&m.id===S.id||m.isAuth&&m.id===i;return(0,c.jsxs)(l.xu,{children:[(0,c.jsx)(l.xu,{ref:function(e){t.flyoutAnchor=e},children:(0,c.jsx)(l.hU,{accessibilityExpanded:O,accessibilityHaspopup:!0,accessibilityLabel:t.props.i18n._('more options', 'accessible label for button to see more options on report content', 'accessible label for button to see more options on report content'),icon:"ellipsis",iconColor:"gray",onClick:t.handleToggleFlyout,size:"sm"})}),O&&(0,c.jsx)(l.mh,{children:(0,c.jsx)(l.xu,{alignSelf:"end",children:(0,c.jsx)(l.J2,{anchor:t.flyoutAnchor,idealDirection:"down",onDismiss:t.handleDismissFlyout,size:C?"lg":"xs",children:C?(0,c.jsx)(e3.Z,{component:56,onHide:t.handleToggleFlyout,sendType:"did_it",sharedObject:I,viewType:3}):(0,c.jsx)(l.xu,{alignSelf:"start",color:"default",column:12,display:"flex",position:"relative",rounding:2,children:(0,c.jsxs)(l.sg,{span:12,children:["public"===p&&(0,c.jsx)(l.xu,{children:(0,c.jsx)(l.iP,{onTap:t.handleShowShareFlyout,children:(0,c.jsx)(l.xu,{display:"flex",paddingX:2,paddingY:1,children:(0,c.jsx)(l.xv,{weight:"bold",children:t.props.i18n._('Share', ' - ', ' -- ')})})})}),(0,c.jsx)(l.xu,{display:"flex",paddingX:2,paddingY:1,children:(0,c.jsx)(l.rU,{href:t.pinURL,onClick:t.handleClickthrough,children:(0,c.jsx)(l.xv,{weight:"bold",children:t.props.i18n._('Go to Pin', ' - ', ' -- ')})},t.pinURL)}),h&&(t.isOwnedByCurrentUser||T)?(0,c.jsxs)(l.xu,{children:[t.isOwnedByCurrentUser&&(0,c.jsx)(l.kC,{alignItems:"stretch",justifyContent:"start",children:(0,c.jsx)(e$,{aggregatedPinDataId:null==_?void 0:_.id,isDoneByMe:t.isOwnedByCurrentUser,loggedInUser:h,onToggleModal:t.handleToggleEditModal,pinId:b,pinTitle:P,userDidItDataId:u})}),T&&(0,c.jsx)(l.iP,{onTap:t.handleShowDeleteModal,children:(0,c.jsx)(l.xu,{"data-test-id":"flyout-delete-button",display:"flex",paddingX:2,paddingY:1,children:(0,c.jsx)(l.xv,{weight:"bold",children:t.props.i18n._('Delete', ' - ', ' -- ')})})})]}):(0,c.jsx)(l.iP,{onTap:t.handleShowReportModal,children:(0,c.jsx)(l.xu,{display:"flex",paddingX:2,paddingY:1,children:(0,c.jsx)(l.xv,{weight:"bold",children:t.props.i18n._('Report this content', ' - ', ' -- ')})})})]})})})})})]})}),tr(te(t),"renderStatsBar",function(){var e=t.props,n=e.item,r=n.comment_count,o=n.done_at,i=n.marked_helpful_by_me,a=n.helpful_count,s=e.isManagedView,u=e.viewer,d=t.props.item.pin&&t.props.item.pin.link_domain||{},f=t.state,p=f.isLikedByMe,h=f.likeCount,m=f.isDeleteHover,y=f.isReportHover,g=(0,ey.Z)(t.props.i18n.ngettext('{{likeCount}} like', '{{likeCount}} likes', h, ' - ', ' -- '),{likeCount:h}),_=(0,ey.Z)(t.props.i18n.ngettext('{{commentCount}} comment', '{{commentCount}} comments', r, ' - ', ' -- '),{commentCount:r}),b=d.official_user||{},v=t.isOwnedByCurrentUser||u.isAuth&&u.id===b.id,x=t.props.getHumanizedTimeSince(o,!0);return(0,c.jsxs)(l.xu,{alignItems:"center",column:12,display:"flex",children:[(0,c.jsxs)(l.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,c.jsx)(l.xv,{size:"200",children:s?x:(0,c.jsx)(e0.Z,{dateFormatType:e0.k.LONG,useUTC:!1,value:new Date(o)})}),r>0&&(0,c.jsx)(l.xu,{marginStart:6,children:(0,c.jsx)(l.xv,{size:"200",weight:"bold",children:_})}),h>0&&(0,c.jsx)(l.xu,{"data-test-id":"did_it_show_likes_tap_area",marginStart:6,children:(0,c.jsx)(l.iP,{onTap:t.handleToggleLikesListModal,children:(0,c.jsx)(l.xv,{size:"200",weight:"bold",children:g})})})]}),(0,c.jsxs)(l.kC,{alignItems:"stretch",flex:"grow",justifyContent:"end",children:[(0,c.jsx)(l.xu,{display:"flex",justifyContent:h>0?"between":"end",marginBottom:1,marginTop:1,children:u.isAuth&&(0,c.jsx)(ti,{isLikedByMe:p,onClick:t.handleClickLike})}),(0,c.jsx)(l.xu,{display:"flex",paddingY:3,children:(0,c.jsx)(ea.N,{helpfulCount:a,isMarkedHelpfulByMe:i,onHelpfulClick:t.handleClickHelpful})})]}),s&&(0,c.jsx)(l.kC,{alignItems:"stretch",flex:"none",children:(0,c.jsx)(l.iP,{onMouseEnter:t.handleReportMouseEnter,onMouseLeave:t.handleReportMouseLeave,onTap:t.handleShowReportModal,rounding:"pill",children:(0,c.jsx)(l.xu,{padding:2,children:(0,c.jsx)(l.xv,{color:y?"default":"subtle",size:"200",weight:"bold",children:t.props.i18n._('Report', ' - ', ' -- ')})})})}),s&&v&&(0,c.jsx)(l.kC,{alignItems:"stretch",flex:"none",children:(0,c.jsx)(l.iP,{onMouseEnter:t.handleDeleteMouseEnter,onMouseLeave:t.handleDeleteMouseLeave,onTap:t.handleShowDeleteModal,rounding:"pill",children:(0,c.jsx)(l.xu,{padding:2,children:(0,c.jsx)(l.xv,{color:m?"default":"subtle",size:"200",weight:"bold",children:t.props.i18n._('Delete', ' - ', ' -- ')})})})})]})}),tr(te(t),"renderPinInfoBar",function(){var e,n,r=t.props,o=r.item,i=o.images,a=o.pin,s=o.user,u=r.isManagedView,d=(s||{}).full_name,f=a.dominant_color,p=a.images,h=void 0===p?{}:p,m=a.rich_metadata,y=a.title,g=((void 0===m?{}:m)||{}).title;return n=t.isOwnedByCurrentUser&&g?(0,eT.nk)(t.props.i18n._('You tried {{pinTitleForTriedByText}}', 'Navigating to a Pin from a try', 'Navigating to a Pin from a try'),{pinTitleForTriedByText:g}):g?(0,eT.nk)(t.props.i18n._('{{fullName}} tried {{pinTitleForTriedByText}}', 'Navigating to a Pin from a try', 'Navigating to a Pin from a try'),{fullName:d,pinTitleForTriedByText:g}):t.isOwnedByCurrentUser?t.props.i18n._('See the Pin you tried', 'Navigating to a Pin from a try', 'Navigating to a Pin from a try'):t.props.i18n._('See the Pin that inspired it', 'call to action - navigating to a Pin from a try', 'call to action - navigating to a Pin from a try'),(0,c.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:i.length?{backgroundImage:"linear-gradient(to bottom, rgba(118, 118, 118, 0), rgba(0, 0, 0, 0.2) 33%, rgba(0, 0, 0, 0.5) 66%, rgba(0, 0, 0, 0.7))"}:{}},rounding:2*!!i.length,children:(0,c.jsx)(l.Tg,{href:t.pinURL,onTap:t.handleClickthrough,children:(0,c.jsxs)(l.xu,{alignItems:"center",display:"flex",paddingX:3*!!i.length,paddingY:3,children:[(0,c.jsxs)(l.xu,{alignItems:"center",display:"flex",flex:"grow",justifyContent:"start",marginEnd:2,children:[(0,c.jsx)(l.xu,{marginEnd:3,width:60,children:(0,c.jsx)(l.zd,{rounding:2,wash:!0,children:(null==(e=h["136x136"])?void 0:e.url)&&(0,c.jsx)(l.Ee,{alt:null!=y?y:"",color:null!=f?f:"transparent",naturalHeight:60,naturalWidth:60,src:h["136x136"].url})})}),(0,c.jsxs)(l.xv,{color:i.length?"inverse":"default",size:u?"100":"300",weight:"bold",children:[" ",n," "]})]}),(0,c.jsx)(l.JO,{accessibilityLabel:t.props.i18n._('See pin', ' - ', ' -- '),color:i.length?"inverse":"default",icon:"arrow-forward",size:32})]})},t.pinURL)})}),t}return n=[{key:"isOwnedByCurrentUser",get:function(){var e=this.props,t=e.viewer,n=e.item;return!!(t.isAuth&&n.user&&t.id===n.user.id)}},{key:"pinURL",get:function(){return"/pin/".concat(this.props.item.pin.id,"/")}},{key:"render",value:function(){var e,t,n,r=this.props,o=r.creatorId,i=r.isManagedView,a=r.item,s=r.viewType,u=this.state,f=u.likeCount,p=u.showDeleteModal,m=u.showLikesListModal,y=a.comment_count,g=a.details,_=a.id,b=a.images,v=a.pin,x=a.user,j=a.videos,w=x||{},O=w.full_name,C=w.id,S=w.image_medium_url,A=w.username,I="/".concat(A,"/");(0,ey.Z)(this.props.i18n.ngettext('{{likeCount}} like', '{{likeCount}} likes', f, ' - ', ' -- '),{likeCount:f}),(0,ey.Z)(this.props.i18n.ngettext('{{commentCount}} comment', '{{commentCount}} comments', y, ' - ', ' -- '),{commentCount:y});var T=!!(null!=j&&null!=(e=j[0])&&null!=(t=e.video_list)&&t.V_HLSV4),E=!!(null!=(n=b[0])&&n["750x"]),k=E||T,D=82!==s,z=E&&D;return(0,c.jsxs)(l.xu,{alignItems:"stretch",direction:"column",display:"flex",justifyContent:"between",paddingY:7,children:[(0,c.jsxs)(l.xu,{alignItems:"center",column:12,display:"flex",children:[(0,c.jsx)(l.kC,{alignItems:"center",children:(0,c.jsx)(l.xu,{marginEnd:3,width:i?36:42,children:(0,c.jsx)(l.Tg,{href:I,onTap:this.handleClickthrough,rounding:"circle",children:(0,c.jsx)(l.zd,{rounding:"circle",wash:!0,children:S&&(0,c.jsx)(l.Ee,{alt:null!=A?A:"",color:"#efefef",naturalHeight:42,naturalWidth:42,src:S},S)})},I)})}),(0,c.jsx)(l.xu,{column:1,display:"flex",mdDisplay:"none"}),(0,c.jsxs)(l.xu,{alignItems:"center",column:12,display:"flex",justifyContent:"between",children:[(0,c.jsx)(l.xv,{size:i?"200":"300",children:(0,c.jsx)(l.rU,{href:I,onClick:this.handleClickthrough,children:O||""},I)}),!i&&this.renderFlyout()]})]}),(0,c.jsx)(l.xu,{marginBottom:+!i,marginTop:2,children:k&&(0,c.jsxs)(l.xu,{column:12,position:"relative",children:[T?(0,c.jsx)(eG.Z,{item:a,viewType:s}):(0,c.jsx)(eW,{item:a}),z&&(0,c.jsx)(l.xu,{bottom:!0,column:12,position:"absolute",children:this.renderPinInfoBar()})]})}),(0,c.jsxs)(l.xu,{marginStart:1,children:[E&&this.renderStatsBar(),g&&(0,c.jsx)(l.xu,{column:10,dangerouslySetInlineStyle:{__style:{whiteSpace:"pre-line"}},marginBottom:2,children:(0,c.jsx)(l.xv,{size:i?"100":"300",children:(0,c.jsx)(d,{html:g,onClick:this.handleClickHashTag})})}),!E&&(0,c.jsxs)(l.xu,{children:[D&&this.renderPinInfoBar(),this.renderStatsBar()]}),(0,c.jsx)(l.xu,{column:12,children:(0,c.jsx)(eY,{commentCount:y,creatorId:o,didItOwnerId:C,objectId:_,objectType:P.o.didIt,pinKey:{type:"Legacy",data:v},variant:"legacy"})})]}),p&&(0,c.jsx)(eQ.Z,{didItData:{id:_},onDeleteConfirmation:this.handleDeleteConfirmation}),m&&(0,c.jsx)(h.ZP,{accessibilityModalLabel:this.props.i18n._('Users who have liked this.', 'Label for a modal showing a list of users who have liked a Tried Item', 'Label for a modal showing a list of users who have liked a Tried Item'),allowScroll:!0,heading:(0,ey.Z)(this.props.i18n.ngettext('{{count}} Like', '{{count}} Likes', f, ' - ', ' -- '),{count:f.toString()}),onDismiss:this.handleToggleLikesListModal,size:"md",children:(0,c.jsx)(ed.Jo,{id:_})})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,to(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(o.PureComponent);function tl(e){var t=(0,v.u)().logContextEvent,n=(0,y.Z)(),r=(0,Q.Z)(),o=(0,i.I0)(),l=(0,ew.Z)().reportComment,s=(0,j.Z)(),u={deleteUserDidItData:(0,a.bindActionCreators)(e8.lg,o),toggleHelpful:(0,a.bindActionCreators)(e8.YH,o),updateUserDidItDataCommentCount:(0,a.bindActionCreators)(e8.L8,o)},d=(0,i.v9)(function(t){return t.didItData[e.didItDataId]}),f=d&&"comment_count"in d?d:void 0;return f&&(0,c.jsx)(ta,e7(e7(e7({},e),u),{},{getHumanizedTimeSince:r,i18n:n,item:f,logContextEvent:t,reportComment:l,viewer:s}))}},302861:function(e,t,n){n.d(t,{Jo:function(){return w},Xd:function(){return P}});var r=n(387784),o=n(20256),i=n(935059),a=n(24246),l=n(676879),s=n(381500),c=n(730448),u=n(643121),d=n(157498),f=n(680811);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){v(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function g(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(_=function(){return!!e})()}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t,n){return(t=x(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=p(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p(t)?t:t+""}var j=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&y(i,e);var t,n,r=(t=_(),function(){var e,n=b(i);return e=t?Reflect.construct(n,arguments,b(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==p(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return g(e)}(this,e)});function i(){var e;if(!(this instanceof i))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return v(g(e=r.call.apply(r,[this].concat(n))),"setRef",function(t){t&&!e.list&&(e.list=t.parentElement,e.list&&e.list.addEventListener("scroll",e.handleScroll))}),v(g(e),"fetchMore",function(){var t=e.props.feedResource;t.isFetching||(t.isAtEnd?window.removeEventListener("scroll",e.handleScroll):t.fetchMore())}),v(g(e),"handleScroll",(0,c.Z)(function(){var t=e.props.feedResource;if(!t.isFetching&&!t.isAtEnd){var n=(0,s.Uy)(e.list);(0,s.aZ)(e.list)-(0,s.MX)(e.list)-50<n&&e.fetchMore()}},10)),e}return n=[{key:"componentWillUnmount",value:function(){var e;null==(e=this.list)||e.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){var e=this.props,t=e.feedResource,n=t.data,r=t.isLoaded,i=e.users,a=e.viewer;if(!r)return(0,f.jsx)(o.xH,{accessibilityLabel:this.props.i18n._('Loading spinner for like list', 'Accessibility label for loading spinner for like list', 'Accessibility label for loading spinner for like list'),show:!0});var l=n&&n.map(function(e){return e.id?m(m({},e),i[e.id]):e}).filter(function(e){return!!e.id});return(0,f.jsx)(o.xu,{ref:this.setRef,"data-test-id":"liked-by-list",maxHeight:400,children:l&&l.map(function(e){return(0,f.jsx)(o.xu,{paddingX:4,paddingY:3,children:(0,f.jsx)(u.Z,{isSelf:!!(a.isAuth&&a.id&&e.id===a.id),user:e})},e.id)})})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,x(r.key),r)}}(i.prototype,n),Object.defineProperty(i,"prototype",{writable:!1}),i}(r.Component);function P(e){var t=(0,a.Z)(),n=(0,i.Z)(),r=(0,d.dM)(),o=(0,l.Z)({url:"/v3/aggregated_comments/{aggregated_comment}/liked_by/",params:{aggregated_comment:e.id},noCache:!0});return(0,f.jsx)(j,m(m({},e),{},{feedResource:o,i18n:t,users:r,viewer:n}))}function w(e){var t=(0,a.Z)(),n=(0,i.Z)(),r=(0,d.dM)(),o=(0,l.Z)({url:"/v3/did_it/{user_did_it_data}/liked_by/",params:{user_did_it_data:e.id},noCache:!0});return(0,f.jsx)(j,m(m({},e),{},{feedResource:o,i18n:t,users:r,viewer:n}))}},290805:function(e,t,n){n.d(t,{Z:function(){return v}});var r=n(387784),o=n(20256),i=n(343669),a=n(24246),l=n(774838),s=n(959703),c=n(680811);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){g(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(m=function(){return!!e})()}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,n){return(t=_(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=u(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u(t)?t:t+""}var b=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),e&&p(a,e);var t,n,r=(t=m(),function(){var e,n=y(a);return e=t?Reflect.construct(n,arguments,y(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==u(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return h(e)}(this,e)});function a(){var e;if(!(this instanceof a))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return g(h(e=r.call.apply(r,[this].concat(n))),"state",{isFullscreen:!1,isPlaying:!1,showControls:!0,volumeLevel:0}),g(h(e),"handleTouch",function(t){t.event.stopPropagation(),e.setState(function(e){return{isPlaying:!e.isPlaying}})}),g(h(e),"handleShowControls",function(){return e.setState({showControls:!0})}),g(h(e),"handleHideControls",function(){return e.setState({showControls:!1})}),g(h(e),"handleEnded",function(t){t.event.stopPropagation(),e.setState({isPlaying:!1})}),g(h(e),"handlePause",function(t){t.event.stopPropagation(),e.setState({isPlaying:!1})}),g(h(e),"handlePlay",function(t){t.event.stopPropagation(),e.setState({isPlaying:!0})}),g(h(e),"handleToggleFullscreen",function(t){var n=t.event,r=t.fullscreen;n.stopPropagation(),e.setState({isFullscreen:r})}),g(h(e),"handleVolumeChange",function(t){var n=t.event,r=t.volume;n.stopPropagation(),e.setState({volumeLevel:r})}),e}return n=[{key:"render",value:function(){var e=this.props,t=e.item,n=e.requestContext,r=e.viewType,a=t.videos,l=null==a?void 0:a[0];if(!l)return null;var u=this.state,d=u.showControls,f=u.isFullscreen,p=u.isPlaying,h=u.volumeLevel,m=l.video_list.V_HLSV4;if(!m)return null;var y=m||{},g=y.height,_=y.width,b=y.thumbnail,v=y.url;return(0,c.jsx)(o.iP,{dataTestId:"tried-it-video",onMouseEnter:this.handleShowControls,onMouseLeave:this.handleHideControls,onTap:this.handleTouch,rounding:2,children:(0,c.jsx)(o.zd,{rounding:2,wash:!0,willChangeTransform:!((0,i.G6)(n.userAgent.browserName)&&f),children:(0,c.jsx)(s.ZP,{aspectRatio:Math.max((null!=_?_:1)/(null!=g?g:1),1),backgroundColor:"transparent",captions:"",contextLogData:{view:r,viewParameter:3071,component:172,objectId:t.id,video_id:l.id},controls:d,isAutoPlay:!1,onControlsPause:this.handlePause,onControlsPlay:this.handlePlay,onEnded:this.handleEnded,onFullscreenChange:this.handleToggleFullscreen,onPlay:function(){},onPlayError:function(){},onVolumeChange:this.handleVolumeChange,pinKey:null,playbackRate:1,playing:p,poster:b,preload:"auto",src:[{type:"video/m3u8",src:null!=v?v:""}],volume:h})})})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_(r.key),r)}}(a.prototype,n),Object.defineProperty(a,"prototype",{writable:!1}),a}(r.Component);function v(e){var t=(0,a.Z)(),n=(0,l.B)();return(0,c.jsx)(b,f(f({},e),{},{i18n:t,requestContext:n}))}},735571:function(e,t,n){n.d(t,{k:function(){return r.kH}});var r=n(400850),o=n(774838);t.Z=function(e){var t=e.dateFormatType,n=e.useUTC,i=e.value,a=(0,o.B)();return(0,r.ZP)(a.locale,i,t,void 0===n||n)}},400850:function(e,t,n){n.d(t,{A5:function(){return i},ZP:function(){return a},kH:function(){return r}});var r={LONG:"long",YEAR:"year",WEEKDAY_DATE:"weekday_date",WEEKDAY_DATE_TIME_TIMEZONE:"weekday_date_time_timezone",SHORT_WEEKDAY_DATE:"short_weekday_date",LONG_MONTH_YEAR:"long_month_year",NUMERIC:"numeric",MONTH_DAY:"month_day",SHORT_MONTH:"short_month",SHORT_MONTH_DAY:"short_month_day",DAY:"day",YEAR_SHORT_MONTH_DAY:"year_short_month_day",YEAR_SHORT_MONTH_DAY_HOUR:"year_short_month_day_hour",YEAR_SHORT_MONTH_DAY_TIME_TIMEZONE:"year_short_month_day_time_timezone",TIME:"time",TIME_TIMEZONE:"time_timezone",HOUR:"hour",TWO_DIGIT:"two_digit",TWO_DIGIT_YEAR:"two_digit_year",NUMERIC_WITH_TIME:"numeric_with_time",NUMERIC_WITH_TIME_TIMEZONE:"numeric_with_time_timezone"},o=function(e){switch(e){case r.YEAR:return{year:"numeric"};case r.LONG:return{year:"numeric",month:"long",day:"numeric"};case r.NUMERIC:return{year:"numeric",month:"numeric",day:"numeric"};case r.TWO_DIGIT:return{year:"numeric",month:"2-digit",day:"2-digit"};case r.TWO_DIGIT_YEAR:return{year:"2-digit",month:"2-digit",day:"2-digit"};case r.WEEKDAY_DATE:return{weekday:"long",month:"long",day:"numeric",year:"numeric"};case r.SHORT_WEEKDAY_DATE:return{weekday:"short",month:"numeric",day:"numeric"};case r.WEEKDAY_DATE_TIME_TIMEZONE:return{weekday:"short",month:"long",day:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"};case r.MONTH_DAY:return{month:"long",day:"numeric"};case r.SHORT_MONTH:return{month:"short"};case r.SHORT_MONTH_DAY:return{month:"short",day:"numeric"};case r.DAY:return{day:"numeric"};case r.LONG_MONTH_YEAR:return{month:"long",year:"numeric"};case r.YEAR_SHORT_MONTH_DAY:return{year:"numeric",month:"short",day:"numeric"};case r.YEAR_SHORT_MONTH_DAY_HOUR:return{month:"short",year:"numeric",day:"numeric",hour:"numeric"};case r.YEAR_SHORT_MONTH_DAY_TIME_TIMEZONE:return{month:"short",year:"numeric",day:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"};case r.TIME:return{hour:"numeric",minute:"2-digit"};case r.TIME_TIMEZONE:return{hour:"numeric",minute:"2-digit",timeZoneName:"short"};case r.HOUR:return{hour:"numeric"};case r.NUMERIC_WITH_TIME:return{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit"};case r.NUMERIC_WITH_TIME_TIMEZONE:return{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"};default:throw Error('invalid dateFormatType "'+e+'"')}};function i(){return -1!==Intl.DateTimeFormat.toString().indexOf("[native code]")}function a(e,t,n){var r=!(arguments.length>3)||void 0===arguments[3]||arguments[3],a=arguments.length>4?arguments[4]:void 0,l=o(n);return r?l.timeZone="UTC":a&&(l.timeZone=a),i()||(l.calendar="gregory"),new Intl.DateTimeFormat(e,l).format(t)}},289450:function(e,t,n){n.d(t,{Z:function(){return r}});function r(e){var t=!1;return{promise:new Promise(function(n,r){e.then(function(e){return t?r({isCanceled:!0}):n(e)},function(e){return t?r({isCanceled:!0}):r(e)})}),cancel:function(){t=!0}}}},937656:function(e,t,n){n.d(t,{$4:function(){return E},A7:function(){return R},AQ:function(){return G},Bj:function(){return _},DB:function(){return K},FM:function(){return ee},G9:function(){return U},GX:function(){return y},Hy:function(){return ed},JO:function(){return D},Ke:function(){return k},LM:function(){return o},Lc:function(){return ep},Lr:function(){return eu},MN:function(){return v},Mn:function(){return et},N8:function(){return g},NB:function(){return er},P0:function(){return eo},P9:function(){return es},Pn:function(){return x},S:function(){return z},TK:function(){return P},TZ:function(){return S},UU:function(){return d},Uw:function(){return $},W_:function(){return ec},XB:function(){return s},Xy:function(){return A},YM:function(){return w},aD:function(){return eh},aj:function(){return F},bA:function(){return L},bo:function(){return c},cH:function(){return e_},dS:function(){return C},eZ:function(){return h},fk:function(){return ea},g1:function(){return ef},gU:function(){return u},hH:function(){return B},i2:function(){return f},iR:function(){return H},jh:function(){return em},km:function(){return p},lx:function(){return M},mr:function(){return X},mt:function(){return W},n_:function(){return N},np:function(){return Y},of:function(){return r},pp:function(){return I},q:function(){return eg},qY:function(){return O},qm:function(){return el},rc:function(){return Q},ro:function(){return ey},sD:function(){return a},sG:function(){return m},u1:function(){return J},uR:function(){return l},v5:function(){return i},v9:function(){return q},vk:function(){return en},wj:function(){return j},x1:function(){return Z},yC:function(){return b},yI:function(){return T},yb:function(){return V},zr:function(){return ei}});var r=880,o=340,i=380,a=510,l=40,s=20,c=4,u=474,d=134,f=96,p=800,h=186,m=40,y=10,g=48,_=88,b=183,v=130,x=24,j=400,P=50,w=8,O=8,C=5,S=29,A=5,I=1.79,T=20,E=400,k=100,D=800,z=800,M=500,R=3e3,L=40,U=100,H=5,Z=["attempted","publishing","succeeded","uploading"],B={carousel:[{w:2,h:3},{w:3,h:4},{w:1,h:1}],single:[{w:2,h:3},{w:3,h:4},{w:1,h:1}],story:[{w:9,h:16}],storyFARPortrait:[{w:1,h:2},{w:9,h:16},{w:2,h:3},{w:3,h:4},{w:4,h:5},{w:1,h:1}],storyFARLandscape:[{w:2,h:1},{w:16,h:9},{w:3,h:2},{w:4,h:3},{w:5,h:4},{w:1,h:1}]},N=["tl","tc","tr","bl","bc","br"],F=["left","center"],V=["top","center","bottom"],Y=["none","uppercase"],W=["sm","md","lg"],G=[1,.75],K=198,X=132,q=1,J=56,$=240,Q="cubic-bezier(0.66, 0.025, 0.33, 0.975)",ee=1e3,et=1500,en=2,er=3,eo=20,ei=20,ea=2,el=["creating","processing","publishing","saving"],es=300.5,ec=4,eu=0xc800000,ed=2500,ef=3,ep="pin-builder-default-education-id",eh="pin-builder-default-tour-id",em="pin-builder-editing-tour-id",ey="save_from_url",eg=["processing","edited","creating","saving","saved"],e_=2048},174481:function(e,t,n){var r=n(387784);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var i=null,a=!1,l=0,s=function(){i&&clearTimeout(i),a=!0,i=setTimeout(function(){a=!1},100)},c=function(){0===l&&window.addEventListener("scroll",s),l+=1},u=function(){(l-=1)||window.removeEventListener("scroll",s)};t.Z=function(){var e,t=function(e){if(Array.isArray(e))return e}(e=(0,r.useState)(!1))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{for(i=(n=n.call(e)).next;!(s=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,2)||function(e,t){if(e){if("string"==typeof e)return o(e,2);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,2):void 0}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),n=t[0],i=t[1],l=(0,r.useRef)(null);(0,r.useEffect)(function(){return c(),function(){l.current&&clearTimeout(l.current),u()}},[]);var s=function e(t){l.current&&clearTimeout(l.current),l.current=t&&a?setTimeout(function(){return e(!0)},100):setTimeout(function(){i(t)},32)};return{isHovering:n,hoverHandlers:(0,r.useRef)({onMouseOver:function(){return s(!0)},onMouseLeave:function(){return s(!1)}}).current}}},771690:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(387784),o=n(289450);function i(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,void 0);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,void 0):void 0}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function l(){var e=(0,r.useRef)([]),t=(0,r.useRef)({});return(0,r.useEffect)(function(){return function(){[].concat(i(Object.keys(t.current).map(function(e){return t.current[e]})),i(e.current)).forEach(function(e){return e()})}},[]),function(n,r){if(r){var a=t.current[r];a&&(a(),delete t.current[r])}var l=(0,o.Z)(n),s=l.cancel,c=l.promise;return r?t.current[r]=s:e.current=[].concat(i(e.current),[s]),c}}},123215:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(20256),o=n(24246),i=n(680811);function a(){var e=(0,o.Z)();return(0,i.jsx)(r.kC,{alignItems:"center",justifyContent:"center",children:(0,i.jsx)(r.xH,{accessibilityLabel:e._('Loading editor', 'EditorWithMentionsFallback.loading', 'Message shown while waiting for the editor to load'),show:!0})})}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=l(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var u=(0,n(9065).Z)(function(){return Promise.all([n.e("56938"),n.e("96310")]).then(n.bind(n,520392))},void 0,function(e){return 520392},"app-www-EditorWithMentions-EditorWithMentionsInternal",function(e){return ["56938","96310"]});function d(e){return(0,i.jsx)(u,c(c({},e),{},{fallback:(0,i.jsx)(a,{})}))}},849877:function(e,t,n){n.d(t,{N:function(){return s},Z:function(){return u}});var r=n(20256),o=n(24246),i=n(216975),a=n(696749),l=n(680811);function s(e){var t=(0,o.Z)(),n=e.helpfulCount,a=e.isMarkedHelpfulByMe,s=e.onHelpfulClick,c=t._('Helpful', 'Comments marked helpful text.', 'Comments marked helpful text.'),u=(0,i.nk)(t._('Helpful {{helpfulCount}}', 'Comments marked helpful count text.', 'Comments marked helpful count text.'),{helpfulCount:n||0});return(0,l.jsx)(r.kC,{alignItems:"center",dataTestId:"helpful-button",justifyContent:"center",children:(0,l.jsx)(r.iP,{onTap:s,rounding:2,children:(0,l.jsxs)(r.kC,{alignItems:"center",justifyContent:"start",children:[(0,l.jsx)(r.JO,{accessibilityLabel:"helpful icon",color:a?"brandPrimary":"subtle",icon:"thumbs-up",size:16}),(0,l.jsx)(r.xu,{paddingX:1,children:(0,l.jsx)(r.xv,{color:"subtle",size:"100",weight:"bold",children:void 0!==n&&n>0?u:c})})]})})})}function c(e){var t=e.likeCount,n=e.isLikedByMe,o=e.onLikeClick;return(0,l.jsx)(r.kC,{alignItems:"center",justifyContent:"center",children:(0,l.jsx)(r.iP,{onTap:o,rounding:2,children:(0,l.jsxs)(r.xu,{"data-test-id":"reactions-likeWithCountButton",display:"flex",children:[(0,l.jsx)(r.JO,{accessibilityLabel:"like icon",color:n?"brandPrimary":"subtle",icon:"heart",size:16}),t>0&&(0,l.jsx)(r.xu,{"data-test-id":"reactions-likeCount",paddingX:1,children:(0,l.jsx)(r.xv,{color:"subtle",size:"100",weight:"bold",children:t})})]})})})}function u(e){var t=(0,o.Z)(),n=e.commentCount,i=void 0===n?0:n,u=e.reactionCounts,d=e.hideReplyCount,f=e.isLikedByMe,p=e.onLikeClick,h=e.onReplyClick,m=e.onReplyCountClick,y=e.isMarkedHelpfulByMe,g=e.onHelpfulClick,_=e.helpfulCount,b=e.flyout,v=e.small,x=(void 0===u?{}:u)[1]||0,j=!!i&&(0,a.Z)(t.ngettext('{{commentCount}} reply', '{{commentCount}} replies', i, ' - ', ' -- '),{commentCount:i}),P=v?1:2;return(0,l.jsxs)(r.kC,{alignItems:"center",children:[(0,l.jsxs)(r.xu,{display:"flex",marginEnd:-P,marginStart:-P,children:[(0,l.jsx)(c,{isLikedByMe:void 0!==f&&f,likeCount:x,onLikeClick:p}),(0,l.jsx)(r.xu,{paddingX:P,children:(0,l.jsx)(r.xu,{"data-test-id":"reactions-reply",children:(0,l.jsx)(r.hU,{accessibilityLabel:"Reply",bgColor:"transparent",icon:"speech",iconColor:"gray",onClick:h,size:v?"sm":"md"})})}),!!b&&(0,l.jsx)(r.xu,{paddingX:P,children:b})]}),(0,l.jsxs)(r.xu,{display:"flex",flex:"grow",justifyContent:"end",marginEnd:-3,marginStart:-3,children:[!!j&&!d&&(0,l.jsx)(r.xu,{"data-test-id":"reactions-reply-count",children:(0,l.jsx)(r.xu,{paddingX:3,children:m?(0,l.jsx)(r.iP,{dataTestId:"reactions-reply-count-tap",onTap:m,rounding:2,children:(0,l.jsx)(r.xv,{color:"subtle",size:"200",weight:"bold",children:j})}):(0,l.jsx)(r.xv,{color:"subtle",size:"200",weight:"bold",children:j})})}),(0,l.jsx)(s,{helpfulCount:_,isMarkedHelpfulByMe:y,onHelpfulClick:g})]})]})}},643121:function(e,t,n){n.d(t,{Z:function(){return y}});var r=n(387784),o=n(581722),i=n(20256),a=n(583875),l=n(24246),s=n(216975),c=n(338065),u=n(149125),d=n(680717),f=n(687163),p=n(680811);function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function y(e){var t=e.isSelf,n=e.showVerified,m=e.user,y=void 0===m?{}:m,g=e.onFollowChange,_=h((0,r.useState)(y.explicitly_followed_by_me||!1),2),b=_[0],v=_[1],x=h((0,r.useState)(!1),2),j=x[0],P=x[1],w=(0,o.I0)(),O=(0,l.Z)(),C=function(){P(!1),w((0,d.fv)(y.id)),v(!1),g&&g(y,!1)},S=y.verified_identity,A=y.full_name,I=y.is_verified_merchant,T=y.is_private_profile,E=y.explicitly_followed_by_me,k=y.username,D=null==S?void 0:S.verified,z=y.image_medium_url||y.image_small_url;return(0,p.jsxs)(i.xu,{alignItems:"center","aria-label":O._('User', 'FollowersModal.User.card', 'Card for display user follower'),direction:"row",display:"flex",marginEnd:-1,marginStart:-1,paddingY:1,role:"group",children:[j&&(0,p.jsx)(u.Z,{firstName:null!=A?A:"",handleUnfollowUser:C,onDismiss:function(){P(!1)}}),(0,p.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{wordBreak:"break-word"}},flex:"grow",paddingX:1,children:(0,p.jsx)(i.Tg,{href:"/".concat(k,"/"),children:(0,p.jsxs)(i.kC,{alignItems:"center",gap:{row:2,column:0},justifyContent:"start",children:[(0,p.jsx)(i.xu,{width:50,children:(0,p.jsx)(a.qE,{accessibilityLabel:O._('User profile picture', 'FollowersModal.User.profilePicture', 'accessibility label for avatar main profile picture'),color:null==y?void 0:y.avatar_color_index,name:(0,s.nk)(O._('Avatar for {{ fullName }}', 'avatar.name', 'avatar for user'),{fullName:A}).join(" "),size:"fit",src:null!=z?z:""})}),(0,p.jsx)(i.X6,{accessibilityLevel:3,size:"300",children:(0,p.jsx)(i.xv,{inline:!0,lineClamp:3,size:"300",weight:"bold",children:void 0!==n&&n&&(I||D)?(0,p.jsx)(f.Z,{badgeSize:"sm",badgeSpacing:2,fullName:null!=A?A:"",isVerifiedIdentity:D,isVerifiedMerchant:I}):A})}),T&&(0,p.jsx)(i.xu,{children:(0,p.jsx)(i.JO,{accessibilityLabel:O._('private icon', 'privateProfileHeaderAuthDesktop.privateIcon', 'private icon'),icon:"lock",inline:!0})})]})})}),(0,p.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{whiteSpace:"nowrap"}},paddingX:1,children:(!T||E)&&(0,p.jsx)(c.Z,{followEventType:45,id:y.id,isFollowed:b,isUserMe:!!t,onFollow:function(e){w((0,d.ZN)(e)),v(!0),g&&g(y,!0)},onUnfollow:function(){T?P(!0):C()},pinKey:null,textType:"FollowUnfollow",unfollowEventType:46,viewType:4})})]})}},149125:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(20256),o=n(465784),i=n(24246),a=n(216975),l=n(739405),s=n(680811);function c(e){var t=e.onDismiss,n=e.firstName,c=e.handleUnfollowUser,u=(0,i.Z)(),d=(0,l.HG)(),f=(0,a.nk)(u._('Unfollow {{ firstName }}?', 'unfollowUser.modal.header', 'header text asking if we should unfollow the user. firstName: name of the user to unfollow'),{firstName:n}).join(""),p=u._('You will no longer be able to view their profile, Pins, boards, followers or following lists. They will not be notified.', 'unFollowUser.modal.description', 'explanation of what removing another user means'),h=u._('Cancel', 'unfollowUser.modal.cancel', 'Cancel unfollowing a user'),m=u._('Unfollow', 'unfollowUser.modal.button.unfollow', 'Button to confirm removing a user');return d?(0,s.jsx)(o.ZP,{accessibilityModalLabel:f,footer:(0,s.jsxs)(r.xu,{alignItems:"center",display:"flex",justifyContent:"end",marginEnd:-1,marginStart:-1,children:[(0,s.jsx)(r.xu,{padding:1,children:(0,s.jsx)(r.zx,{fullWidth:!0,onClick:t,size:"lg",text:h})}),(0,s.jsx)(r.xu,{padding:1,children:(0,s.jsx)(r.zx,{color:"red",fullWidth:!0,onClick:c,size:"lg",text:m})})]}),heading:f,onDismiss:t,role:"alertdialog",size:"md",children:(0,s.jsx)(r.xu,{"data-test-id":"unfollow-text",marginEnd:6,marginStart:6,children:(0,s.jsx)(r.xv,{children:p})})}):(0,s.jsxs)(o.ZP,{accessibilityModalLabel:f,mobileHideCloseIcon:!0,onDismiss:t,type:"unFollow_button",children:[(0,s.jsx)(r.xu,{alignItems:"center",display:"flex",paddingX:3,paddingY:5,children:(0,s.jsx)(r.X6,{accessibilityLevel:1,size:"600",children:f})}),(0,s.jsx)(r.xu,{marginBottom:4,marginEnd:4,marginStart:4,children:(0,s.jsx)(r.xv,{children:p})}),(0,s.jsxs)(r.xu,{alignItems:"center",display:"flex",justifyContent:"center",marginBottom:8,children:[(0,s.jsx)(r.xu,{padding:1,children:(0,s.jsx)(r.zx,{fullWidth:!0,onClick:t,size:"md",text:h})}),(0,s.jsx)(r.xu,{padding:1,children:(0,s.jsx)(r.zx,{color:"red",fullWidth:!0,onClick:c,size:"md",text:m})})]})]})}},649766:function(e,t,n){n.d(t,{MM:function(){return a},Y8:function(){return i},bl:function(){return l},qj:function(){return s}});var r=n(216975),o=n(937656);function i(e,t){return e?t._('Title too long. Make sure all cards\' titles have less than 100 characters', 'Title entered is too long while editing a carousel pin and/or one of its pins', 'Title entered is too long while editing a carousel pin and/or one of its pins'):t._('Title too long. Make sure title has less than 100 characters', 'Title entered is too long while editing a pin', 'Title entered is too long while editing a pin')}function a(e,t){return e?t._('Description too long. Make sure all cards\' descriptions have less than 500 characters', 'Description entered is too long while editing a carousel pin and/or one of its pins', 'Description entered is too long while editing a carousel pin and/or one of its pins'):(0,r.nk)(t._('Description too long. Make sure description has less than {{ limit }} characters', 'editPinModal.errorMessages.descriptionError', 'Description entered is too long while editing a pin. limit: the maximum number of characters allowed'),{limit:o.JO}).join("")}function l(e,t){return t._('Too many mentions. Make sure you have at most 5.', 'editPinModal.errorMessages.userMentionOverLimit', 'Too many mentions used in the description')}function s(e,t){return e?t._('Need to provide a valid URL. Make sure all cards\' links are valid', 'Invalid URL/link provided while editing a carousel pin and/or one of its pins', 'Invalid URL/link provided while editing a carousel pin and/or one of its pins'):t._('Need to provide a valid URL. Make sure the link is valid', 'Invalid URL/link provided while editing a pin', 'Invalid URL/link provided while editing a pin')}},449058:function(e,t,n){n.d(t,{Z:function(){return j}});var r=n(387784),o=n(20256),i=n(681698),a=n(24246),l=n(507006),s=n(216975),c=n(514223),u=n(771690),d=n(680811);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){b(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(g=function(){return!!e})()}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,n){return(t=v(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=f(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==f(t)?t:t+""}var x=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),e&&m(a,e);var t,n,r=(t=g(),function(){var e,n=_(a);return e=t?Reflect.construct(n,arguments,_(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==f(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return y(e)}(this,e)});function a(){var e;if(!(this instanceof a))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return b(y(e=r.call.apply(r,[this].concat(n))),"state",{recommendations:[],selectedIndex:0,resourceLoaded:!1}),b(y(e),"onDismiss",function(){}),b(y(e),"mounted",!1),b(y(e),"addHashtag",function(t){e.props.addHashtag(t),e.setState({recommendations:[]})}),b(y(e),"handleKeyDown",function(t){t.keyCode===c.Z.UP?e.handlePrevHashtag(t):t.keyCode===c.Z.DOWN?e.handleNextHashtag(t):t.keyCode===c.Z.ESCAPE?e.handleClose(t):t.keyCode===c.Z.ENTER&&e.handleSubmit(t)}),b(y(e),"handlePrevHashtag",function(t){t.preventDefault(),e.state.selectedIndex>0&&e.setState(function(e){return{selectedIndex:e.selectedIndex-1}})}),b(y(e),"handleNextHashtag",function(t){t.preventDefault(),e.state.selectedIndex<e.state.recommendations.length-1&&e.setState(function(e){return{selectedIndex:e.selectedIndex+1}})}),b(y(e),"handleClose",function(t){t.preventDefault(),e.setState({recommendations:[]})}),b(y(e),"handleSubmit",function(t){t.preventDefault(),e.addHashtag(e.state.recommendations[e.state.selectedIndex].query)}),b(y(e),"callResource",function(t){(0,e.props.makeCancelablePromise)((0,i.Z)({url:"/v3/search/autocomplete/",data:{q:t,show_pin_count:!0}}),"typeahead").then(function(t){if(e.mounted){var n=t.resource_response.data;e.setState({recommendations:n.slice(0,5),resourceLoaded:!0})}}).catch(function(t){t.isCanceled||e.setState({resourceLoaded:!1})})}),e}return n=[{key:"componentDidMount",value:function(){this.mounted=!0,this.callResource(this.props.query),window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(e){this.props.query!==e.query&&""!==this.props.query&&this.callResource(this.props.query)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown),this.mounted=!1}},{key:"render",value:function(){var e=this,t=this.state,n=t.recommendations,r=t.resourceLoaded,i=t.selectedIndex,a=this.props,c=a.anchor,u=a.idealDirection,f=n.filter(function(e){return e.query}),p="flyout_"+f.length;return r&&f.length>0?(0,d.jsx)(o.J2,{anchor:c,idealDirection:u||"down",onDismiss:this.onDismiss,size:"sm",children:(0,d.jsx)(o.xu,{width:"100%",zIndex:new o.Ry(3),children:f.length>0?f.map(function(t,n){return(0,d.jsx)(o.iP,{fullWidth:!1,onTap:function(){return e.addHashtag(t.query)},children:(0,d.jsxs)(o.xu,{alignItems:"center",color:n===i?"secondary":"transparent",display:"flex",justifyContent:"between",padding:1,children:[(0,d.jsx)(o.xu,{flex:"grow",children:(0,d.jsx)(o.xv,{inline:!0,size:"200",weight:"bold",children:t.query})}),(0,d.jsx)(o.xu,{flex:"none",children:(0,d.jsx)(o.xv,{inline:!0,size:"100",children:(0,s.nk)(e.props.i18n.ngettext('{{ count }} pin', '{{ count }} pins', Number(t.pin_count), 'label for n pins in hashtag flyout', 'label for n pins in hashtag flyout'),{count:(0,d.jsx)(l.Z,{value:Number(t.pin_count)},"pinCount")})})})]})},t.query)}):null})},p):null}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v(r.key),r)}}(a.prototype,n),Object.defineProperty(a,"prototype",{writable:!1}),a}(r.Component);function j(e){var t=(0,a.Z)(),n=(0,u.Z)();return(0,d.jsx)(x,h(h({},e),{},{i18n:t,makeCancelablePromise:n}))}},864636:function(e,t,n){n.d(t,{d:function(){return r}});var r={BOARD:"board",PIN:"pin",DID_IT:"did_it",PINNER:"pinner",USER:"user",TODAY_ARTICLE:"today_article",FOLLOW_INVITE:"follow_invite"}},945331:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(581722),o=n(20256),i=n(24246),a=n(216975),l=n(228612),s=n(157498),c=n(680811);function u(e){var t,n,u,d,f,p,h,m,y,g,_,b=e.triedItId,v=(0,i.Z)(),x=(0,r.v9)(function(e){return e.triedits[b]}),j=(0,s.mN)()(null!=(t=x.user)?t:""),P=(0,l.S6)()(null!=(n=x.pin)?n:"");return P&&j?(0,c.jsxs)(o.xu,{children:[(0,c.jsxs)(o.xu,{alignItems:"center",column:12,display:"flex",children:[(0,c.jsx)(o.sg,{span:2,children:(0,c.jsx)(o.xu,{marginEnd:1,children:(0,c.jsx)(o.HE,{accessibilityLabel:v._('User`s avatar', 'User`s avatar', 'User`s avatar'),collaborators:[{name:null!=(u=j.full_name)?u:"",src:j.image_medium_url||j.image_large_url||void 0,color:j.avatar_color_index||void 0}],href:"/".concat(encodeURIComponent(j.username),"/"),role:"link"})})}),(0,c.jsx)(o.sg,{span:2,children:(0,c.jsx)(o.xu,{marginEnd:2,children:(0,c.jsx)(o.Tg,{href:"/pin/".concat(P.id,"/"),rounding:2,tapStyle:"none",children:(0,c.jsx)(o.zd,{rounding:2,wash:!0,children:(null==(d=P.images)||null==(f=d["136x136"])?void 0:f.url)&&(0,c.jsx)(o.Ee,{alt:P.description||"",color:"#767676",naturalHeight:136,naturalWidth:136,src:null==(p=P.images)?void 0:p["136x136"].url})})})})}),(0,c.jsx)(o.sg,{span:8,children:(0,c.jsx)(o.xv,{size:"200",weight:"bold",children:(0,c.jsx)(o.rU,{href:"/pin/".concat(P.id,"/"),tapStyle:"none",children:(0,a.nk)(v._('{{ name }} tried this Pin', ' - ', ' -- '),{name:j.full_name})})})})]}),(null==x||null==(h=x.images)||null==(m=h[0])?void 0:m["550x"])&&(0,c.jsx)(o.xu,{marginTop:2,children:(0,c.jsx)(o.zd,{rounding:2,children:(0,c.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{paddingBottom:"100%"}},position:"relative",children:(0,c.jsx)(o.xu,{bottom:!0,left:!0,position:"absolute",right:!0,top:!0,children:x.images[0]["550x"].url&&(0,c.jsx)(o.Ee,{alt:null!=(y=x.details)?y:"",color:"#767676",fit:"cover",naturalHeight:1,naturalWidth:1,src:x.images[0]["550x"].url})})})})}),(0,c.jsxs)(o.xu,{column:10,marginTop:2,children:[!!(null!=x&&x.like_count)&&x.like_count>0&&(0,c.jsx)(o.xu,{paddingY:1,children:(0,c.jsx)(o.xv,{color:"subtle",inline:!0,size:"100",children:(0,c.jsx)(o.rU,{display:"inlineBlock",href:"/tried_it/".concat(encodeURIComponent(null!=(g=x.id)?g:""),"/likes/"),rounding:2,underline:"hover",children:(0,a.nk)(v.ngettext('1 person likes this', '{{ count }} people like this', null != (_ = x.like_count) ? _ : 0, 'person or people liking a given tried it', 'person or people liking a given tried it'),{count:x.like_count})})})}),(0,c.jsx)(o.xv,{children:null==x?void 0:x.details})]})]}):null}},985543:function(e,t,n){n.d(t,{X:function(){return f},Z:function(){return d}});var r=n(387784),o=n(213491),i=n(566431);function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REPORT_CONTENT_SHOW":return{id:t.payload.id,auxData:t.payload.auxData,isProduct:t.payload.isProduct,isPromoted:t.payload.isPromoted,parentId:t.payload.parentId,videoDuration:t.payload.videoDuration,viewParameter:t.payload.viewParameter,viewType:t.payload.viewType,type:t.payload.type,isThirdPartyAd:t.payload.isThirdPartyAd,nodeId:t.payload.nodeId};case"REPORT_CONTENT_DISMISS":return null;default:return e}}var l=n(680811);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var c=(0,o.Z)("ReportData"),u=c.Provider,d=c.get;function f(e){var t,n=e.children,o=function(e){if(Array.isArray(e))return e}(t=(0,r.useReducer)(a,null))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{for(i=(n=n.call(e)).next;!(s=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,2)||function(e,t){if(e){if("string"==typeof e)return s(e,2);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,2):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),c=o[0],d=o[1],f=(0,r.useCallback)(function(){return d({type:"REPORT_CONTENT_DISMISS"})},[]),p=(0,r.useCallback)(function(e,t,n){return d({type:"REPORT_CONTENT_SHOW",payload:{id:e,isProduct:!1,isPromoted:!1,parentId:t,videoDuration:null,viewParameter:null,viewType:null,type:n,nodeId:null}})},[]),h=(0,r.useCallback)(function(e,t,n){return d({type:"REPORT_CONTENT_SHOW",payload:{id:e,isProduct:!1,isPromoted:!1,videoDuration:null,viewParameter:t,viewType:n,type:"conversation",nodeId:null}})},[]),m=(0,r.useCallback)(function(e){return d({type:"REPORT_CONTENT_SHOW",payload:{id:e.id,isProduct:!1,isPromoted:!1,videoDuration:null,viewParameter:e.viewParameter,viewType:e.viewType,type:"pin",nodeId:e.nodeId}})},[]),y=(0,r.useCallback)(function(e){var t=e.pinId,n=e.isDownstreamPromotion,r=e.hasPromoter,o=e.firstVideoDuration,a=e.isProduct,l=e.viewParameter,s=e.viewType,c=e.isThirdPartyAd,u=e.nodeId;d({type:"REPORT_CONTENT_SHOW",payload:{id:t,auxData:e.auxData,isProduct:a,isPromoted:(0,i.jL)(n,r),videoDuration:o,viewParameter:l,viewType:s,type:"pin",isThirdPartyAd:c,nodeId:u}})},[]),g=(0,r.useMemo)(function(){return{reportData:c,dismiss:f,reportComment:p,reportConversation:h,reportImage:m,reportPin:y}},[c,f,p,h,m,y]);return(0,l.jsx)(u,{value:g,children:n})}}}]);