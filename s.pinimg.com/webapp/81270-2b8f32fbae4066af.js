"use strict";(self.legacyJsonp=self.legacyJsonp||[]).push([["81270"],{410109:function(e,t,n){n.d(t,{Z:function(){return x}});var r=n(387784),i=n(316558),o=n(665413),a=n(776446),u=n(560619),s=n(20256),c=n(680811),l=function(e){var t=e.children,n=e.description,i=e.error,o=e.id,a=e.label,u=e.required,l=e.onLabelTouch;return(0,c.jsxs)(r.Fragment,{children:[(a||u)&&(0,c.jsx)(s.__,{htmlFor:o,children:(0,c.jsx)(s.xu,{marginBottom:1,children:(0,c.jsxs)(s.xv,{color:i?"error":"default",children:[a,u&&(0,c.jsx)(s.xv,{color:"error",inline:!0,weight:"bold",children:(0,c.jsx)("span",{"aria-hidden":"true",children:"*"})})]})})}),t,(!!i||!!n)&&(0,c.jsx)(s.__,{htmlFor:o,children:(0,c.jsx)(s.xu,{marginTop:1,children:l?(0,c.jsx)(s.iP,{onTap:l,children:(0,c.jsx)(s.xv,{color:i?"error":"default",size:"200",children:i||n})}):(0,c.jsx)(s.xv,{color:i?"error":"default",size:"200",children:i||n})})})]})};function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){v(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(y=function(){return!!e})()}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t,n){return(t=g(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=d(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d(t)?t:t+""}var I=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&m(i,e);var t,n,r=(t=y(),function(){var e,n=b(i);return e=t?Reflect.construct(n,arguments,b(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==d(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return h(e)}(this,e)});function i(){var e;if(!(this instanceof i))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return v(h(e=r.call.apply(r,[this].concat(n))),"setTextFieldInputRef",function(t){(0,e.props.forwardedRef)(t||null)}),v(h(e),"handleBlur",function(t){var n=t.event,r=e.props.onBlur;r&&r(n)}),v(h(e),"handleChange",function(t){var n=t.event,r=e.props.onChange;r&&r(n)}),v(h(e),"handleFocus",function(t){var n=t.event,r=e.props.onFocus;r&&r(n)}),v(h(e),"handleKeyDown",function(t){var n=t.event,r=e.props.onKeyDown;r&&r(n)}),e}return n=[{key:"render",value:function(){var e=this.props,t=e.accessibilityLabelIcon,n=e.disabled,r=e.icon,i=e.id,o=e.isRTL,a=void 0!==o&&o,u=e.onClick,l=e.placeholder,d=e.value;return(0,c.jsx)(s.iP,{dataTestId:"text-field-wrapper",onTap:u,children:(0,c.jsxs)(s.xu,{alignItems:"center",column:12,display:"flex",flex:"grow",position:"relative",children:[(0,c.jsx)(s.xu,{width:"100%",children:(0,c.jsx)(s.nv,{ref:this.setTextFieldInputRef,dataTestId:"text-field",disabled:n,id:i,onBlur:this.handleBlur,onChange:this.handleChange,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown,placeholder:l,size:"lg",value:d})}),(0,c.jsx)(s.xu,{left:a,position:"absolute",right:!a,children:(0,c.jsx)(s.xu,{marginEnd:4,position:"relative",children:(0,c.jsx)(s.JO,{accessibilityLabel:t,color:"default",icon:"clock"===r||"arrow-down"===r?r:"calendar",inline:!0})})})]})})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,g(r.key),r)}}(i.prototype,n),Object.defineProperty(i,"prototype",{writable:!1}),i}(r.Component),P=(0,r.forwardRef)(function(e,t){return(0,c.jsx)(I,f(f({},e),{},{forwardedRef:t}))}),S=n(24246),O=n(774838);function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach(function(t){k(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function j(e,t){return(j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function E(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(T=function(){return!!e})()}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t,n){return(t=M(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e){var t=function(e,t){if("object"!=D(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=D(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==D(t)?t:t+""}var R=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),e&&j(a,e);var t,n,r=(t=T(),function(){var e,n=C(a);return e=t?Reflect.construct(n,arguments,C(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==D(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return E(e)}(this,e)});function a(){var e;if(!(this instanceof a))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return k(E(e=r.call.apply(r,[this].concat(n))),"state",{showFlyout:!1}),k(E(e),"setTimeFieldRef",function(t){e.timeFieldRef=t}),k(E(e),"handleChange",function(t,n){var r=e.props.onChange;e.handleHideFlyout(),r({event:t,value:n})}),k(E(e),"handleShowFlyout",function(){e.setState({showFlyout:!0})}),k(E(e),"handleHideFlyout",function(){e.setState({showFlyout:!1})}),e}return n=[{key:"render",value:function(){for(var e=this,t=this.props,n=t.error,r=t.id,a=t.idealDirection,u=t.interval,d=t.minTime,p=t.maxTime,f=t.placeholder,m=t.value,h=t.disabled,y=t.maxHeight,b=t.requestContext,v=this.state.showFlyout,g=[],I=(0,o.Z)(p,d)/u,S=0;S<I;S+=1){var O=(0,i.Z)(d,S*u);g.push(O)}return(0,c.jsx)(l,{error:n,id:r,children:(0,c.jsxs)(s.xu,{position:"relative",children:[(0,c.jsx)(P,{ref:this.setTimeFieldRef,accessibilityLabelIcon:this.props.i18n._('Select a time', 'timeField.TextFieldWrapper.accessibilityLabel.clockIcon', 'Accessibility label for a clock icon showing on the time picker field'),disabled:void 0!==h&&h,icon:"clock",id:r,isRTL:b.isRTL,onFocus:this.handleShowFlyout,placeholder:f,value:m?m.toLocaleTimeString(["en-US"],{hour:"2-digit",minute:"2-digit"}):""}),v&&(0,c.jsx)(s.Lt,{anchor:this.timeFieldRef,disableMobileUI:!0,id:"time-field-dropdown",idealDirection:a,isWithinFixedContainer:!0,maxHeight:y,onDismiss:this.handleHideFlyout,zIndex:new s.Ry(1e3),children:g.map(function(t){var n=t.toLocaleTimeString(["en-US"],{hour:"2-digit",minute:"2-digit"});return(0,c.jsx)(s.Lt.Item,{dataTestId:"time-field-option",onSelect:function(n){var r=n.event;return e.handleChange(r,t)},option:{label:n,value:n},children:(0,c.jsx)(s.xv,{color:"default",size:"200",weight:"bold",children:n})},t.getTime())})})]})})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,M(r.key),r)}}(a.prototype,n),Object.defineProperty(a,"prototype",{writable:!1}),a}(r.Component);function x(e){var t=(0,S.Z)();return(0,c.jsx)(R,_(_({},e),{},{i18n:t,requestContext:(0,O.B)()}))}k(R,"defaultProps",{interval:30,minTime:(0,u.Z)(new Date),maxTime:(0,a.Z)(new Date)})},667980:function(e,t,n){n.d(t,{N:function(){return a},Z:function(){return o}});var r=n(20256),i=n(680811);function o(e){var t=e.children,n=e.fullWidth,o=e.overrideDataTestId;return(0,i.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"auto",width:n?"100%":void 0}},"data-test-id":o||"pointer-events-wrapper",children:t})}function a(e){var t=e.children;return e.enabled?(0,i.jsx)(o,{children:t}):t}},735571:function(e,t,n){n.d(t,{k:function(){return r.kH}});var r=n(400850),i=n(774838);t.Z=function(e){var t=e.dateFormatType,n=e.useUTC,o=e.value,a=(0,i.B)();return(0,r.ZP)(a.locale,o,t,void 0===n||n)}},809293:function(e,t,n){n.d(t,{C0:function(){return y},Nn:function(){return r.Z},Mt:function(){return p}});var r=n(610568),i=n(387784),o=n(968254),a=n(849550),u=n(774838),s=n(680811);function c(e,t,n,r,i,o,a){try{var u=e[o](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,i)}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var d=(0,i.forwardRef)(function(e,t){var n,r=e.disabled,d=e.disableMobileUI,p=e.errorMessage,f=e.errorMessageDisplay,m=e.excludeDates,h=e.helperText,y=e.id,b=e.idealDirection,v=e.includeDates,g=e.label,I=e.maxDate,P=e.minDate,S=e.mobileZIndex,O=e.mobileOnAnimationEnd,D=e.name,w=e.nextRef,_=e.onChange,j=e.onFocus,E=e.onBlur,T=e.placeholder,C=e.rangeEndDate,k=e.rangeSelector,M=e.rangeStartDate,R=e.readOnly,x=e.selectLists,U=e.size,A=e.value,F=e._overrideRangeDateFix,N=(0,u.B)().locale,B=function(e){if(Array.isArray(e))return e}(n=(0,i.useState)(void 0))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,u=[],s=!0,c=!1;try{for(o=(n=n.call(e)).next;!(s=(r=o.call(n)).done)&&(u.push(r.value),2!==u.length);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return u}}(n,2)||function(e,t){if(e){if("string"==typeof e)return l(e,2);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,2):void 0}}(n,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),L=B[0],z=B[1];return(0,i.useEffect)(function(){var e,t;(e=regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.Z)(N);case 2:z(e.sent);case 4:case"end":return e.stop()}},e)}),t=function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){c(o,r,i,a,u,"next",e)}function u(e){c(o,r,i,a,u,"throw",e)}a(void 0)})},function(){return t.apply(this,arguments)})()},[N,z]),(0,s.jsx)(o.Mt,{ref:t,_overrideRangeDateFix:F,disabled:r,disableMobileUI:d,errorMessage:p,errorMessageDisplay:f,excludeDates:m,helperText:h,id:y,idealDirection:b,includeDates:v,label:g,localeData:L,maxDate:I,minDate:P,mobileOnAnimationEnd:O,mobileZIndex:S,name:D,nextRef:w,onBlur:E,onChange:_,onFocus:j,placeholder:T,rangeEndDate:C,rangeSelector:k,rangeStartDate:M,readOnly:R,selectLists:x,size:U,value:A})});d.displayName="DatePicker";var p=d;function f(e,t,n,r,i,o,a){try{var u=e[o](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,i)}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var h=function(e){var t,n=e.maxDate,r=e.minDate,c=e.onCancel,l=e.onDateChange,d=e.onDateError,p=e.onDateFocus,h=e.onDateBlur,y=e.onSubmit,b=e.radioGroup,v=e.readOnly,g=e.dateValue,I=e.dateErrorMessage,P=e.secondaryDateValue,S=e.secondaryDateErrorMessage,O=e.onSecondaryDateBlur,D=e.onSecondaryDateChange,w=e.onSecondaryDateError,_=e.onSecondaryDateFocus,j=(0,u.B)().locale,E=function(e){if(Array.isArray(e))return e}(t=(0,i.useState)())||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,u=[],s=!0,c=!1;try{for(o=(n=n.call(e)).next;!(s=(r=o.call(n)).done)&&(u.push(r.value),2!==u.length);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return u}}(t,2)||function(e,t){if(e){if("string"==typeof e)return m(e,2);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,2):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),T=E[0],C=E[1];return(0,i.useEffect)(function(){var e,t;(e=regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.Z)(j);case 2:C(e.sent);case 4:case"end":return e.stop()}},e)}),t=function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){f(o,r,i,a,u,"next",e)}function u(e){f(o,r,i,a,u,"throw",e)}a(void 0)})},function(){return t.apply(this,arguments)})()},[j,C]),(0,s.jsx)(o.C0,{dateErrorMessage:I,dateValue:g,localeData:T,maxDate:n,minDate:r,onCancel:c,onDateBlur:h,onDateChange:l,onDateError:d,onDateFocus:p,onSecondaryDateBlur:O,onSecondaryDateChange:D,onSecondaryDateError:w,onSecondaryDateFocus:_,onSubmit:y,radioGroup:b,readOnly:v,secondaryDateErrorMessage:S,secondaryDateValue:P})};h.displayName="DateRange";var y=h},333623:function(e,t,n){n.d(t,{PG:function(){return i},Sl:function(){return o},nx:function(){return a},rt:function(){return s}});var r=n(937656);function i(e){return e.width>=r.FM&&e.height>=r.Mn}function o(e){return!!e&&("localImage"===e.type||"webImage"===e.type||"assetImage"===e.type)}function a(e,t){if(e<=0||t<=0)return!1;var n=e/t;return n>=1&&n<=r.pp}var u={STATIC:["TRAFFIC","CONSIDERATION","AWARENESS","WEB_CONVERSION","WEB_SESSIONS"],CAROUSEL:["TRAFFIC","CONSIDERATION","AWARENESS","WEB_CONVERSION","WEB_SESSIONS"],VIDEO:["TRAFFIC","CONSIDERATION","AWARENESS","WEB_CONVERSION","VIDEO_VIEW","WEB_SESSIONS","VIDEO_COMPLETION"],COLLECTIONS:["TRAFFIC","CONSIDERATION","AWARENESS","WEB_CONVERSION","WEB_SESSIONS"]};function s(e,t){return!!e&&!!t&&(u[e]||[]).includes(t)}},319910:function(e,t){t.Z=function(e){var t=e.url;return""===t||/^(https?:\/\/)?[a-z0-9_\-]+\..+/i.test(t)}},123215:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(20256),i=n(24246),o=n(680811);function a(){var e=(0,i.Z)();return(0,o.jsx)(r.kC,{alignItems:"center",justifyContent:"center",children:(0,o.jsx)(r.xH,{accessibilityLabel:e._('Loading editor', 'EditorWithMentionsFallback.loading', 'Message shown while waiting for the editor to load'),show:!0})})}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){var r,i;r=t,i=n[t],(r=function(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=u(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var l=(0,n(9065).Z)(function(){return Promise.all([n.e("56938"),n.e("96310")]).then(n.bind(n,520392))},void 0,function(e){return 520392},"app-www-EditorWithMentions-EditorWithMentionsInternal",function(e){return ["56938","96310"]});function d(e){return(0,o.jsx)(l,c(c({},e),{},{fallback:(0,o.jsx)(a,{})}))}},462957:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(20256),i=n(680811);function o(e){var t=e.htmlFor,n=e.errorMessage,o=e.errorMessageColor,a=e.icon;return(0,i.jsx)(r.__,{htmlFor:t,children:(0,i.jsx)(r.xu,{marginTop:1,children:(0,i.jsxs)(r.kC,{direction:"row",gap:2,children:[a,(0,i.jsx)(r.xv,{color:void 0===o?"error":o,size:"200",children:n})]})})})}},113759:function(e,t,n){n.d(t,{bq:function(){return d},x4:function(){return p}});var r=n(387784),i=n(15392),o=n(680811);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){var r,i;r=t,i=n[t],(r=function(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var c={showCloseupContentRight:!0,showProductDetailPage:!1,viewportSize:"lg",paneWidth:i.Gg,maxWidth:i.u6,descriptionPaneWidth:i.u6-i.Gg,isCommentAttachmentSelectorOpen:!1,isCommentComposerFocused:!1,isCommentPopoverInteractionActive:!1,isCommentThreadExpanded:!1,isCloseupMediaViewerOpen:!1,isMediaViewerOpen:!1,isShoppingModuleExpanded:!1,closeupWithinMasonryEnabled:!1,peekCloseupEnabled:!1,calculatedImageHeight:0,setAbortNoActionPlacementTimeout:function(){},setIsCloseupMediaViewerOpen:function(){},setIsCommentAttachmentSelectorOpen:function(){},setIsCommentComposerFocused:function(){},setIsCommentPopoverInteractionActive:function(){},setIsMediaViewerOpen:function(){},setIsShoppingModuleExpanded:function(){},setCalculatedImageHeight:function(){},setViewportSize:function(){}},l=(0,r.createContext)(c);function d(e){var t=e.children,n=e.value,i=(0,r.useMemo)(function(){return s(s({},c),n)},[n]);return(0,o.jsx)(l,{value:i,children:t})}function p(){var e=(0,r.useContext)(l);if(!e)throw Error("useCloseupContext must be used within CloseupContextProvider");return e}},15392:function(e,t,n){n.d(t,{$T:function(){return h},CI:function(){return a},Ch:function(){return s},E$:function(){return O},ER:function(){return m},Gb:function(){return c},Gg:function(){return i},Hf:function(){return v},Id:function(){return P},Ie:function(){return d},KP:function(){return p},Kn:function(){return u},O5:function(){return y},d2:function(){return l},dm:function(){return S},fF:function(){return I},g9:function(){return f},iB:function(){return g},rv:function(){return b},u6:function(){return o}});var r=n(20256),i=508,o=1016,a=488,u=992,s=672,c=1176,l=40,d=72,p=740,f=32,m=16,h=24,y=2,b=1,v=new r.Ry(5),g={ARTICLE:"https://schema.org/Article",BRAND:"https://schema.org/Brand",PRODUCT:"https://schema.org/Product",RECIPE:"https://schema.org/Recipe",OFFER:"https://schema.org/Offer",OUT_OF_STOCK:"https://schema.org/OutOfStock",PERSON:"https://schema.org/Person"},I={boxShadow:"0 2px 5px rgba(0, 0, 0, 0.06)",transition:"box-shadow 200ms ease-in-out"},P="calc(90vh - 80px)",S="calc(55vh + 80px)",O="calc(75vh - 80px)"},169051:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(347564),i=n(784086),o=n(930489),a=n(368021),u=n(608111);function s(e){var t=e.i18n,n=e.isAppend,s=e.isEmployee,c=e.pinDraft,l=e.pinDraftId,d=e.storyPinPublishStopwatch;return function(e){if(!c||!c.pinItemIds){var p=(0,r.Z)();e((c&&"story"===c.type?a.Z:o.Z)(l,p))}(null==c?void 0:c.type)==="story"&&e((0,u.Z)({i18n:t,isEmployee:s,pinDraftId:l,storyPinPublishStopwatch:d})),e((0,i.Z)(l,c,{isAppend:n}))}}},808814:function(e,t,n){n.d(t,{Z:function(){return r}});function r(e){return{type:"PIN_BUILDER_DELETE_PIN_DRAFT",payload:{pinDraftId:e}}}},936233:function(e,t,n){n.r(t),n.d(t,{_isPristine:function(){return j},addPinBuilderAsset:function(){return _},addPinBuilderPinDraftItemUpload:function(){return C},clearPinBuilderPinDrafts:function(){return b},clearSelectedPinBuilderPinDrafts:function(){return P},deselectAllPinBuilderPinDrafts:function(){return D},deselectPinBuilderPinDraft:function(){return I},duplicatePinDraft:function(){return v},selectAllPinBuilderPinDrafts:function(){return S},selectAllPinBuilderStoryPinDrafts:function(){return O},selectPinBuilderPinDraft:function(){return g},setCloseupImageSignature:function(){return R},setPinBuilderBatchEditMode:function(){return E},setPinBuilderEntryPoint:function(){return x},setPinBuilderPinItemUploadStatus:function(){return k},setPinBuilderPinItemUploadXhr:function(){return M},setPinBuilderSharedData:function(){return w},setPinEditorPinDraft:function(){return T},setShowDisabledPinCreationBanner:function(){return A},setShowFeedbackModal:function(){return U}});var r=n(347564),i=n(937656),o=n(784086),a=n(930489),u=n(761405),s=n(10109),c=n(368021),l=n(608111),d=n(834367),p=n(830565),f=["publishOption","scheduledDate","scheduledTime","selectedItem"];function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){var r,i;r=t,i=n[t],(r=function(e){var t=function(e,t){if("object"!=m(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=m(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==m(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function b(){return{type:"PIN_BUILDER_CLEAR_PIN_DRAFTS"}}function v(e,t,n){return function(i,u){var p=u().pinbuilder,f=p.pinDrafts,m=p.pinItems,h=p.pinDraftIdUploadStatusMap,b=p.storyPinItems,v=p.storyPinItemBlocks,g=f[e],I=h&&h[e]?h[e]:null,P=(0,r.Z)();I&&i((0,s.g)(P,I.status));var S=g.pinItemIds.map(function(o){var u=(0,r.Z)();if(m[o])i((0,a.Z)(P,u,m[o]));else if(b[o]){var s=b[o],p=s.blockIds.map(function(e){return v[e]});i((0,l.Z)({i18n:t,isEmployee:n,pinDraftId:e,storyPinPublishStopwatch:void 0})),i((0,c.Z)(P,u,y(y({},s),{},{blockIds:[]}))),p.forEach(function(t){i((0,d.Uo)(e,u,(0,r.Z)(),y({},t)))})}return I&&I.items[o]&&i(C(P,u,{status:I.items[o].status,xhr:null})),u});return i((0,o.Z)(P,y(y({},g),{},{pinItemIds:S,storyPinDraftId:null}),{insertBefore:e})),P}}function g(e){return{type:"PIN_BUILDER_SELECT_PIN_DRAFT",payload:{pinDraftId:e}}}function I(e){return{type:"PIN_BUILDER_DESELECT_PIN_DRAFT",payload:{pinDraftId:e}}}function P(){return{type:"PIN_BUILDER_CLEAR_SELECTED_PIN_DRAFTS"}}function S(){return function(e,t){var n=t().pinbuilder,r=n.selectedPinDraftIds,o=n.pinDrafts;n.pinDraftIds.forEach(function(t){var n=o[t].status;r.includes(t)||i.x1.includes(n)||e(g(t))})}}function O(){return function(e,t){var n=t(),r=n.pinbuilder.selectedPinDraftIds,o=(0,p.Wp)(n);Object.keys(o).forEach(function(t){var n=o[t],a=n.status;n.storyPinDraftId&&t&&!r.includes(t)&&!i.x1.includes(a)&&e(g(t))})}}function D(){return function(e,t){t().pinbuilder.selectedPinDraftIds.forEach(function(t){e(I(t))})}}function w(e){return function(t,n){var i=n().pinbuilder.selectedPinDraftIds,o=e.publishOption,a=e.scheduledDate,s=e.scheduledTime,c=e.selectedItem,l=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&({}).propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,f);i.forEach(function(e){t((0,u.NA)(e,y(y(y(y({},null!=o?{publishOption:o}:Object.freeze({})),void 0!==c?{selectedItem:c}:Object.freeze({})),void 0!==a?{scheduledDate:a}:Object.freeze({})),void 0!==s?{scheduledTime:s}:{}))),l.editorInstanceId=(0,r.Z)(),t((0,u.to)(e,l))})}}function _(e){return{type:"PIN_BUILDER_ADD_ASSET",payload:{asset:e}}}function j(e,t){var n=e.pinbuilder,r=n.pinDrafts,i=n.pinItems,o=r[t],a=o.selectedItem,u=o.pinItemIds,s=o.publishOption;return!a&&"publish-immediately"===s&&u.every(function(e){var t=i[e],n=t.description,r=t.link,o=t.media,a=t.title;return!n&&!r&&!a&&!o})}function E(e){return{type:"PIN_BUILDER_SET_BATCH_EDIT_MODE",payload:{isBatchEditMode:e}}}function T(e){return{type:"PIN_EDITOR_SET_PIN_DRAFT",payload:{editedPinDraftId:e}}}function C(e,t,n){return{type:"PIN_BUILDER_ADD_PIN_DRAFT_ITEM_UPLOAD",payload:{pinDraftId:e,pinItemId:t,upload:n}}}function k(e,t,n){return{type:"PIN_BUILDER_SET_PIN_ITEM_UPLOAD_STATUS",payload:{pinDraftId:e,pinItemId:t,status:n}}}function M(e,t,n){return{type:"PIN_BUILDER_SET_PIN_ITEM_UPLOAD_XHR",payload:{pinDraftId:e,pinItemId:t,xhr:n}}}function R(e){return{type:"PIN_BUILDER_SET_CLOSEUP_IMAGE_SIGNATURE",payload:{closeupImageSignature:e}}}function x(e){return{type:"PIN_BUILDER_ENTRY_POINT",payload:{entryPoint:e}}}function U(e){return{type:"PIN_BUILDER_SHOW_FEEDBACK_MODAL",payload:{showFeedbackModal:e}}}function A(e){return{type:"PIN_BUILDER_SHOW_DISABLE_PIN_CREATION_BANNER",payload:{showDisabledPinCreationBanner:e}}}},368021:function(e,t,n){n.d(t,{Z:function(){return r}});function r(e,t,n,r){return{type:"PIN_DRAFT_ADD_STORY_PIN_ITEM",payload:{pinDraftId:e,pinItemId:t,pinItem:n,options:r}}}},997582:function(e,t,n){n.d(t,{Z:function(){return r}});function r(e){return function(t,n){t&&console.log("".concat(e," - ").concat(n))}}},608111:function(e,t,n){n.d(t,{Z:function(){return z}});var r=n(542392),i=n(347564),o=n(236269),a=n(681698),u=n(216975),s=n(997582),c=n(701116);function l(e,t,n,r,i,o,a){try{var u=e[o](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,i)}var d=[200,201,204];function p(){var e;return e=regeneratorRuntime.mark(function e(t,n,r,i,o,a,s){var c,l,p,f,m,h,y,b,v,g;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c=(null==o?void 0:o.upload_id)||"",l=(null==o?void 0:o.upload_url)||"",p=(null==o?void 0:o.upload_parameters)||{},f=i.onFailure,m=i.onFinishUpload,h=i.onStartUpload,y=i.onUploadProgress,h&&h(c),b=new Date,v=new XMLHttpRequest,"image"===n?v.open("POST",l.replace("pinterest-media-upload.s3.amazonaws","u.pinimg"),!0):v.open("POST",l,!0),v.onload=function(){if(d.includes(v.status)){if(m){var e=(Date.now()-b.getTime())/1e3,t=v.getResponseHeader("x-amz-request-id");m(c,{amzId2:v.getResponseHeader("x-amz-id-2"),amzRequestId:t,uploadTimeSec:e,statusCode:v.status})}}else{var r="image"===n?1:8;f({uploadId:c,errorMsg:(0,u.nk)(s._('Failed to upload the {{ mediaType }} with XHR status code: {{ xhrStatus }}', 'uploadMedia.xhrOnLoad.failure', 'Error message when media does not upload'),{mediaType:n,xhrStatus:v.status}).join(),mediaUploadFailureReason:r,retry:!0})}},v.onerror=function(){var e="image"===n?1:8;f({uploadId:c,errorMsg:(0,u.nk)(s._('Failed to upload the {{ mediaType }}', 'uploadMedia.xhrOnError.failure', 'Error message when media does not upload'),{mediaType:n}).join(),mediaUploadFailureReason:e,retry:!0})},y&&(v.upload.onprogress=function(e){y(Math.round(100*(e.loaded/e.total)))}),g=new FormData,Object.keys(p).forEach(function(e){e&&p[e]&&g.append(e,p[e])}),g.append("file",t),v.send(g),e.abrupt("return",{uploadId:c,xhr:v});case 16:case"end":return e.stop()}},e)}),(p=function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){l(o,r,i,a,u,"next",e)}function u(e){l(o,r,i,a,u,"throw",e)}a(void 0)})}).apply(this,arguments)}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=v();return function(){var n,r=g(e);return n=t?Reflect.construct(r,arguments,g(this).constructor):r.apply(this,arguments),function(e,t){if(t&&("object"==f(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return b(e)}(this,n)}}function b(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(v=function(){return!!e})()}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,D(r.key),r)}}function P(e,t,n){return t&&I(e.prototype,t),n&&I(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function S(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function O(e,t,n){return(t=D(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=f(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==f(t)?t:t+""}var w=["webImage","webVideo"],_=P(function e(t){var n=this;S(this,e),O(this,"upload",function(){}),O(this,"onFailure",function(e){var t=e.errorMsg,r=e.mediaUploadFailureReason,i=e.retry,o=e.uploadId;i&&n.numAttempts<n.maxUploadAttempts?n.upload():(n.status="failed",n.callbackHandlers.onFailure({errorMsg:t,mediaUploadFailureReason:r,uploadId:o,storyPinPublishStopwatch:n.storyPinPublishStopwatch}))}),O(this,"onFinishProcessing",function(e,t){n.signature=t.signature,n.callbackHandlers.onFinishProcessing&&n.callbackHandlers.onFinishProcessing(e,t,n.storyPinPublishStopwatch)}),O(this,"onFinishUpload",function(e,t){n.status="uploaded",n.callbackHandlers.onFinishUpload&&n.callbackHandlers.onFinishUpload(e,t,n.storyPinPublishStopwatch)}),O(this,"onStartProcessing",function(e,t){n.signature=t.signature,n.callbackHandlers.onStartProcessing&&n.callbackHandlers.onStartProcessing(e,t,n.storyPinPublishStopwatch)}),O(this,"cancel",function(){n.xhr&&(n.xhr.abort(),n.callbackHandlers.onCancel&&n.callbackHandlers.onCancel(n.uploadId||"",n.storyPinPublishStopwatch))}),this.i18n=t.i18n,this.maxUploadAttempts=t.maxUploadAttempts||1,this.media=t.media,this.numAttempts=0,this.storyPinPublishStopwatch=t.storyPinPublishStopwatch,this.vipRegistration=t.vipRegistration,this.vipType=t.vipType,this.callbackHandlers=t.callbackHandlers}),j=function(e){m(n,e);var t=y(n);function n(e){var r;return S(this,n),O(b(r=t.call(this,e)),"getClassName",function(){return"ImageUpload"}),O(b(r),"onProcessingFailed",function(e){if(r.uploadId){var t=(0,u.nk)(r.i18n._('Failed to process image with uploadId {{ uploadId }} and failureCode {{ failureCode }}', 'MediaUpload.ImageUpload.onProcessingFailed', 'Error message for when image processing fails'),{failureCode:e,uploadId:r.uploadId}).join("");r.onFailure({uploadId:r.uploadId,errorMsg:t,mediaUploadFailureReason:3,mediaStatusFailureReason:e})}}),O(b(r),"onProcessingTimeout",function(){if(r.uploadId){var e=(0,u.nk)(r.i18n._('Timed out on processing image with uploadId {{ uploadId }}', 'MediaUpload.ImageUpload.onProcessingTimeout', 'Error message for when image processing times out'),{uploadId:r.uploadId}).join("");r.onFailure({uploadId:r.uploadId,errorMsg:e,mediaUploadFailureReason:4})}}),O(b(r),"upload",function(){"localImage"===r.media.type&&(r.numAttempts+=1,(function(e,t,n,r,i,o,a){return p.apply(this,arguments)})(r.media.fileSrc?r.media.fileSrc:(0,c.Mi)(r.media.src),"image",r.vipType,{onFailure:function(e){return r.onFailure(e)},onFinishUpload:r.onFinishUpload,onStartUpload:r.callbackHandlers.onStartUpload,onUploadProgress:r.callbackHandlers.onUploadProgress},r.vipRegistration,r.storyPinPublishStopwatch,r.i18n).then(function(e){r.uploadId=e.uploadId,r.xhr=e.xhr,r.status="uploading"}))}),r.signature=w.includes(e.media.type)?e.media.signature:null,r.status=w.includes(e.media.type)?"uploaded":"pending",r}return P(n)}(_),E=function(e){m(n,e);var t=y(n);function n(e){var r;return S(this,n),O(b(r=t.call(this,e)),"getClassName",function(){return"VideoUpload"}),O(b(r),"onProcessingFailed",function(e){if(r.uploadId){var t=(0,u.nk)(r.i18n._('Failed to process video with uploadId {{ uploadId }} and failureCode {{ failureCode }}', 'MediaUpload.VideoUpload.onProcessingFailed', 'Error message when video processing fails'),{uploadId:r.uploadId,failureCode:e}).join("");r.onFailure({uploadId:r.uploadId,errorMsg:t,mediaUploadFailureReason:10,mediaStatusFailureReason:e,storyPinPublishStopwatch:r.storyPinPublishStopwatch})}}),O(b(r),"onProcessingTimeout",function(){if(r.uploadId){var e=(0,u.nk)(r.i18n._('Timed out on processing video with uploadId {{ uploadId }}', 'MediaUpload.VideoUpload.onProcessingTimeout', 'Error message when video processing times out'),{uploadId:r.uploadId}).join("");r.onFailure({uploadId:r.uploadId,errorMsg:e,mediaUploadFailureReason:11,storyPinPublishStopwatch:r.storyPinPublishStopwatch})}}),O(b(r),"upload",function(){"localVideo"===r.media.type&&(r.numAttempts+=1,(function(e,t,n,r,i,o,a){return p.apply(this,arguments)})(r.media.fileSrc,"video",r.vipType,{onFailure:function(e){return r.onFailure(e)},onFinishUpload:r.onFinishUpload,onStartUpload:r.callbackHandlers.onStartUpload,onUploadProgress:r.callbackHandlers.onUploadProgress},r.vipRegistration,r.storyPinPublishStopwatch,r.i18n).then(function(e){r.uploadId=e.uploadId,r.xhr=e.xhr,r.status="uploading"}))}),r.signature=w.includes(e.media.type)?e.media.signature:null,r.status=w.includes(e.media.type)?"uploaded":"pending",r}return P(n)}(_);function T(e){return"localImage"===e.type||"webImage"===e.type}var C=n(73058),k=n(767415);function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach(function(t){F(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function U(e,t,n,r,i,o,a){try{var u=e[o](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,i)}function A(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){U(o,r,i,a,u,"next",e)}function u(e){U(o,r,i,a,u,"throw",e)}a(void 0)})}}function F(e,t,n){return(t=N(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N(e){var t=function(e,t){if("object"!=M(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=M(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==M(t)?t:t+""}var B=(0,s.Z)("[MEDIA UPLOAD MANAGER]"),L=function(){var e;function t(e){var n,r,s=this;if(!(this instanceof t))throw TypeError("Cannot call a class as a function");F(this,"getMediaRegistrationsFromVIP",(n=A(regeneratorRuntime.mark(function e(t){var n,r,c,l,d,p,f,m,h,y,b,v,g;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(r=t.count,c=t.durationMs,l=t.mediaMetadata,d=t.mediaType,f=void 0!==(p=t.shouldSkipPool)&&p,h=void 0===(m=t.retryCount)?0:m,y=r||("image"===d?2:1),f||(s.vipRegistrationPool[d].fetchingData=!0),s.debugLog("Getting media registration urls for ".concat(d,"s")),b=[],v=0;v<y;v+=1)b.push(x(x({id:(0,i.Z)(),media_type:"image"===d?"image-story-pin":"video-story-pin"},c?{upload_aux_data:{clips:[{durationMs:c,isFromImage:"image"===d,startTimestampMs:-1}]}}:{}),l?{media_metadata:{image_hash:l.imageHash,metadata:l.metadata,error_message:l.errorMessage}}:{}));return g=s.vipRegistrationRequestCounts[d],s.vipRegistrationRequestCounts[d]+=1,null==(n=s.storyPinPublishStopwatch)||n.subspanStart({name:"".concat(d,"_registration_").concat(g),bypassIsTimingCheck:!0}),e.abrupt("return",(0,a.Z)({url:"/v3/media/uploads/register/batch/",method:"POST",data:{media_info_list:JSON.stringify(b)},callOptions:{showError:3===h}}).then(function(e){var t,n="object"===M(e.resource_response.data)?Object.values(e.resource_response.data):[];return f||(s.vipRegistrationPool[d].data=n,s.vipRegistrationPool[d].fetchedLast=performance.now(),s.vipRegistrationPool[d].fetchingData=!1),null==(t=s.storyPinPublishStopwatch)||t.subspanStop({name:"".concat(d,"_registration_").concat(g),bypassIsTimingCheck:!0}),n},function(e){var t,n;return(0,k.nP)("storypin.publish.registration.".concat(d,".failure"),{sampleRate:1,tags:{reason:(0,o.Z)(e,"message"),retryCount:h}}),h<3?(s.debugLog("".concat(d," registration failed. ").concat(3-h," retries remaining. ").concat(e)),n=s.getMediaRegistrationsFromVIP({durationMs:c,mediaMetadata:l,mediaType:d,shouldSkipPool:f,count:r,retryCount:h+1})):(s.debugLog("".concat(d," registration failed. ").concat(e)),s.onFailure((0,u.nk)(s.i18n._('Failed to register {{ mediaType }} upload with message: {{ error }}', 'MediaUploadManager.getMediaRegistrationsFromVIP.failure', 'Error message for media upload'),{error:e,mediaType:d}).join(""),"image"===d?13:7),n=Promise.resolve(null)),null==(t=s.storyPinPublishStopwatch)||t.subspanStop({name:"".concat(d,"_registration_").concat(g),bypassIsTimingCheck:!0}),n}));case 10:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})),F(this,"initVIPRegistrationPools",function(){s.getMediaRegistrationsFromVIP({mediaType:"image"}),s.getMediaRegistrationsFromVIP({mediaType:"video"})}),F(this,"checkAllUploadsProcessingOrCompleted",function(){for(var e=0,t=Object.keys(s.mediaUploadsMap),n=0;n<t.length;n++){var r=t[n],i=s.mediaUploadsMap[r];s.debugLog("Status of media upload ID ".concat(r," ").concat(i.mediaUpload.getClassName()," ").concat(i.status)),("completed"===i.status||"processing"===i.status&&"VideoUpload"===i.mediaUpload.getClassName())&&(e+=1)}return s.debugLog("Checking if all upload processes completed"),s.debugLog("Completed ".concat(e," out of ").concat(Object.keys(s.mediaUploadsMap).length)),e===Object.keys(s.mediaUploadsMap).length}),F(this,"checkUploadsFailed",function(){return!!Object.keys(s.mediaUploadsMap).find(function(e){return"failed"===s.mediaUploadsMap[e].status&&s.mediaUploadsMap[e].processingRetryCount>2})}),F(this,"updateUploadStatus",function(e,t){return s.mediaUploadsMap[e].status=t}),F(this,"updateVIPStatusMap",function(e){for(var t=new Date,n=function(e){var n=e.mediaId,r=e.mediaUpload,i=e.signature,o=e.uploadId,a=(t.getTime()-s.vipStatusMap[o].timeSet.getTime())/1e3;r.onFinishProcessing(o,{processingTimeSec:a,signature:i}),s.updateUploadStatus(n,"completed")},r=0,i=Object.keys(e);r<i.length;r++){var o=i[r],a=e[o],u=a.failureCode,c=a.signature,l=a.status;if(o in s.vipStatusMap){var d=s.vipStatusMap[o].mediaId,p=s.mediaUploadsMap[d];if(u&&s.mediaUploadsMap[d].processingRetryCount>2){p.mediaUpload.onProcessingFailed(u),s.updateUploadStatus(d,"failed");break}s.vipStatusMap[o].status!==l||"failed"===l?(s.vipStatusMap[o]=x(x({},s.vipStatusMap[o]),{},{status:l,timeSet:t}),"processing"===l?(p.mediaUpload.onStartProcessing(o,{signature:c}),s.debugLog("Skipping media completion"),n({mediaId:d,mediaUpload:p.mediaUpload,signature:c,uploadId:o})):"succeeded"===l?(s.debugLog("Waited for media completion"),n({mediaId:d,mediaUpload:p.mediaUpload,signature:c,uploadId:o})):"failed"===l&&(s.mediaUploadsMap[d].processingRetryCount+=1,s.debugLog("Media upload ".concat(o," failed, but will keep checking ").concat(3-s.mediaUploadsMap[d].processingRetryCount," times if a retry succeeds.")))):s.statusTimeoutMap[l]&&(t.getTime()-s.vipStatusMap[o].timeSet.getTime())/1e3>=s.statusTimeoutMap[l].timeoutSec&&(p.mediaUpload.onProcessingTimeout(),s.statusTimeoutMap[l].onTimeout(o,d,s.mediaUploadsMap[d].mediaUpload.getClassName()))}}}),F(this,"refreshImageRegistration",A(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s.vipRegistrationPool.image={fetchedLast:0,data:[],fetchingData:!1},e.next=3,s.getMediaRegistrationsFromVIP({mediaType:"image"});case 3:case"end":return e.stop()}},e)}))),F(this,"getMediaRegistration",(r=A(regeneratorRuntime.mark(function e(t){var n,r,i,o,a,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=T(t)?"image":"video",i="localVideo"===t.type||"webVideo"===t.type?Math.round(1e3*(t.duration||0)):0,o="localImage"===t.type?t.mediaMetadata:void 0,!(i||o||!s.vipRegistrationPool[r])){e.next=8;break}return e.next=6,s.getMediaRegistrationsFromVIP({durationMs:i,mediaMetadata:o,mediaType:r,shouldSkipPool:!0,count:1});case 6:return u=e.sent,e.abrupt("return",null!=(a=null==u?void 0:u[0])?a:null);case 8:if(!s.vipRegistrationPool[r].fetchingData){e.next=11;break}return e.next=11,new Promise(function(e){var t=0,n=setInterval(function(){t+=1,s.vipRegistrationPool[r].fetchingData&&100!==t||(clearInterval(n),e(void 0))},100)});case 11:if(c=performance.now()-s.vipRegistrationPool[r].fetchedLast>=18e5,!(0===s.vipRegistrationPool[r].data.length||c)){e.next=15;break}return e.next=15,s.getMediaRegistrationsFromVIP({durationMs:i,mediaType:r});case 15:return e.abrupt("return",Promise.resolve(null!=(n=s.vipRegistrationPool[r].data.pop())?n:null));case 16:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)})),F(this,"hasAnyVideoUploads",function(){for(var e=0,t=Object.keys(s.mediaUploadsMap);e<t.length;e++){var n=t[e];if("VideoUpload"===s.mediaUploadsMap[n].mediaUpload.getClassName())return!0}return!1}),F(this,"getVipMapStatusesToString",function(){for(var e="{",t=0,n=Object.keys(s.vipStatusMap);t<n.length;t++){var r,i=n[t];e+="[".concat(i,"]:").concat(null!=(r=s.vipStatusMap[i].status)?r:"null"," ")}return e+"}"}),F(this,"handleFailure",function(e,t){s.failed||(s.onFailure(e,t),s.failed=!0)}),F(this,"handleCheckUploadsCompleted",function(){var e=s.checkAllUploadsProcessingOrCompleted();return e&&!s.completed&&(s.debugLog("All submitted media processed, calling onCompleted if it exists"),s.completed=!0,s.onCompleted()),e}),F(this,"onFinishUpload",function(e,t){s.vipStatusMap[e]={mediaId:t,status:null,timeSet:new Date},s.updateUploadStatus(t,"uploaded"),s.debugLog("Finished uploading media ID ".concat(t)),s.statusCheckInProgress||(s.statusCheckInProgress=!0,s.waitThenCheckStatus())}),F(this,"onUploadFailed",function(e,t,n){s.updateUploadStatus(e,"failed"),s.handleFailure(t,n),s.debugLog("Failed uploading media ID ".concat(e))}),F(this,"removeMediaUpload",function(e){s.mediaUploadsMap[e]&&(s.mediaUploadsMap[e].mediaUpload.cancel(),delete s.mediaUploadsMap[e])}),F(this,"addMediaUpload",function(e){var t=e.media,n=e.mediaId,r=e.uploadHandlers;s.getMediaRegistration(t).then(function(e){var i=x(x({},r),{},{onFailure:function(e){var t=e.uploadId,i=e.errorMsg,o=e.mediaUploadFailureReason;s.onUploadFailed(n,i,o),r.onFailure({uploadId:t,errorMsg:i,mediaUploadFailureReason:o})},onFinishUpload:function(e,t){s.onFinishUpload(e,n),r.onFinishUpload&&r.onFinishUpload(e,t)}}),o=T(t)?new j({callbackHandlers:i,i18n:s.i18n,maxUploadAttempts:s.maxMediaUploadAttempts,media:t,storyPinPublishStopwatch:s.storyPinPublishStopwatch,vipRegistration:e,vipType:"image-story-pin"}):new E({callbackHandlers:i,i18n:s.i18n,maxUploadAttempts:s.maxMediaUploadAttempts,media:t,storyPinPublishStopwatch:s.storyPinPublishStopwatch,vipRegistration:e,vipType:"video-story-pin"});if(s.mediaUploadsMap[n]){s.debugLog("Cancelling existing upload media ID ".concat(n)),s.mediaUploadsMap[n].mediaUpload.cancel();var a=s.mediaUploadsMap[n].mediaUpload.uploadId;a&&a in s.vipStatusMap&&delete s.vipStatusMap[a]}s.debugLog("Added media ID to upload ".concat(n)),s.mediaUploadsMap[n]={mediaUpload:o,status:"pending",processingRetryCount:0},o.upload(),s.updateUploadStatus(n,"uploading")})}),F(this,"reset",function(){s.failed=!1,s.statusCheckFailureCount=0,s.completed=!1}),F(this,"cancelAll",function(){for(var e=0,t=Object.keys(s.mediaUploadsMap);e<t.length;e++){var n=t[e];"uploading"===s.mediaUploadsMap[n].status&&s.mediaUploadsMap[n].mediaUpload.cancel()}}),F(this,"checkStatus",A(regeneratorRuntime.mark(function e(){var t,n,r,i,a,c,l,d,p,f,m;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.checkUploadsFailed()){e.next=4;break}return s.statusCheckInProgress=!1,s.debugLog("There is a failure in check status ".concat(s.getVipMapStatusesToString())),e.abrupt("return");case 4:if(s.debugLog("Checking status ".concat(s.getVipMapStatusesToString())),s.statusCheckInProgress=!0,!((t=Object.keys(s.vipStatusMap)).length>0)){e.next=26;break}return e.prev=8,e.next=11,(0,C.Z)(t,s.statusCheckFailureCount);case 11:for(n=e.sent,s.updateVIPStatusMap(n),s.debugLog("Check status response received ".concat(s.getVipMapStatusesToString())),r=s.handleCheckUploadsCompleted(),i=Object.keys(s.vipStatusMap),a=0,c=i;a<c.length;a++)l=c[a],d=s.vipStatusMap[l].mediaId,s.mediaUploadsMap[d]?"completed"===s.mediaUploadsMap[d].status&&(p=s.mediaUploadsMap[d].mediaUpload.signature,s.mediaUploadsMap[d].mediaUpload.vipType.includes("video")&&p&&(null==(f=s.storyPinPublishStopwatch)||f.updateSubspanName({currentName:"video_page_upload-".concat(l),newName:"video_page_upload-".concat(p),bypassIsTimingCheck:!0}),null==(m=s.storyPinPublishStopwatch)||m.updateSubspanName({currentName:"video_page_publish-".concat(l),newName:"video_page_publish-".concat(p),bypassIsTimingCheck:!0})),delete s.vipStatusMap[l]):(0,k.nP)("storypin.publish.media_uploads_map.missing_upload_id",{sampleRate:1,tags:{retryCount:s.statusCheckFailureCount,mediaId:d,vipId:l,mediaType:void 0}});r?s.statusCheckInProgress=!1:s.waitThenCheckStatus(),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(8),s.statusCheckFailureCount+=1,s.statusCheckFailureCount>4?(s.debugLog("Failing upload because status check failed ".concat(s.statusCheckFailureCount," times")),s.handleFailure((0,u.nk)(s.i18n._('Could not check VIP status with error: {{ errorName }} {{ errorMessage }}', 'MediaUploadManager.checkStatus.error', 'Error message for media upload'),{errorName:(0,o.Z)(e.t0,"name"),errorMessage:(0,o.Z)(e.t0,"message")}).join(""),14),s.statusCheckInProgress=!1):(s.debugLog("Continuing upload because status check only failed ".concat(s.statusCheckFailureCount," times")),s.waitThenCheckStatus());case 24:e.next=27;break;case 26:s.handleCheckUploadsCompleted()||s.waitThenCheckStatus();case 27:case"end":return e.stop()}},e,null,[[8,20]])}))),F(this,"waitThenCheckStatus",function(){setTimeout(s.checkStatus,s.hasAnyVideoUploads()?3e3:1e3)}),this.onCancel=e.onCancel,this.onCompleted=e.onCompleted,this.onFailure=e.onFailure,this.statusTimeoutMap=e.statusTimeoutMap,this.maxMediaUploadAttempts=e.maxMediaUploadAttempts,this.inDebugMode=e.inDebugMode,this.storyPinPublishStopwatch=e.storyPinPublishStopwatch,this.i18n=e.i18n,this.statusCheckInProgress=!1,this.completed=!1,this.failed=!1,this.vipRegistrationPool={image:{fetchedLast:0,data:[],fetchingData:!1},video:{fetchedLast:0,data:[],fetchingData:!1}},this.vipRegistrationRequestCounts={image:0,video:0},this.statusCheckFailureCount=0,this.mediaUploadsMap={},this.vipStatusMap={}}return e=[{key:"debugLog",value:function(e){B(this.inDebugMode,e)}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,N(r.key),r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();function z(e){var t=this,n=e.i18n,i=e.isEmployee,o=e.pinDraftId,a=e.storyPinPublishStopwatch;return function(e){var u=new L({i18n:n,inDebugMode:i,maxMediaUploadAttempts:r.dD,onCancel:function(){},onCompleted:function(){},onFailure:function(){},statusTimeoutMap:{registered:{onTimeout:function(e,n,r){(0,k.nP)("storypin.publish.media_uploads_map.timeout.registered",{sampleRate:1,tags:{retryCount:t.statusCheckFailureCount,mediaId:n,uploadId:e,mediaType:r}})},timeoutSec:240},processing:{onTimeout:function(e,n,r){(0,k.nP)("storypin.publish.media_uploads_map.timeout.processing",{sampleRate:1,tags:{retryCount:t.statusCheckFailureCount,mediaId:n,uploadId:e,mediaType:r}})},timeoutSec:180}},storyPinPublishStopwatch:a});u.initVIPRegistrationPools(),e({type:"PIN_DRAFT_SET_STORY_PIN_UPLOAD_MANAGER",payload:{pinDraftId:o,uploadManager:u}})}}},111206:function(e,t,n){n.d(t,{FQ:function(){return v},Gh:function(){return _},JT:function(){return p},ND:function(){return m},NT:function(){return w},Qj:function(){return I},VK:function(){return y},_V:function(){return O},d_:function(){return b},gF:function(){return f},gI:function(){return S},jP:function(){return P},p:function(){return g},pX:function(){return D},vd:function(){return h},xA:function(){return d}});var r=n(366503),i=n(333623),o=n(830565),a=n(292378);function u(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function s(e,t){if(e){if("string"==typeof e)return c(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function l(e){return e.values().next().value}var d=function(e){return e.pinbuilder.selectedPinDraftIds},p=function(e){var t=e.pinbuilder,n=t.createdPinIds,r=t.pinDrafts,i=t.pinDraftIds;return Object.keys(r).reduce(function(e,t){var o=r[t],a=o&&o.pinId;return i.includes(t)&&a&&n.includes(a)&&!0!==o.isAdIneligible&&!0!==o.isShowcase&&!0!==o.isQuizAd?[].concat(function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||s(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[a]):e},[])},f=function(e){var t=e.pinbuilder,n=t.createdPinIds;return Object.values(t.pinDrafts).filter(function(e){return e&&e.pinId&&e.isShowcase&&n.includes(e.pinId)}).map(function(e){return e.pinId||""})},m=function(e){return Object.values(e.pinbuilder.pinDrafts).filter(function(e){return e&&e.isShowcase&&!e.pinId&&"created"!==e.status}).map(function(e){return e.status})},h=function(e){return e.pinbuilder.pinDraftIds},y=(0,r.createSelector)(h,o.OW,function(e,t){return e.filter(function(e){var n;return(null==(n=t[e])?void 0:n.type)!=="story"})}),b=(0,r.createSelector)(h,o.OW,function(e,t){return e.filter(function(e){var n;return(null==(n=t[e])?void 0:n.status)!=="succeeded"})}),v=(0,r.createSelector)(h,o.OW,function(e,t){return e.filter(function(e){var n,r;return(null==(n=t[e])?void 0:n.status)!=="succeeded"&&(null==(r=t[e])?void 0:r.type)!=="story"})}),g=(0,r.createSelector)(d,o.OW,a.ng,function(e,t,n){var r=e.reduce(function(e,r){var i=t[r],o=i.pinItemIds,a=i.publishOption,u=i.scheduledDate,s=i.scheduledTime,c=i.selectedItem;return e.publishOptions.add(a),e.scheduledDates.add(u?u.toDateString():null),e.scheduledTimes.add(s?s.toTimeString():null),e.selectedItems.add(c?JSON.stringify(c,Object.keys(c).sort()):null),o.forEach(function(t){var r=n[t],i=r.description,o=r.link,a=r.title;e.descriptions.add(i),e.titles.add(a),e.links.add(o)}),e},{descriptions:new Set,links:new Set,publishOptions:new Set,scheduledDates:new Set,scheduledTimes:new Set,selectedItems:new Set,titles:new Set}),i=r.descriptions,o=r.links,a=r.publishOptions,u=r.scheduledDates,s=r.scheduledTimes,c=r.selectedItems,d=r.titles,p=l(u),f=l(s),m=l(c),h=p?new Date(p):null,y=f?new Date("".concat(new Date().toDateString()," ").concat(f)):null,b=m?JSON.parse(m):null;return{initialDescription:1===i.size?l(i):void 0,initialLink:1===o.size?l(o):void 0,initialPublishOption:1===a.size?l(a):void 0,initialScheduledDate:1===u.size?h:void 0,initialScheduledTime:1===s.size?y:void 0,initialSelectedItem:1===c.size?b:void 0,initialTitle:1===d.size?l(d):void 0}}),I=function(e,t,n){var r=e.pinbuilder,o=r.pinTags,u=r.pinDrafts,s=r.pinItems,c=u[t].type,l=s[n].media;return"carousel"===c?"CAROUSEL":o&&Object.keys(o).length>0&&(0,a.jk)()(e,{pinItemId:n}).length>0?"COLLECTIONS":(null==l?void 0:l.type)==="localVideo"?"VIDEO":(0,i.Sl)(l)?"STATIC":null},P=function(e,t){var n,r={},i=u(e);try{for(i.s();!(n=i.n()).done;){var o,a=t[n.value].publishingStatus;r[a]=(null!=(o=r[a])?o:0)+1}}catch(e){i.e(e)}finally{i.f()}return r},S=function(e){var t=e.pinbuilder,n=t.createdPinIds,r=t.pinDrafts,i=t.pinDraftIds;if(i){var o,a={},s=u(i);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=r[c],d=l&&l.pinId;if(d&&n.includes(d)&&r[c].isQuizAd){var p=r[c],f=p.parentPinId,m=p.quizResultIndex;if(f&&"number"==typeof m){var h=a[f]||[];h[m]=d,a[f]=h}return a}}}catch(e){s.e(e)}finally{s.f()}}return{}},O=function(e,t,n){var r=e.pinbuilder,i=r.pinDrafts,o=r.pinDraftIds;return(o&&o.filter(function(e){return i[e]&&i[e].parentPinId===t&&i[e].quizResultIndex===n})||[]).length>0},D=function(e){var t=e.pinbuilder,n=t.pinDrafts,r=t.pinDraftIds,i=void 0===r?[]:r,o=i.filter(function(e){return n[e]&&n[e].isQuizAd}),a={};i.forEach(function(e){a[e]&&!a[e].isQuizAd&&delete n[e]});var u=P(o,n),s=u.publishing,c=void 0===s?0:s,l=u.clientError,d=u.serverError,p=u.succeeded,f=(void 0===l?0:l)+(void 0===d?0:d);return c>0?{quizPinPublishingCount:c+(void 0===p?0:p),quizStatus:"publishing"}:f>0?{quizPinPublishingCount:f,quizStatus:"error"}:null},w=function(e){var t=e.pinbuilder,n=t.createdPinIds,r=t.pinDrafts,i=t.pinDraftIds;if(i){var o,a=u(i);try{for(a.s();!(o=a.n()).done;){var s,c=o.value,l=null==(s=r[c])?void 0:s.pinId;if(l&&n.includes(l)&&r[c].isQuizAd){var d=r[c],p=d.parentPinId,f=d.quizTieBreakerIndex,m={};if(p&&"number"==typeof f){var h=m[p]||[];h[f]=l,m[p]=h}return m}}}catch(e){a.e(e)}finally{a.f()}}return{}},_=function(e,t,n){var r=e.pinbuilder,i=r.pinDrafts,o=r.pinDraftIds;return(o&&o.filter(function(e){return i[e]&&i[e].parentPinId===t&&i[e].quizTieBreakerIndex===n})||[]).length>0}},830565:function(e,t,n){n.d(t,{DJ:function(){return w},Dt:function(){return C},Fh:function(){return U},IF:function(){return m},NW:function(){return p},OK:function(){return d},OW:function(){return l},RD:function(){return O},Sg:function(){return D},V$:function(){return S},W3:function(){return k},Wp:function(){return F},Xe:function(){return f},et:function(){return P},fw:function(){return M},gQ:function(){return E},jX:function(){return _},jl:function(){return j},kD:function(){return b},mR:function(){return R},mf:function(){return y},nL:function(){return x},pc:function(){return I},pq:function(){return h},q7:function(){return v},uO:function(){return g},v8:function(){return T},wN:function(){return A}});var r=n(366503),i=n(665834);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function s(e,t,n){var r;return(r=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=o(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==o(r)?r:r+"")in e)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var l=function(e){return e.pinbuilder.pinDrafts},d=function(e,t){return e.pinbuilder.pinDrafts[t]},p=function(e){var t=e.pinbuilder.pinDrafts,n={};return Object.keys(t).forEach(function(e){"story"!==t[e].type&&(n[e]=t[e])}),n},f=function(e,t){return e.pinbuilder.pinDrafts[t.pinDraftId].view},m=function(e,t){return e.pinbuilder.pinDrafts[t.pinDraftId].pinItemIndex},h=function(e,t){return e.pinbuilder.pinDrafts[t.pinDraftId].pinItemIds},y=function(e,t){return e.pinbuilder.pinDrafts[t.pinDraftId].isCommentsAllowed},b=function(e,t){return e.pinbuilder.pinDrafts[t.pinDraftId].isShoppingRecAllowed},v=function(e,t){var n=e.pinbuilder,r=n.pinDrafts,i=n.storyPinItems;return r[t.pinDraftId].pinItemIds.map(function(e){return i[e]})},g=function(e,t){var n=e.pinbuilder,r=n.pinDrafts,i=n.storyPinItemBlocks,o=n.storyPinItems;return r[t.pinDraftId].pinItemIds.map(function(e){return o[e].blockIds.map(function(e){return i[e]})}).flat()},I=function(e,t){var n,r,o=e.pinbuilder.pinDrafts[t.pinDraftId],a=o.pinItemIds,u=o.storyPinMetadata,s=(0,i.YE)(e,{pinItemId:a[0]}),c=Object.keys(s);return null!=(n=null==u||null==(r=u.title)?void 0:r.trim())?n:s&&c.length>0?s[c[c.length-1]].text.trim():""},P=function(e,t){var n=e.pinbuilder.pinDrafts[t].storyPinMetadata;return null==n?void 0:n.titleError},S=function(e,t){var n,r=e.pinbuilder.pinDrafts[t.pinDraftId].storyPinMetadata;return null!=(n=null==r?void 0:r.description)?n:""},O=function(e,t){var n,r=e.pinbuilder.pinDrafts[t.pinDraftId].storyPinMetadata;return null!=(n=null==r?void 0:r.altText)?n:""},D=function(e,t){var n,r=e.pinbuilder.pinDrafts[t.pinDraftId].storyPinMetadata;return null!=(n=null==r?void 0:r.userMentionTags)?n:[]},w=function(e,t){var n,r=e.pinbuilder.pinDrafts[t.pinDraftId].storyPinMetadata;return(null==r||null==(n=r.link)?void 0:n.trim())||""},_=function(e,t){return e.pinbuilder.pinDrafts[t.pinDraftId].selectedItem},j=function(e,t){var n=h(e,t)[0];return(0,i.iD)()(e,{pinItemId:n})},E=function(e,t){var n=e.pinbuilder.pinDrafts[t.pinDraftId].pinItemIds,r=[];return n.forEach(function(t){var n=(0,i.YE)(e,{pinItemId:t}),o=Object.keys(n).map(function(e){return n[e]});r.push.apply(r,function(e){if(Array.isArray(e))return c(e)}(o)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(o)||function(e,t){if(e){if("string"==typeof e)return c(e,void 0);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,void 0):void 0}}(o)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}),r},T=function(e,t){return e.pinbuilder.pinDrafts[t.pinDraftId].interestTags||[]},C={PENDING:0,VALID:1,INVALID:2},k=function(e,t){var n,r=e.pinbuilder.pinDrafts[t.pinDraftId].storyPinMetadata;return null!=(n=null==r?void 0:r.linkStatus)?n:C.VALID},M=function(e,t){var n=e.pinbuilder.pinDrafts[t.pinDraftId].storyPinMetadata;return null==n?void 0:n.linkError},R=function(e,t,n){return g(e,t).filter(function(e){return n.includes(e.type)})},x=function(){return(0,r.createSelector)([h,m],function(e,t){return e[t]})},U=function(e,t){var n=e.pinDrafts[t.pinDraftId],r=n.pinItemIds,i=!!(n.apiError||n.boardError||n.mediaError),o=r.reduce(function(t,n){var r=e.pinItems[n]||e.storyPinItems[n];return!!(t||r.descriptionError||r.linkError||r.tagError||r.titleError)},!1);return i||o},A=function(e,t){var n=e.pinDrafts[t.pinDraftId],r=n.pinItemIds,i=n.selectedItem,o=r.reduce(function(t,n){var r=e.pinItems[n]||e.storyPinItems[n];return!!(t||r.description||r.link||r.media||r.title)},!1);return!!(void 0===i?null:i)||o},F=function(e){var t=e.pinbuilder,n=t.pinDraftIds,r=t.pinDrafts;return Object.keys(r).filter(function(e){return n.includes(e)}).reduce(function(e,t){return u(u({},e),{},s({},t,r[t]))},{})}},292378:function(e,t,n){n.d(t,{Bg:function(){return l},CQ:function(){return f},M:function(){return s},jk:function(){return m},ng:function(){return a},vd:function(){return p},wc:function(){return u}});var r=n(366503),i=n(265200),o=n(709550),a=function(e){return e.pinbuilder.pinItems},u=function(e,t){return e.pinbuilder.pinItems[t.pinItemId].isTaggable},s=function(e,t){return e.pinbuilder.pinItems[t.pinItemId].selectedPinTagId},c=function(e,t){var n;return(null==(n=e.pinbuilder.pinItems[t.pinItemId])?void 0:n.pinTagIds)||[]},l=function(e,t){return e.pinbuilder.pinItems[t.pinItemId].media},d=(0,r.createSelector)([c,i.Oo],function(e,t){return e.reduce(function(e,n){var r=t[n],i=r.status,o=r.taggedObjectIds;return"deleted"!==i&&o.forEach(function(t){return e.push(t)}),e},[])}),p=function(){return(0,r.createSelector)([c,i.Oo],function(e,t){return e.filter(function(e){return"deleted"!==t[e].status})})},f=function(){return(0,r.createSelector)([d,o.nb],function(e,t){return e.map(function(e){return t[e]}).filter(function(e){return"deleted"!==e.status})})},m=function(){return(0,r.createSelector)([d,o.nb],function(e,t){return e.filter(function(e){return"deleted"!==t[e].status})})}},265200:function(e,t,n){n.d(t,{A$:function(){return u},Oo:function(){return o}});var r=n(366503),i=n(709550),o=function(e){return e.pinbuilder.pinTags},a=function(e,t){return e.pinbuilder.pinTags[t.pinTagId].taggedObjectIds},u=function(){return(0,r.createSelector)([a,i.nb],function(e,t){return e.filter(function(e){return"deleted"!==t[e].status})})}},665834:function(e,t,n){n.d(t,{AC:function(){return p},CI:function(){return s},NR:function(){return d},X4:function(){return h},YE:function(){return f},bS:function(){return l},i3:function(){return v},iD:function(){return b},mX:function(){return c},wH:function(){return u},yp:function(){return m}});var r=n(366503),i=n(265200),o=n(709550),a=["story_pin_heading_block","story_pin_paragraph_block"],u=function(e,t){return e.pinbuilder.storyPinItems[t]};function s(e){var t=e.storyPinItemBlocks;return e.storyPinItemBlockIds.find(function(e){return!!t[e].media})}var c=function(e,t){var n=e.pinbuilder.storyPinItems[t.pinItemId];return n?s({storyPinItemBlocks:e.pinbuilder.storyPinItemBlocks,storyPinItemBlockIds:n.blockIds}):null};function l(e){var t=e.storyPinItemBlockIds,n=e.storyPinItemBlocks;return t.find(function(e){return a.includes(n[e].type)})}var d=function(e,t){return e.pinbuilder.storyPinItems[t.pinItemId].selectedBlockId};function p(e){var t=e.pinItemId,n=e.storyPinItemBlocks,r=e.storyPinItems[t],i={};return r&&r.blockIds.filter(function(e){return a.includes(n[e].type)}).forEach(function(e){i[e]=n[e]}),i}var f=function(e,t){var n=t.pinItemId,r=e.pinbuilder,i=r.storyPinItemBlocks;return p({storyPinItems:r.storyPinItems,pinItemId:n,storyPinItemBlocks:i})},m=function(e,t){var n=e.pinbuilder.storyPinItems[t.pinItemId];return n?n.blockIds.map(function(t){return e.pinbuilder.storyPinItemBlocks[t]}):[]},h=function(e,t,n){return e.pinbuilder.storyPinItems[t.pinItemId].blockIds.find(function(t){return e.pinbuilder.storyPinItemBlocks[t].type===n})},y=(0,r.createSelector)([function(e,t){return e.pinbuilder.storyPinItems[t.pinItemId].pinTagIds},i.Oo],function(e,t){return e.reduce(function(e,n){var r=t[n],i=r.status,o=r.taggedObjectIds;return"deleted"!==i&&o.forEach(function(t){return e.push(t)}),e},[])}),b=function(){return(0,r.createSelector)([y,o.nb],function(e,t){return e.map(function(e){return t[e]}).filter(function(e){return"deleted"!==e.status})})},v=function(){return(0,r.createSelector)([y,o.nb],function(e,t){return e.filter(function(e){return"deleted"!==t[e].status})})}},709550:function(e,t,n){function r(e){return e.pinbuilder.taggedObjects}function i(e,t){var n;return null==(n=r(e)[t])?void 0:n.media}n.d(t,{nb:function(){return r},xe:function(){return i}})},73058:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(27399),i=n(767415);function o(e,t,n,r,i,o,a){try{var u=e[o](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,i)}function a(e,t){return u.apply(this,arguments)}function u(){var e;return e=regeneratorRuntime.mark(function e(t,n){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.Z.create("VIPResource",{upload_ids:t}).callGet();case 2:return o=e.sent.resource_response.data,e.abrupt("return",t.reduce(function(e,t){return o[t]?e[t]={failureCode:o[t].failure_code,signature:o[t].signature,status:o[t].status}:(0,i.nP)("storypin.publish.vip_status_check.missing_upload_id",{sampleRate:1,tags:{retryCount:n}}),e},{}));case 5:case"end":return e.stop()}},e)}),(u=function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function u(e){o(a,r,i,u,s,"next",e)}function s(e){o(a,r,i,u,s,"throw",e)}u(void 0)})}).apply(this,arguments)}},316558:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(3504),i=n(320961),o=n(677269);function a(e,t){(0,o.Z)(2,arguments);var n=(0,r.Z)(t);return(0,i.Z)(e,6e4*n)}},776446:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(948715),i=n(677269);function o(e){(0,i.Z)(1,arguments);var t=(0,r.Z)(e);return t.setHours(23,59,59,999),t}}}]);