"use strict";(self.legacyJsonp=self.legacyJsonp||[]).push([["96425"],{396342:function(e,t,n){n.r(t);var r={argumentDefinitions:[{kind:"RootArgument",name:"isCloseupRelatedModulesFeedQuery"}],kind:"Fragment",metadata:null,name:"DeprecatedCarousel_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{condition:"isCloseupRelatedModulesFeedQuery",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null}]},{args:null,kind:"FragmentSpread",name:"usePinCarouselData_pin"}],type:"Pin",abstractKey:null};r.hash="95793e1276a19bfa11c2fd12c81bc9af",t.default=r},728944:function(e,t,n){n.r(t);var r,i,o,a={argumentDefinitions:[{kind:"RootArgument",name:"isCloseupRelatedModulesFeedQuery"}],kind:"Fragment",metadata:null,name:"PinImage_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"altText",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"autoAltText",storageKey:null},{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:o=[r={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"236x")'},{alias:"imageSpec_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:o,storageKey:'images(spec:"474x")'},{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:o,storageKey:'images(spec:"736x")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:o,storageKey:'images(spec:"orig")'},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{condition:"isCloseupRelatedModulesFeedQuery",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"videos",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoList",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vHLSV4",plural:!1,selections:[r,{alias:null,args:null,kind:"ScalarField",name:"thumbnail",storageKey:null},i],storageKey:null}],storageKey:null}],storageKey:null}]},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isThirdPartyAd",storageKey:null},{args:null,kind:"FragmentSpread",name:"StoryPinImage_pin"},{args:null,kind:"FragmentSpread",name:"DeprecatedCarousel_pin"}],type:"Pin",abstractKey:null};a.hash="9db52bae6bfdadee41180545715b9262",t.default=a},819058:function(e,t,n){n.r(t);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinVideoWithVisibility_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{args:null,kind:"FragmentSpread",name:"PinVideo_pin"},{args:null,kind:"FragmentSpread",name:"useAutoplayOrgVideoOnHover_pin"}],type:"Pin",abstractKey:null};r.hash="8e6a9272e57ad1033c4bf432c3adf854",t.default=r},745971:function(e,t,n){n.r(t);var r,i,o={argumentDefinitions:[{kind:"RootArgument",name:"isCloseupRelatedModulesFeedQuery"}],kind:"Fragment",metadata:null,name:"PinVideo_pin",selections:[r={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[i={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"isDownstreamPromotion",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForWebCloseup",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"promoter",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{condition:"isCloseupRelatedModulesFeedQuery",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"videos",plural:!1,selections:[r,{alias:null,args:null,concreteType:"VideoList",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vHLSV4",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"thumbnail",storageKey:null},i,{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}]},{args:null,kind:"FragmentSpread",name:"PinImage_pin"}],type:"Pin",abstractKey:null};o.hash="4d03e5934a796eeb8e16293942fa01b3",t.default=o},192505:function(e,t,n){n.r(t);var r,i,o,a,l=(a={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StoryPinImage_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null},{alias:"imageSpec_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:o=[r={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"474x")'},{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:o,storageKey:'images(spec:"736x")'},{alias:null,args:null,kind:"ScalarField",name:"isDownstreamPromotion",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"promoter",plural:!1,selections:[a],storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryPinPage",kind:"LinkedField",name:"pages",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"blocks",plural:!0,selections:[a,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"blockType",storageKey:null},{alias:null,args:null,concreteType:"StoryPinVideoMetadataFormattedV2",kind:"LinkedField",name:"videoDataV2",plural:!1,selections:[{alias:null,args:[{kind:"Literal",name:"version",value:"V_HLSV3_MOBILE"}],concreteType:"StoryPinVideoFormatsV2",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vHLSV3MOBILE",plural:!1,selections:[r,{alias:null,args:null,kind:"ScalarField",name:"thumbnail",storageKey:null},i],storageKey:null}],storageKey:'videoList(version:"V_HLSV3_MOBILE")'}],storageKey:null}],type:"StoryPinVideoBlock",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null});l.hash="695074f4aa0e5845fecc8d4bdf773a7e",t.default=l},584060:function(e,t,n){n.r(t);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VideoWithContextLogging_pin",selections:[{args:null,kind:"FragmentSpread",name:"VideoWrapper_pin"}],type:"Pin",abstractKey:null};r.hash="93ed23334d5bac81ac8410f05c4f2031",t.default=r},245113:function(e,t,n){n.r(t);var r,i,o={argumentDefinitions:[{kind:"RootArgument",name:"isCloseupRelatedModulesFeedQuery"}],kind:"Fragment",metadata:null,name:"useAutoplayOrgVideoOnHover_pin",selections:[r={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"totalVideoDuration",storageKey:null}],storageKey:null},{condition:"isCloseupRelatedModulesFeedQuery",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"videos",plural:!1,selections:[r,{alias:null,args:null,concreteType:"VideoList",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"v720P",plural:!1,selections:i=[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vHLSV4",plural:!1,selections:i,storageKey:null},{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vHLSV3MOBILE",plural:!1,selections:i,storageKey:null}],storageKey:null}],storageKey:null}]}],type:"Pin",abstractKey:null};o.hash="5d72b67a79904103dc23dcffde006178",t.default=o},754894:function(e,t,n){n.r(t),n.d(t,{default:function(){return eg}});var r,i,o,a,l,u=n(387784);n(115821);var s=n(20256),c=n(653551),d=n(887939),p=n.n(d),f=n(918186),y=n(232079),g=n(183e3),m=n(24246),h=n(216975),v=n(78835),b=n(501010),w=n(610961),S=n(680811),P=(void 0!==r||(r=n(192505)).hash&&"695074f4aa0e5845fecc8d4bdf773a7e"!==r.hash&&console.error("The definition of 'StoryPinImage_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r);function O(e){var t,n,r,i,o,a,l,u,c,d,p,f,y,m,h,v,O=e.alt,j=e.fetchPriority,x=e.onError,k=e.onLoad,T=e.pinKey,_=e._fixCompletedOnLoad,I=(0,(0,b.Z)().checkExperiment)("ads_iad_dweb").anyEnabled,D=(0,g.Z)(P,T),C=D.dominantColor,E=D.isDownstreamPromotion,F=!!D.promoter&&!E,V="StoryPinVideoBlock"===(o=((null==(i=((null==(r=D.storyPinData)?void 0:r.pages)||[])[0])?void 0:i.blocks)||[])[0]||{}).__typename&&3===o.blockType,L=null!==(l=(a={pin:D,useVideoThumbnail:V&&(F&&I||!F)}).pin,v=a.useVideoThumbnail&&null!=(h=(null==(d=(m=(null==(c=((null==(u=l.storyPinData)?void 0:u.pages)||[])[0])?void 0:c.blocks)||[])[0])?void 0:d.__typename)==="StoryPinVideoBlock"?null==(p=m[0])||null==(f=p.videoDataV2)||null==(y=f.videoList)?void 0:y.vHLSV3MOBILE:null)&&h.thumbnail?{height:(null==h?void 0:h.height)||0,width:(null==h?void 0:h.width)||0,url:h.thumbnail||""}:!(null!=(n=(t=l).imageSpec_474x)&&n.width&&t.imageSpec_474x.height&&t.imageSpec_474x.width>t.imageSpec_474x.height)&&t.imageSpec_474x||t.imageSpec_736x)&&void 0!==v?v:{},A=L.height,K=L.width,R=L.url;return(0,S.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{zIndex:w.Z.storyPinImage}},"data-test-id":"story-pin-image-box",width:"100%",children:R&&(0,S.jsx)(s.Ee,{_fixCompletedOnLoad:_,alt:O,color:C||"transparent",fetchPriority:j,naturalHeight:null!=A?A:1,naturalWidth:null!=K?K:1,onError:void 0===x?function(){}:x,onLoad:void 0===k?function(){}:k,src:R})})}var j=n(683372),x=n(890991),k=n(380202),T=["ShoppingCarousel","ShoppingGridSmall","ShoppingGridSmallCarousel","ShoppingDynamicHeightGrid","VisualInspirationFocusPin","VisualInspirationPin","VisualInspirationShoppingPin","ProductTaggingSearchResult"],_=(void 0!==i||(i=n(728944)).hash&&"9db52bae6bfdadee41180545715b9262"!==i.hash&&console.error("The definition of 'PinImage_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),I=function(e){var t=e.children,n=e.cropStoryPinImage,r=e.cropWidth,i=e.cropHeight;return n?(0,S.jsx)(s.kC,{alignItems:"center",height:r?i:void 0,justifyContent:"start",width:r||void 0,children:t}):(0,S.jsx)(s.xu,{children:t})},D=function(e){var t,n,r,i,o=e.cropHeight,a=e.cropWidth,l=e.highResOnly,u=e.imageFit,d=e.isInDesktopCarousel,b=e.onError,w=e.onLoad,P=e.pinKey,D=e.saved,C=e.surface,E=e.ssrImpressionFixEnabled,F=(0,m.Z)(),V=(0,j.C)((0,c.TH)()),L=(0,g.Z)(_,P),A=L.altText,K=L.autoAltText,R=L.carouselData,M=L.description,H=void 0===M?"":M,W=L.dominantColor,B=L.gridTitle,Z=L.isThirdPartyAd,z=L.title,N=L.videos,U=(0,h.nk)(F._('This contains an image of: {{ pinTitle }}', 'web.altText', 'Alt text input for PinImage by a human'),{pinTitle:z||B}).join(""),G="",Q=0,q=0;if(L.imageSpec_736x||L.imageSpec_orig||L.imageSpec_474x||L.imageSpec_236x){var $,J,Y,X,ee,et=L.imageSpec_236x;if(l)et=L.imageSpec_736x||L.imageSpec_orig||L.imageSpec_474x||L.imageSpec_236x;else{var en,er,ei,eo,ea=(null==N||null==(eo=N.videoList)?void 0:eo.vHLSV4)||{},el=ea.thumbnail,eu=ea.height,es=ea.width;et=el?{url:el,height:null!=eu?eu:1,width:null!=es?es:1}:et}Q=null==(en=et)?void 0:en.height,q=null==(er=et)?void 0:er.width,G=null==(ei=et)?void 0:ei.url,i=l?null!=($=et)&&$.url?"".concat(et.url," 1x"):"":[(null==(J=L.imageSpec_236x)?void 0:J.url)&&"".concat(L.imageSpec_236x.url," 1x"),(null==(Y=L.imageSpec_474x)?void 0:Y.url)&&"".concat(L.imageSpec_474x.url," 2x"),(null==(X=L.imageSpec_736x)?void 0:X.url)&&"".concat(L.imageSpec_736x.url," 3x"),(null==(ee=L.imageSpec_orig)?void 0:ee.url)&&"".concat(L.imageSpec_orig.url," 4x")].filter(Boolean).join(", ")}var ec=(0,f.Z)({altText:A,autoAltText:K,i18n:F})||!!(null!=H&&H.trim().length)&&H||U;if(R)return(0,S.jsx)(x.Z,{_fixCompletedOnLoad:E,highResOnly:l,isThirdPartyAd:Z,onError:b,onLoad:w,pinKey:L});var ed=["ShoppingGridSmall","ShoppingGridSmallCarousel"].includes(C)?void 0:v.Ml,ep=(0,k.Z)(C),ef="non-story-pin-image";return(0,S.jsx)(s.kC,{alignItems:"center",justifyContent:"start",minHeight:ed,children:(0,S.jsx)(s.xu,{flex:"grow",children:(0,S.jsx)("div",{className:p()({savedGradient:void 0!==D&&D}),children:L.storyPinDataId?(0,S.jsx)(I,{cropHeight:o,cropStoryPinImage:!!a&&(T.includes(C)||!!d),cropWidth:a,children:(0,S.jsx)(O,{_fixCompletedOnLoad:E,alt:ec,fetchPriority:V?"low":void 0,onError:b,onLoad:w,pinKey:L})}):(0,S.jsx)(s.xu,{"data-test-id":ef,height:a?o:void 0,width:a||void 0,children:(0,S.jsx)(y.Z,{_fixCompletedOnLoad:E,alt:ec,color:"dominant"===ep?null!=W?W:"":ep,crossOrigin:Z?"anonymous":void 0,elementTiming:"grid-".concat(ef,"-").concat(C),fetchPriority:V?"low":void 0,fit:u,naturalHeight:null!=(t=Q)?t:1,naturalWidth:null!=(n=q)?n:1,onError:b,onLoad:w,src:null!=(r=G)?r:"",srcSet:i})})})})})},C=n(566431),E=n(74972),F=n(881354),V=n(447943),L=n(627309),A={__style:{backgroundColor:"#000"}};function K(e){var t=e.backgroundImage,n=e.naturalHeight,r=e.naturalWidth,i=e.onRestartVideo,o=e.pinId,a=(0,m.Z)();return(0,S.jsxs)(s.Ee,{alt:a._('pin image', 'image of a pin', 'image of a pin'),naturalHeight:n,naturalWidth:r,src:t,children:[(0,S.jsx)(s.xu,{bottom:!0,dangerouslySetInlineStyle:A,left:!0,opacity:.8,position:"absolute",right:!0,top:!0}),(0,S.jsxs)(s.xu,{"data-test-id":"video-end-card-".concat(o),direction:"column",display:"flex",height:"100%",justifyContent:"center",position:"absolute",width:"100%",children:[(0,S.jsx)(s.iP,{rounding:2,children:(0,S.jsxs)(s.xu,{display:"flex",justifyContent:"center",padding:2,children:[(0,S.jsx)(s.JO,{accessibilityLabel:a._('Visit site', 'Button when pressed goes to pin\'s website', 'Button when pressed goes to pin\'s website'),color:"light",dangerouslySetSvgPath:{__path:V.Z},size:25}),(0,S.jsx)(s.xu,{margin:1}),(0,S.jsx)(s.xv,{color:"light",lineClamp:1,weight:"bold",children:a._('Visit site', 'Button when pressed goes to pin\'s website', 'Button when pressed goes to pin\'s website')})]})}),(0,S.jsx)(s.xu,{margin:3}),(0,S.jsx)(s.iP,{onTap:i,rounding:2,children:(0,S.jsxs)(s.xu,{display:"flex",justifyContent:"center",padding:2,children:[(0,S.jsx)(s.JO,{accessibilityLabel:a._('Watch again', 'Button when pressed restarts the video', 'Button when pressed restarts the video'),color:"light",dangerouslySetSvgPath:{__path:L.Z},size:25}),(0,S.jsx)(s.xu,{margin:1}),(0,S.jsx)(s.xv,{color:"light",lineClamp:1,weight:"bold",children:a._('Watch again', 'Button when pressed restarts the video', 'Button when pressed restarts the video')})]})})]})]})}function R(e){var t=e.aspectRatio,n=e.children;return(0,S.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{aspectRatio:t}},children:n})}var M=n(959703);function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach(function(t){var r,i;r=t,i=n[t],(r=function(e){var t=function(e,t){if("object"!=H(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=H(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==H(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){s=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw i}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return z(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var N=new Set(["ConversationView","TodayTabFeed"]),U=(void 0!==o||(o=n(745971)).hash&&"4d03e5934a796eeb8e16293942fa01b3"!==o.hash&&console.error("The definition of 'PinVideo_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),o);function G(e){var t,n,r,i,o,a,l,c,d,p,f=e.isAutoplay,y=e.cropHeight,m=e.currentTime,h=e.highResOnly,v=e.onLoad,w=e.onError,P=e.saved,O=e.onTimeChange,j=e.isExperimentalPinRep,x=e.pinKey,k=e.surface,T=e.playing,_=e.rootMargin,I=e.viewType,V=e.viewParameter,L=e.cropWidth,A=e.video,H=Z((0,u.useState)(!1),2),W=H[0],z=H[1],G=Z((0,u.useState)(!T),2),Q=G[0],q=G[1],$=(0,g.Z)(U,x),J=(0,b.Z)().checkExperiment,Y=$.isDownstreamPromotion,X=$.promoter,ee=(0,C.jL)(!!Y,!!X),et=ee&&!$.isEligibleForWebCloseup,en=j&&ee&&$.isEligibleForWebCloseup&&!N.has(k),er=(0,E.G)().setCurrentVideo,ei=!!en&&J("ads_web_disable_video_end_card").anyEnabled;f&&T&&Q&&q(!1);var eo=(null!=(t=$.imageSpec_236x)?t:{}).url,ea=$.entityId,el=$.isPromoted,eu=(0,u.useCallback)(function(e){var t=e.event;t.preventDefault(),t.stopPropagation(),er({pinId:ea,isPromoted:!!el,currentTime:0}),z(!1)},[el,ea,er]),es=(0,u.useCallback)(function(){el&&(ei||z(en))},[el,en,ei]),ec=null!=A?A:null==(n=$.videos)||null==(r=n.videoList)?void 0:r.vHLSV4;if(!ec)return null;var ed=ec.height,ep=ec.thumbnail,ef=ec.width,ey=ec.url,eg=null!=(i=null!=(o=null==A?void 0:A.entityId)?o:null==(a=$.videos)?void 0:a.entityId)?i:"",em=[{type:"video/m3u8",src:ey}],eh=(null!=ef?ef:1)/(null!=ed?ed:1);if(void 0!==L&&void 0!==y&&null!==L&&null!==y){var ev="string"==typeof L?parseFloat(L):L,eb="string"==typeof y?parseFloat(y):y;Number.isFinite(ev)&&Number.isFinite(eb)&&ev>0&&eb>0&&(eh=ev/eb,c="cover")}var ew=k&&(0,F.Z)(k)&&"UserProfilePinGrid"!==k;if(ew&&(eh=1,l="transparent"),"VideoCarouselModule"===k&&(c="cover",eh=(null!=(d=null!=L?L:ef)?d:1)/(null!=(p=null!=y?y:ed)?p:1)),W&&ee)return(0,S.jsx)(s.xu,{children:(0,S.jsx)(K,{backgroundImage:null!=eo?eo:"",naturalHeight:null!=ed?ed:1,naturalWidth:null!=ef?ef:1,onRestartVideo:eu,pinId:ea})});var eS={highResOnly:h,onError:w,onLoad:v,pinKey:$,saved:P};ew&&(eS=B(B({},eS),{},{cropHeight:y,cropWidth:L,imageFit:"contain"}));var eP=(0,S.jsx)(s.xu,{"data-test-id":"pinrep-video--placeholder","data-test-image-signature":eo,children:(0,S.jsx)(R,{aspectRatio:eh,children:(0,S.jsx)(D,B(B({},eS),{},{ssrImpressionFixEnabled:!1,surface:k}))})});return Q?eP:(0,S.jsx)(s.xu,{children:(0,S.jsx)(M.ZP,{aspectRatio:eh,backgroundColor:l,captions:"",contextLogData:{viewParameter:V,component:0,objectId:ea,video_id:eg,view:I},fallback:eP,hlsConfig:{capLevelToPlayerSize:!0,startPosition:m||-1},isAutoPlay:!!f,loop:et||!j||!ee||ei,objectFit:c,onEnded:es,onPlay:function(){},onPlayError:function(){},onTimeChange:O,playing:T,poster:eo||ep||void 0,rootMargin:_,src:null!=em?em:[],surface:k,videoStartTime:m,volume:0})})}var Q=n(739405),q=n(573375);function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach(function(t){var r,i;r=t,i=n[t],(r=function(e){var t=function(e,t){if("object"!=$(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=$(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var X=n(919917),ee=n(478428),et=(void 0!==a||(a=n(245113)).hash&&"5d72b67a79904103dc23dcffde006178"!==a.hash&&console.error("The definition of 'useAutoplayOrgVideoOnHover_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a),en=n(113757),er=["pinKey","isHovering"];function ei(e){return(ei="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ea(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eo(Object(n),!0).forEach(function(t){ed(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eo(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function el(e,t){return(el=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function eu(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function es(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(es=function(){return!!e})()}function ec(e){return(ec=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ed(e,t,n){return(t=ep(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ep(e){var t=function(e,t){if("object"!=ei(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ei(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ei(t)?t:t+""}var ef=(void 0!==l||(l=n(819058)).hash&&"8e6a9272e57ad1033c4bf432c3adf854"!==l.hash&&console.error("The definition of 'PinVideoWithVisibility_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),l),ey=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&el(i,e);var t,n,r=(t=es(),function(){var e,n=ec(i);return e=t?Reflect.construct(n,arguments,ec(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==ei(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return eu(e)}(this,e)});function i(){var e;if(!(this instanceof i))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return ed(eu(e=r.call.apply(r,[this].concat(n))),"calculateCurrentVideoTime",function(){var t=e.props,n=t.currentTimeFromPinRep,r=t.pin,i=t.videosAutoplaying,o=r.entityId,a=(0,X.Z)(o,i);return e.currentVideoCurrentTime||a||n}),ed(eu(e),"handleVisibilityChanged",function(t,n){var r=e.props,i=r.currentTimeFromPinRep,o=r.pin,a=r.setCurrentVideo,l=r.pauseAutoplay,u=r.videosAutoplaying,s=o.entityId,c=o.isPromoted,d=(0,ee.Z)(s,u),p=function(e,t){var n=t.organicVideosAutoplaying,r=t.promotedVideosAutoplaying,i=Y(Y({},n),r);for(var o in i){var a=i[o].paused;if(o!==e&&!a)return!1}return!0}(s,u);t?c?a({pinId:s,isPromoted:c,currentTime:e.calculateCurrentVideoTime()}):(p||"VideoCarouselModule"===n)&&a({pinId:s,isPromoted:!!c,currentTime:e.calculateCurrentVideoTime(),surface:n}):!t&&d&&l({pinId:s,isPromoted:!!c,currentTime:i||e.currentVideoCurrentTime,surface:n})}),ed(eu(e),"handleVideoTimeChange",function(t){var n=e.props,r=n.pin,i=n.onTimeChange,o=n.videosAutoplaying,a=r.entityId;(0,ee.Z)(a,o)&&(e.currentVideoCurrentTime=t.time),i&&i(t)}),e}return n=[{key:"componentDidMount",value:function(){this.props.onLoad&&this.props.onLoad()}},{key:"componentDidUpdate",value:function(e){var t=e.appInFocus,n=this.props,r=n.appInFocus,i=n.currentTimeFromPinRep,o=n.pauseAutoplay,a=n.pin,l=n.setCurrentVideo,u=n.videosAutoplaying,s=a.entityId,c=a.isPromoted,d=(0,ee.Z)(s,u);r!==t&&!r&&d?(this.pausedDueToBrowserOutOfFocus=!0,o({pinId:s,isPromoted:!!c,currentTime:i||this.currentVideoCurrentTime})):this.pausedDueToBrowserOutOfFocus&&r&&(this.pausedDueToBrowserOutOfFocus=!1,l({pinId:s,isPromoted:!!c,currentTime:this.calculateCurrentVideoTime()}))}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.currentTimeFromPinRep,n=e.pauseAutoplay,r=e.pin,i=e.videosAutoplaying,o=r.entityId,a=r.isPromoted;(0,ee.Z)(o,i)&&n({pinId:o,isPromoted:!!a,currentTime:t||this.currentVideoCurrentTime})}},{key:"render",value:function(){var e=this,t=this.props,n=t.cropHeight,r=t.isAutoplay,i=t.pin,o=t.surface,a=t.videosAutoplaying,l=t.viewParameter,u=t.viewType,s=t.highResOnly,c=t.onError,d=t.onLoad,p=t.saved,f=t.isExperimentalPinRep,y=t.rootMargin,g=t.cropWidth,m=t.video,h=i.entityId,v=(0,X.Z)(h,a),b=(0,ee.Z)(h,a)&&r,w=ea({cropHeight:n,rootMargin:y,currentTime:v,isAutoplay:r,viewParameter:l,viewType:u,onTimeChange:this.handleVideoTimeChange,onVisibilityChanged:function(t){return e.handleVisibilityChanged(t,o)},pinKey:i,surface:o,playing:b,trackFullVisible:!1,highResOnly:s,onError:c,onLoad:d,saved:p,isExperimentalPinRep:f,cropWidth:g},m?{video:m}:{});return(0,S.jsx)(q.Z,{onVisibilityChanged:function(t){return e.handleVisibilityChanged(t,o)},rootMargin:y,trackFullVisible:w.trackFullVisible,children:(0,S.jsx)(G,ea({},w))})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ep(r.key),r)}}(i.prototype,n),Object.defineProperty(i,"prototype",{writable:!1}),i}(u.Component);function eg(e){var t,n,r,i,o,a,l,s,c,d,p,f,y,m,h,v,b,w,P=e.pinKey,O=e.isHovering,j=void 0!==O&&O,x=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&({}).propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,er),k=(0,E.G)(),T=k.appUI,_=T.appInFocus,I=T.isAutoplay,D=T.videosAutoplaying,C=k.pauseAutoplay,F=k.setCurrentVideo,V=(0,g.Z)(ef,P),L=(0,Q.HG)(),A=(0,en.Z)({isDesktop:L}),K=(0,en.z)({isMetricVideoExperimentEnabled:A,isDesktop:L}),R=(0,u.useRef)(j);return s=(t={pinKey:V,isHovering:j,hoverState:R,disabled:K}).pinKey,c=t.isHovering,d=t.hoverState,f=void 0!==(p=t.disabled)&&p,y=(0,g.Z)(et,s),h=(m=(0,E.G)()).setCurrentVideo,v=m.pauseAutoplay,b=m.appUI.videosAutoplaying,w=(null==y||null==(n=y.videos)||null==(r=n.videoList)?void 0:r.v720P)||(null==y||null==(i=y.videos)||null==(o=i.videoList)?void 0:o.vHLSV4)||(null==y||null==(a=y.videos)||null==(l=a.videoList)?void 0:l.vHLSV3MOBILE),(0,u.useEffect)(function(){if(y&&!f){if(d.current!==c){var e=y.entityId,t=y.isPromoted,n=y.storyPinData,r=(0,X.Z)(e,b);if(w||null!=n&&n.totalVideoDuration)if(c){var i,o,a=(i=b.currentlyPlayingOrganicVideoId,o=b.organicVideosAutoplaying,i&&i!==e?i:Object.keys(o).find(function(e){return!1===o[e].paused}));a&&v({currentTime:r,pinId:a,isPromoted:!1}),h({currentTime:r,pinId:e,isPromoted:!!t})}else t||v({currentTime:r,pinId:e,isPromoted:!!t})}d.current=c}},[c,d,v,y,h,w,b,f]),(0,S.jsx)(ey,ea(ea({},x),{},{appInFocus:_,isAutoplay:I,pauseAutoplay:C,pin:V,setCurrentVideo:F,videosAutoplaying:D}))}},562400:function(e,t,n){function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t,n){var i,o,a,l=!!(null!=n&&n.leading),u=(null==n?void 0:n.trailing)!==!1,s=null!=n&&n.maxWait?Math.max(n.maxWait,t):void 0,c=null,d=0;function p(t){var n=i;return i=void 0,d=t,n&&(o=e.apply(void 0,function(e){if(Array.isArray(e))return r(e)}(n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return r(e,void 0);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,void 0):void 0}}(n)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),o}function f(e){var n,r=e-(null!=(n=a)?n:0),i=e-d;return void 0===a||r>=t||r<0||void 0!==s&&i>=s}function y(){var e,n,r,o,l=Date.now();f(l)?(c=null,u&&i)?p(l):i=void 0:c=setTimeout(y,(n=l-(null!=(e=a)?e:0),r=l-d,o=t-n,void 0!==s?Math.min(o,s-r):o))}function g(){null!==c&&clearTimeout(c),c=setTimeout(y,t)}function m(){for(var e=Date.now(),n=f(e),r=arguments.length,u=Array(r),m=0;m<r;m++)u[m]=arguments[m];if(i=u,a=e,n){if(null===c)return d=e,c=setTimeout(y,t),l?p(e):o;else if(void 0!==s)return g(),p(e)}return null===c&&g(),o}return m.flush=function(){if(null!==c&&i){var e=Date.now();return clearTimeout(c),c=null,p(e)}return o},m.cancel=function(){null!==c&&clearTimeout(c),d=0,i=void 0,a=void 0,c=null},m}n.d(t,{Z:function(){return i}})},447943:function(e,t){t.Z="M17.496 14.572a1 1 0 0 1-1 1h-.001a1.001 1.001 0 0 1-.999-1.001l.002-4.652-7.29 7.288a.995.995 0 0 1-.707.293.999.999 0 0 1-.707-1.707l7.293-7.29L9.428 8.5a1 1 0 0 1 .001-2h.001l8.071.005-.005 8.067zM12 0C5.373 0 0 5.373 0 12c0 6.628 5.373 12 12 12 6.628 0 12-5.372 12-12 0-6.627-5.372-12-12-12z"},627309:function(e,t){t.Z="M12 18.5A6.508 6.508 0 0 1 5.5 12c0-1.706.689-3.307 1.835-4.5H6.5a1 1 0 1 1 0-2h4.185v4.474a1 1 0 0 1-2 0V8.972A4.505 4.505 0 0 0 7.5 12c0 2.481 2.019 4.5 4.5 4.5s4.5-2.019 4.5-4.5a4.49 4.49 0 0 0-3.112-4.283 1 1 0 1 1 .615-1.902A6.482 6.482 0 0 1 18.5 12c0 3.584-2.916 6.5-6.5 6.5M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0"},573375:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(20256),i=n(293646),o=n(680811);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l=["onVisibilityChanged","children"];function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){var t=e.onVisibilityChanged,n=e.children,s=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&({}).propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,l),c=(0,i.Z)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){var r,i;r=t,i=n[t],(r=function(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({onVisibilityChanged:t},s));return(0,o.jsx)(r.xu,{ref:c,children:n})}},919917:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){var i,o;i=t,o=n[t],(i=function(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}(i))in e?Object.defineProperty(e,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[i]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function a(e,t){var n=t.organicVideosAutoplaying,r=t.promotedVideosAutoplaying,i=t.videoCarouselModuleAutoplaying,a=o(o(o({},n),r),i);return a[e]&&a[e].currentTime}n.d(t,{Z:function(){return a}})},610961:function(e,t){t.Z={debugPinImpressions:999,max:9999,pinActionWrapper:101,saved:102,storyPinImage:-1}},683372:function(e,t,n){function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{C:function(){return i},_:function(){return l}});var i=function(e){return!!e&&/^\/pin\/[\w-]+\/?$/.test(e.pathname)},o=function(e){var t=e.pathname;return/^\/search\/pins\//.test(t)},a=function(e){var t=e.pathname,n=e.search,r=/^\/search\/pins\/(\?.*)$/.exec(t),i=(n||r&&r[1]||"").substr(1).split("&").map(function(e){return e.split("=")}).find(function(e){return"q"===e[0]});return i?decodeURIComponent(i[1]):""},l=function(e){var t=((function(e){if(Array.isArray(e))return r(e)})(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return r(e,void 0);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,void 0):void 0}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).reverse().find(function(e){var t=e.location;return t&&!i(t)});return t&&t.location&&o(t.location)?a(t.location):""}},890991:function(e,t,n){n.d(t,{Z:function(){return K}});var r,i=n(387784);n(204306);var o=n(20256);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function s(e,t,n){var r;return(r=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==a(r)?r:r+"")in e)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return d(e,void 0);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,void 0):void 0}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var p=n(352015),f=n(183e3),y=n(806513),g=n(24246),m=n(78835),h=n(501010),v=n(774838),b=n(834182),w=n(69841),S=n(680811),P=["pinKey"];function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){return(j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function x(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(k=function(){return!!e})()}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach(function(t){D(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function D(e,t,n){return(t=C(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e){var t=function(e,t){if("object"!=O(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=O(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==O(t)?t:t+""}var E=(void 0!==r||(r=n(396342)).hash&&"95793e1276a19bfa11c2fd12c81bc9af"!==r.hash&&console.error("The definition of 'DeprecatedCarousel_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r),F=function(e){var t=e.reduce(function(e,t){var n,r=t.imageSizeMap,i=(null==r?void 0:r["736x"])||(null==r?void 0:r["236x"])||{},o=i.height,a=i.width,l="".concat(null!=a?a:1,"x").concat(null!=o?o:1),u=(null==(n=e[l])?void 0:n.times)||0;return I(I({},e),{},D({},l,{imageHeight:o,imageWidth:a,times:u+1}))},{}),n=Object.keys(t).reduce(function(e,n){return t[n].times>e.times?t[n]:e},{times:-1,imageHeight:-1,imageWidth:-1});return Object.keys(t).length>1?{imageHeight:n.imageHeight,imageWidth:n.imageWidth}:null},V=function(e,t,n,r,i,a,l,u,s,c,d,p,f,y,g,m){var h,v,w,P,O,j,x,k,T,_,I,D,C,E,F=n.imageSizeMap,V=n.details,L=236,A=236,K="";a?(L=474,A=F&&Math.min(L/.8,L/((null!=(P=null==(O=F["564x"])?void 0:O.width)?P:1)/(null!=(j=null==(x=F["564x"])?void 0:x.height)?j:1))),K=F&&(null==(k=F["564x"])?void 0:k.url)):F&&F["736x"]?(A=F&&F["736x"]&&F["736x"].height,L=F&&F["736x"]&&F["736x"].width,K=F&&F["736x"]&&F["736x"].url):F&&F["236x"]&&(A=F&&F["236x"]&&F["236x"].height,L=F&&F["236x"]&&F["236x"].width,K=F&&F["236x"]&&F["236x"].url),f&&y&&(A=Math.min(f*y,null!=(T=A)?T:1)),w=a?"".concat(null!=(_=null==F||null==(I=F["564x"])?void 0:I.url)?_:""," 1x"):[(null==F?void 0:F["474x"])&&"".concat(null!=(D=F["474x"].url)?D:""," 2x"),(null==F?void 0:F["736x"])&&"".concat(null!=(C=F["736x"].url)?C:""," 3x"),(null==F?void 0:F.orig)&&"".concat(null!=(E=F.orig.url)?E:""," 4x")].filter(Boolean).join(", ");var R=(0,b.GH)(void 0===V?"":V,t,i),M=p?void 0:A,H=p?void 0:L,W=g?{boxHeight:null==g?void 0:g.imageHeight,boxWidth:null==g?void 0:g.imageWidth}:{boxHeight:M,boxWidth:H},B=W.boxHeight,Z=W.boxWidth;return(0,S.jsx)(o.xu,{"data-test-id":"carousel-slot-container",height:null!=B?B:void 0,width:null!=Z?Z:void 0,children:(0,S.jsx)(o.xu,{"data-test-id":"carousel-img-".concat(i),height:p?d:void 0,width:p||void 0,children:K&&(0,S.jsx)(o.Ee,{_fixCompletedOnLoad:e,alt:R,crossOrigin:m?"anonymous":void 0,fit:p?"cover":"none",naturalHeight:null!=(h=A)?h:1,naturalWidth:null!=(v=L)?v:1,onError:l,onLoad:u,src:K,srcSet:w})})},"carousel-slot-".concat(r,"-").concat(i))},L=function(e,t){var n=e.pinId,r=e.slot,i=e.slotIndex,a=e.onError,l=e.onLoad,u=e.widthToUse,s=e.gap,c=["564x","736x","474x","236x"].map(function(e){var t;return null==(t=r.imageSizeMap)?void 0:t[e]}).find(function(e){return null==e?void 0:e.url})||{},d=c.url,p=c.width,f=c.height,y=r.details,g=(0,b.GH)(void 0===y?"":y,t,i);return(0,S.jsx)(o.xu,{"data-test-id":"carousel-slot-container",height:"100%",marginEnd:s,width:u,children:(0,S.jsx)(o.zd,{height:"100%",wash:!0,children:d&&(0,S.jsx)(o.Ee,{alt:g,fit:"contain",naturalHeight:null!=f?f:1,naturalWidth:null!=p?p:1,onError:a,onLoad:l,src:d})})},"carousel-slot-".concat(n,"-").concat(i))},A=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&j(i,e);var t,n,r=(t=k(),function(){var e,n=T(i);return e=t?Reflect.construct(n,arguments,T(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==O(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return x(e)}(this,e)});function i(){var e;if(!(this instanceof i))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];return D(x(e=r.call.apply(r,[this].concat(n))),"state",{showBadge:!0,startImpressionTimer:!1}),D(x(e),"renderBadge",function(){var t=e.props,n=t.carouselData,r=t.isCloseup,i=t.showCarouselBadge;if(!n)return null;var a=e.state.showBadge,l=n.carouselSlots,u=n.index;return!r&&i?(0,S.jsx)(o.xu,{alignItems:"center",color:"selected",dangerouslySetInlineStyle:{__style:{opacity:.8*!!a,transition:"opacity .3s"}},"data-test-id":"carousel-badge",display:"flex",height:35,justifyContent:"center",marginEnd:5,marginTop:5,position:"absolute",right:!0,rounding:2,width:35,zIndex:new o.Ry(1),children:(0,S.jsx)(o.xv,{color:"inverse",children:"".concat((null!=u?u:0)+1,"/").concat((null!=l?l:[]).length)})}):null}),D(x(e),"onLoadImage",function(){var t,n;e.setState({startImpressionTimer:!0}),null==(t=(n=e.props).onLoad)||t.call(n)}),D(x(e),"onImageLoadError",function(){var t,n;e.setState({startImpressionTimer:!1}),null==(t=(n=e.props).onError)||t.call(n)}),e}return n=[{key:"componentDidMount",value:function(){var e=this;this.hideBadgeTimeout=setTimeout(function(){return e.setState({showBadge:!1})},3e3)}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.state.showBadge,r=e.carouselData,i=this.props.carouselData;if(r&&i){var o=r.index,a=i.index;n&&(this.hideBadgeTimeout&&clearTimeout(this.hideBadgeTimeout),this.hideBadgeTimeout=setTimeout(function(){return t.setState({showBadge:!1})},3e3)),o!==a&&(this.hideBadgeTimeout&&clearTimeout(this.hideBadgeTimeout),this.setState({showBadge:!0}))}}},{key:"componentWillUnmount",value:function(){this.hideBadgeTimeout&&clearTimeout(this.hideBadgeTimeout)}},{key:"render",value:function(){var e,t,n=this,r=this.props,i=r.isCloseup,a=r.carouselIndex,l=r.closeupHeight,u=r.closeupWidth,s=void 0===u?0:u,c=r.widthRatio,d=void 0===c?1:c,p=r.cropHeight,f=r.cropWidth,g=r.carouselData,h=r.disableTransition,v=r.highResOnly,P=r.pinId,O=r.imageSignature,j=r.isEditMode,x=r.isDenseView,k=r.isThirdPartyAd,T=r._fixCompletedOnLoad;if(!g)return null;if(d>1||d<0)throw Error("widthRatio should be between 0 and 1 inclusive");var _=g.carouselSlots,D=null!=(t=g.index)?t:0,C=void 0!==a?a:null!=D?D:0,E=(_[C]||{}).imageSizeMap,A=Math.floor((e=i?s:!i&&f||(v?474:x?y.Lo:y.yF))*d),K=(null==E?void 0:E["236x"])||{},R=p||K.height||0,M=f||K.width||236,H=l||R/M*A,W=F(_);return(0,S.jsxs)(o.xu,{alignItems:"center","data-test-id":"carousel-pin","data-test-image-signature":O,display:"flex",height:H,minHeight:m.Ml,overflow:"hidden",children:[!j&&this.renderBadge(),(0,S.jsx)(w.JE,{carouselData:I(I({},g),{},{type:"canonical"}),impressionType:"Pin",isPaused:!this.state.startImpressionTimer,loggingId:P,slotIndex:null!=D?D:0,viewParameter:72,viewType:1,children:function(e){var t=e.impressionTrackerRef;return(0,S.jsx)(o.xu,{ref:t,"data-test-id":"carousel-impression-ref-".concat(P,"-").concat(D),height:H,overflow:"hidden",position:"absolute",width:A})}},"carousel-impression-key-".concat(C)),(0,S.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{transition:h?"":"left .3s",left:(0,b.vF)(_.length,A,e,C)}},direction:"row",display:"flex",height:"100%",left:!0,position:"relative",width:A*_.length,children:_.map(function(t,r){if(i){var o=r===_.length-1;return L({pinId:P,slot:t,slotIndex:r,onError:n.onImageLoadError,onLoad:n.onLoadImage,widthToUse:A,gap:+(A<e&&!o)},n.props.i18n)}return V(T,n.props.i18n,t,P,r,v,n.onImageLoadError,n.onLoadImage,s,l,p,f,H,A,W,k)})})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,C(r.key),r)}}(i.prototype,n),Object.defineProperty(i,"prototype",{writable:!1}),i}(i.Component);function K(e){var t,n,r=e.pinKey,i=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&({}).propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,P),o=(0,g.Z)(),a=(0,h.Z)().checkExperiment,l=(0,v.B)().isAuthenticated,d=(0,f.Z)(E,r),y=(0,p.Z)(d),m=y&&I(I({},y),{},{carouselSlots:(t=y.carouselSlots,n=["236x","474x","564x","736x"].map(function(e){var n=Math.min.apply(Math,c(t.map(function(t){var n,r;return(null==(n=t.imageSizeMap)||null==(r=n[e])?void 0:r.height)||1/0}))),r=Math.min.apply(Math,c(t.map(function(t){var n,r;return(null==(n=t.imageSizeMap)||null==(r=n[e])?void 0:r.width)||1/0})));return{imageKey:e,height:n,width:r}}),t.map(function(e){return n.reduce(function(e,t){var n,r=t.imageKey,i=t.height,o=t.width;return u(u({},e),{},{imageSizeMap:u(u({},e.imageSizeMap),null!=(n=e.imageSizeMap)&&n[r]?s({},r,u(u({},e.imageSizeMap[r]),{},{height:i,width:o})):{})})},e)}))});return(0,S.jsx)(A,I(I({},i),{},{carouselData:m,checkExperiment:a,i18n:o,imageSignature:d.imageSignature,isAuthenticated:l,pinId:d.entityId}))}D(A,"defaultProps",{showCarouselBadge:!0})},959703:function(e,t,n){n.d(t,{ZP:function(){return B}});var r,i,o=n(387784);n(204306);var a=n(20256),l=n(230201),u=n(562400),s=n(183e3),c=n(171556),d=n(501010),p=n(774838),f=n(98249),y=n(281213),g=n(317083);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var h=["eventData","component","objectId","view","viewParameter"];function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var b=n(9065),w=n(680811);function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var P=["height","width","windowHeight","windowWidth","viewability"];function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach(function(t){I(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function x(e,t){return(x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function k(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(T=function(){return!!e})()}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t,n){return(t=D(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(e){var t=function(e,t){if("object"!=S(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=S(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==S(t)?t:t+""}function C(e,t){if(e){if("string"==typeof e)return E(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(e,t):void 0}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var F=(0,b.Z)(function(){return Promise.all([n.e("25418"),n.e("22244"),n.e("31142")]).then(n.bind(n,90397))},void 0,function(e){return 90397},"app-www-video-VideoWrapper",function(e){return ["25418","22244","31142"]}),V=[0,.25,.5,.75,.95,.97],L=[0,.5,.8,.99,1],A={rootMargin:"-64px 0px 0px 0px",threshold:function(e){if(Array.isArray(e))return E(e)}(r=g.iM)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||C(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()},K=Object.freeze({LOADING:0,PLAYING:1,PAUSED:2,STALLING:3}),R=(void 0!==i||(i=n(584060)).hash&&"93ed23334d5bac81ac8410f05c4f2031"!==i.hash&&console.error("The definition of 'VideoWithContextLogging_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);function M(){return new Date().getTime()}function H(e){return!!e.volume&&e.volume>0}var W=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&x(i,e);var t,n,r=(t=T(),function(){var e,n=_(i);return e=t?Reflect.construct(n,arguments,_(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==S(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return k(e)}(this,e)});function i(e){if(!(this instanceof i))throw TypeError("Cannot call a class as a function");I(k(t=r.call(this,e)),"videoWrapperRef",(0,o.createRef)()),I(k(t),"loggedQuartiles",new Set),I(k(t),"handleWindowResize",function(){if(!t.fullscreen){var e=t.getDimensions(),n=t.currentInterval,r=n.height,i=n.width;e.height!==r||e.width!==i?t.startNewInterval(e):(t.currentInterval.windowHeight=e.windowHeight,t.currentInterval.windowWidth=e.windowWidth)}}),I(k(t),"handlePlayheadDown",function(e){var n=e.event,r=t.props.onPlayheadDown;t.setState({seeking:!0}),r&&r({event:n})}),I(k(t),"handlePlayheadUp",function(e){var n=e.event,r=t.props.onPlayheadUp;t.setState({seeking:!1}),r&&r({event:n})}),I(k(t),"handleLoop",function(){t.videoTime=0}),I(k(t),"handlePlaying",function(e){t.logVideoStart(),t.props.onPlaying&&t.props.onPlaying(e)}),I(k(t),"handleTimeChange",function(e){var n=t.state,r=n.seeking,i=n.ready;if(t.currentInterval.videoDuration){var o=1e3*e.time,a=function(e,t,n,r){if(e>t||n<=0)return null;var i,o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=C(e))){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}(r);try{for(o.s();!(i=o.n()).done;){var a=i.value,l=a*n;if(e<=l&&t>l)return a}}catch(e){o.e(e)}finally{o.f()}return null}(t.videoTime,o,t.currentInterval.videoDuration,V);if("number"==typeof a&&t.props.playing&&!r&&i){var l=M(),u=t.props.isQuartileDeduplicationEnabled;u&&t.loggedQuartiles.has(a)||(t.logVideoEvent(6906,j(j({},t.currentInterval),{},{startTime:l,endTime:l,videoStartTime:0,videoEndTime:0,quartile:Math.floor(4*a),quartilePercentValue:a})),u&&t.loggedQuartiles.add(a))}t.videoTime=o,t.props.onTimeChange&&t.props.onTimeChange(e)}}),I(k(t),"handleDurationChange",function(e){t.currentInterval.videoDuration=1e3*e.duration,t.props.onDurationChange&&t.props.onDurationChange(e)}),I(k(t),"handleReady",function(e){t.state.ready||t.setState({ready:!0}),t.props.onReady&&t.props.onReady(e)}),I(k(t),"handleEnded",function(e){t.logFourthQuartileEvent(),t.props.loop&&(t.startNewInterval(),t.currentInterval.videoStartTime=0),t.props.onEnded&&t.props.onEnded(e)}),I(k(t),"handleVisibilityChange",function(e){if(0!==e.length){var n=function(e){for(var t=0;t<L.length;t+=1){var n=L[t],r=L[t+1];if(null==r||n<=e&&e<r)return n}return null}(Number.parseFloat(e.slice(-1)[0].intersectionRatio.toFixed(2)));"number"==typeof n&&(t.visible=n>=.5),null==n||n===t.currentInterval.viewability||t.fullscreen||(0===n?t.startNewInterval({viewability:n,playbackState:K.PAUSED}):t.startNewInterval({viewability:n}))}}),I(k(t),"handleFullscreenChange",function(e){var n=e.event,r=e.fullscreen;if(r){var i=window.screen,o=i.height,a=i.width;t.startNewInterval({height:o,width:a,windowHeight:o,windowWidth:a})}else r||t.startNewInterval(t.getDimensions());t.fullscreen=r,t.props.onFullscreenChange&&t.props.onFullscreenChange({event:n,fullscreen:r})}),I(k(t),"handleClose",function(){t.startNewInterval()}),t.state={ready:!1,seeking:!1,started:!1};var t,n=M();return t.handleWindowResize=(0,u.Z)(t.handleWindowResize,1e3),t.currentInterval={videoDuration:0,startTime:n,endTime:n,videoStartTime:0,videoEndTime:0,isAudible:H(e),playbackState:t.getPlaybackState(e,t.state),quartile:-1,quartilePercentValue:0,height:null,width:null,windowHeight:null,windowWidth:null,viewability:null},t.videoTime=0,t.fullscreen=!1,t.visible=null,t}return n=[{key:"componentDidMount",value:function(){this.currentInterval=j(j({},this.currentInterval),this.getDimensions()),window.addEventListener("resize",this.handleWindowResize),window.addEventListener("beforeunload",this.handleClose)}},{key:"componentDidUpdate",value:function(e,t){var n={};H(e)&&!H(this.props)?n.isAudible=!1:!H(e)&&H(this.props)&&(n.isAudible=!0);var r=this.getPlaybackState(this.props,this.state);this.getPlaybackState(e,t)!==r&&(n.playbackState=r),Object.keys(n).length>0&&this.startNewInterval(n)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleWindowResize),window.removeEventListener("beforeunload",this.handleClose),this.startNewInterval()}},{key:"getPlaybackState",value:function(e,t){return t.ready?e.playing&&!t.seeking?K.PLAYING:K.PAUSED:K.LOADING}},{key:"getDimensions",value:function(){if(this.videoWrapperRef.current){var e,t,n=this.videoWrapperRef.current;n.clientHeight&&n.clientWidth&&(e=n.clientHeight,t=n.clientWidth)}return{height:e,width:t,windowHeight:window.innerHeight,windowWidth:window.innerWidth}}},{key:"logVideoEvent",value:function(e,t){var n=this.props,r=n.closeupStoryPinViewability,i=n.contextLogData,o=n.logContextEvent,a=n.playing,l=n.surface,u=this.state.seeking,s=t.height,c=t.width,d=t.windowHeight,p=t.windowWidth,f=t.viewability,y=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&({}).propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(t,P);if(null!=s&&null!=c&&null!=d&&null!=p&&null!=f){var g,b,w,S,O,x,k,T,_,I,D,C,E,F,V,L,A,K=j(j({},y),{},{gridAutoplay:6904===e&&a&&!u&&("AuthHomefeed"===l||"SearchItem"===l||"RelatedPinGrid"===l||"PdpRelatedPinGrid"===l),height:s,width:c,windowHeight:d,windowWidth:p,viewability:r||f});o(j({event_type:e},(w=(b=(g=j(j({},i),{},{view:this.fullscreen?108:i.view,eventData:{videoEvent:K}})).eventData.videoEvent).gridAutoplay,S=b.videoDuration,O=b.startTime,x=b.endTime,k=b.videoStartTime,T=b.videoEndTime,_=b.isAudible,I=b.height,D=b.width,C=b.playbackState,E=b.quartile,F=b.quartilePercentValue,V=b.windowHeight,L=b.windowWidth,A=b.viewability,{component:g.component,object_id_str:g.objectId,view_type:g.view,view_parameter:g.viewParameter,aux_data:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach(function(t){var r,i;r=t,i=n[t],(r=function(e){var t=function(e,t){if("object"!=m(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=m(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==m(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&({}).propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(g,h)),event_data:{videoEventData:{gridAutoplay:w,videoDuration:S?Math.floor(S):0,time:O,endTime:x,videoTime:k?Math.floor(k):0,endVideoTime:T?Math.floor(T):0,isAudible:_,height:I,width:D,playbackState:C,quartile:E,quartilePercentValue:F,windowHeight:V,windowWidth:L,viewability:A}}})))}}},{key:"logFourthQuartileEvent",value:function(){var e=this.props.isQuartileDeduplicationEnabled;if(!e||!this.loggedQuartiles.has(1)){var t=M();this.logVideoEvent(6906,j(j({},this.currentInterval),{},{startTime:t,endTime:t,videoStartTime:0,videoEndTime:0,quartile:4,quartilePercentValue:1})),e&&this.loggedQuartiles.add(1)}}},{key:"logVideoStart",value:function(){if(!this.state.started){var e=this.props,t=e.contextLogData;(0,e.setVideoPlayed)(t.objectId),this.setState({started:!0})}}},{key:"startNewInterval",value:function(e){var t=M();this.logVideoEvent(6904,j(j({},this.currentInterval),{},{endTime:t,videoEndTime:this.videoTime})),this.currentInterval=j(j(j({},this.currentInterval),e),{},{startTime:t,videoStartTime:this.videoTime,endTime:-1,videoEndTime:-1})}},{key:"render",value:function(){var e=this,t=this.props,n=t.rootMargin,r=t.surface,i=t.aspectRatio,o=t.backgroundColor,l=t.captions,u=t.contextLogData,s=t.controls,d=t.fallback,p=t.hlsConfig,y=t.isAutoPlay,g=t.loop,m=t.objectFit,h=t.onLoadedChange,v=t.onControlsPause,b=t.onControlsPlay,S=t.onSeek,P=t.onVolumeChange,O=t.pin,j=t.playbackRate,x=t.playing,k=t.playsInline,T=t.poster,_=t.preload,I=t.seekTime,D=t.src,C=t.videoStartTime,E=t.volume,V=t.video,L=t.variant,K=t.setVideoRef,R=this.state.seeking;return void 0!==n&&(A.rootMargin=r?(0,f.e)(r):n),(0,w.jsx)(c.Z,{onVisibilityChange:this.handleVisibilityChange,options:A,children:function(t){return(0,w.jsx)(a.xu,{ref:function(n){t.current=n,e.videoWrapperRef.current=n},height:"inherit",children:(0,w.jsx)(F,{aspectRatio:i,backgroundColor:o,captions:l,contextLogData:u,controls:s,fallback:d,hlsConfig:p,isAutoPlay:y,loop:g,objectFit:m,onControlsPause:v,onControlsPlay:b,onDurationChange:e.handleDurationChange,onEnded:e.handleEnded,onFullscreenChange:e.handleFullscreenChange,onLoadedChange:h,onLoop:e.handleLoop,onPlay:function(){},onPlayError:function(){},onPlayheadDown:e.handlePlayheadDown,onPlayheadUp:e.handlePlayheadUp,onPlaying:e.handlePlaying,onReady:e.handleReady,onSeek:S,onTimeChange:e.handleTimeChange,onVolumeChange:P,pinKey:O,playbackRate:j,playing:!R&&x,playsInline:k,poster:T,preload:_,seekTime:I,setVideoRef:K,src:D,variant:L,video:V,videoStartTime:C,visible:e.visible,volume:E})})}})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,D(r.key),r)}}(i.prototype,n),Object.defineProperty(i,"prototype",{writable:!1}),i}(o.Component);function B(e){var t=e.pinKey,n=(0,s.Z)(R,t),r=(0,l.u)().logContextEvent,i=(0,y.H)().setVideoPlayed,o=(0,p.B)(),a=(0,(0,d.Z)().checkExperiment)("web_metrics_video_quartile_deduplication").anyEnabled;return(0,w.jsx)(W,j(j({},e),{},{isQuartileDeduplicationEnabled:a,logContextEvent:r,pin:n,requestContext:o,setVideoPlayed:i}))}I(W,"defaultProps",a.nk.defaultProps)},317083:function(e,t,n){n.d(t,{Ul:function(){return o},VS:function(){return r},hy:function(){return a},iM:function(){return i},j4:function(){return l}});var r=2,i=[0,.01,.02,.03,.04,.05,.06,.07,.08,.09,.1,.11,.12,.13,.14,.15,.16,.17,.18,.19,.2,.21,.22,.23,.24,.25,.26,.27,.28,.29,.3,.31,.32,.33,.34,.35,.36,.37,.38,.39,.4,.41,.42,.43,.44,.45,.46,.47,.48,.49,.5,.51,.52,.53,.54,.55,.56,.57,.58,.59,.6,.61,.62,.63,.64,.65,.66,.67,.68,.69,.7,.71,.72,.73,.74,.75,.76,.77,.78,.79,.8,.81,.82,.83,.84,.85,.86,.87,.88,.89,.9,.91,.92,.93,.94,.95,.96,.97,.98,.99,1],o={backgroundImage:"linear-gradient(to top, rgba(0, 0, 0, .4), rgba(0, 0, 0, 0))",pointerEvents:"none",bottom:0},a=128,l=function(e){return e&&document.querySelector('video[poster="'.concat(e,'"]'))||null}}}]);