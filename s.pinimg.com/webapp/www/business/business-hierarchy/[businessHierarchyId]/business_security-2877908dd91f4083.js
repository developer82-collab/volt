(self.legacyJsonp=self.legacyJsonp||[]).push([["99097"],{340922:function(e,t,n){"use strict";var r=n(387784),s=n(69406),i=n(719301),o=n(681698),c=n(935059),a=n(501010),l=n(239426),u=n(563218),d=n(386811);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){var r,s;r=t,s=n[t],(r=function(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=f(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==f(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function b(e,t,n,r,s,i,o){try{var c=e[i](o),a=c.value}catch(e){return void n(e)}c.done?t(a):Promise.resolve(a).then(r,s)}function y(e){return function(){var t=this,n=arguments;return new Promise(function(r,s){var i=e.apply(t,n);function o(e){b(i,r,s,o,c,"next",e)}function c(e){b(i,r,s,o,c,"throw",e)}o(void 0)})}}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,s,i,o,c=[],a=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;a=!1}else for(;!(a=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);a=!0);}catch(e){l=!0,s=e}finally{try{if(!a&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw s}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.Z=function(){var e,t,n,f=(0,a.Z)().checkExperiment("ba_mfa_enabled").anyEnabled,h=(0,c.Z)(),b=_((0,r.useState)([]),2),p=b[0],S=b[1],g=_((0,r.useState)([]),2),x=g[0],v=g[1],A=_((0,r.useState)([]),2),j=A[0],E=A[1],C=(0,r.useCallback)((e=y(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=5;break}return n=(0,l.dF)({id:String(t)},i.cU,"PEOPLE"),e.next=4,Promise.all([n,(0,u.cR)(),(0,d.ZP)({businessId:String(t),useApiResource:!0})]).then(function(e){return e});case 4:return e.abrupt("return",e.sent);case 5:return e.abrupt("return",[null,null,null]);case 6:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}),[f]),I=h.isAuth?h.id:void 0;(0,r.useEffect)(function(){var e;(e=y(regeneratorRuntime.mark(function e(){var t,n,r,s,i,o,c,a,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="business_roles",e.next=3,C(I);case 3:s=(r=_(e.sent,3))[0],i=r[1],o=r[2],c=i||[],a=(null==s?void 0:s.data.data)||[],l=(null==o||null==(t=o.data)?void 0:t.business_roles)||[],S(c.filter(function(e){return(e.requires_mfa_for_roles||[]).some(function(t){return(e[n]||[]).includes(t)})})),l&&v(a.filter(function(e){return l.some(function(t){return(e[n]||[]).includes(t)})})),E(l);case 14:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)})()},[I,C]);var P=(0,r.useCallback)((t=y(regeneratorRuntime.mark(function e(t){var n,r,s,i,o,c,a,l,u,d,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",{});case 2:return r="business_roles",e.next=5,C(t);case 5:return i=(s=_(e.sent,3))[0],o=s[2],c=(null==i?void 0:i.data.data)||[],l=(a=(null==o||null==(n=o.data)?void 0:n.business_roles)||[]).length>0,u=[],d=[],l&&(d=(u=c.filter(function(e){return a.some(function(t){return(e[r]||[]).includes(t)})})).filter(function(e){return e.has_mfa_enabled})),f=null,a.length>0&&(f=a.length>1?"EVERYONE":"MANAGERS"),e.abrupt("return",{businessId:t,isEnforced:l,enforcementType:f,activeEmployees:l?d.length:null,pendingSetupEmployees:l?u.length-d.length:null});case 18:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),[C]),w=(0,r.useCallback)((n=y(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",[]);case 2:return e.prev=2,e.next=5,(0,o.Z)({url:"ads/v4/business_access/business_hierarchies/"});case 5:if(r=(null==(n=(e.sent.resource_response.data||[]).find(function(e){return e.id===t}))?void 0:n.children)||[],e.t0=r,!e.t0){e.next=15;break}return e.next=14,Promise.all(r.map(function(){var e=y(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.user.entity_type=s.Oz.USER_ACCOUNT,e.prev=1,e.t0=m,e.t1=m({},t),e.t2={},e.t3=m,e.t4={},e.next=9,P(t.user.id);case 9:return e.t5=e.sent,e.t6=(0,e.t3)(e.t4,e.t5),e.t7={mfa_summary:e.t6},e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t7));case 15:return e.prev=15,e.t8=e.catch(1),e.abrupt("return",t);case 18:case"end":return e.stop()}},e,null,[[1,15]])}));return function(t){return e.apply(this,arguments)}}()));case 14:e.t0=e.sent;case 15:return i=e.t0,e.abrupt("return",i||[]);case 19:return e.prev=19,e.t1=e.catch(2),e.abrupt("return",[]);case 22:case"end":return e.stop()}},e,null,[[2,19]])})),function(e){return n.apply(this,arguments)}),[P]);return{employersWhoRequireMfa:p,employeesRequiredToMfa:x,viewerId:String(h.isAuth?h.id:void 0),viewerRequiresMfaForRoles:j,getMFAEnforcementDetailsForBusinessById:P,getChildBusinessesWithMFAEnforcementDetailsForHierarchyById:w}}},238212:function(e,t,n){"use strict";var r=n(20256),s=n(766857),i=n(24246),o=n(540846),c=n(89446),a=n(680811);t.Z=function(e){var t=e.page,n=e.shouldUseSlimBanner,l=(0,c.KJ)(),u=(0,i.Z)(),d=(0,s.ZP)(t),f=(0,o.y)().openSheet,h=u._('You have one or more ad accounts that require ad account creation approval', '[m10n]businessAccess.aoaaRequestsBanner.accessibilityLabel', 'Accessibility label for ad account request callout'),m=u._('You have one or more ad accounts that require ad account creation approval', '[m10n]businessAccess.aoaaRequestsBanner.message', 'Message providing details to the advertiser about the ad account request.'),b={accessibilityLabel:u._('View requests', '[m10n]businessAccess.aoaaRequestsBanner.action.accessibilityLabel', 'Accessbility label for view requests banner link'),label:u._('View requests', '[m10n]businessAccess.aoaaRequestsBanner.action.label', 'View requests banner link'),onClick:function(){d({eventName:"BUSINESS_ACCESS_ACTION",component:"BUSINESS_ACCESS_CONTAINER",componentId:"aoaa-pending-incoming-requests-banner",element:"BUSINESS_ACCESS_LINK",elementId:"aoaa-pending-incoming-requests-banner-link",business_id:l}),f("RESPOND_AOAA_REQUESTS",{id:l})}};return void 0!==n&&n?(0,a.jsx)(r.xu,{children:(0,a.jsx)(r.he,{iconAccessibilityLabel:h,message:m,primaryAction:b,type:"info"})}):(0,a.jsx)(r.xu,{children:(0,a.jsx)(r.ci,{iconAccessibilityLabel:h,message:m,primaryAction:b,type:"info"})})}},394215:function(e,t,n){"use strict";n.d(t,{A:function(){return u},Z:function(){return d}});var r=n(20256),s=n(997526),i=n(24246),o=n(238212),c=n(143754),a=n(680811),l=function(){var e=(0,i.Z)();return(0,a.jsx)(r.kC,{alignItems:"stretch",justifyContent:"center",children:(0,a.jsx)(r.xH,{accessibilityLabel:(0,c.hC)(e),delay:!1,show:!0,size:"sm"})})},u=function(e){var t=e.title,n=e.subtitle,i=e.header,o=e.content;return(0,a.jsxs)(r.xu,{as:"article",marginEnd:6,marginStart:6,paddingY:6,children:[(0,a.jsxs)(r.xu,{as:"header",marginBottom:4,marginStart:2,children:[(0,a.jsx)(r.xu,{marginBottom:2,children:"string"==typeof t?(0,a.jsx)(r.X6,{size:"600",children:t}):t}),"string"==typeof n?(0,a.jsx)(r.xv,{size:"300",children:n}):n]}),(0,a.jsx)(r.xu,{as:"section",borderStyle:"sm",color:"default",dangerouslySetInlineStyle:{__style:{borderColor:s.iiJ}},padding:4,rounding:4,children:(0,a.jsxs)(r.kC,{direction:"column",gap:6,children:[!!i&&(0,a.jsx)(r.kC.Item,{flex:"grow",children:i}),(0,a.jsx)(r.kC.Item,{children:o})]})})]})},d=function(e){var t=e.title,n=e.titleTooltip,c=e.subtitle,u=e.cta,d=e.secondaryAction,f=e.search,h=e.tabs,m=e.isLoading,b=e.table,y=e.maxWidth,_=e.heightShouldGrowWithContent,p=e.showAoaaBanner,S=e.banner,g=e.subtitleHref,x=void 0===g?"":g,v=e.subtitleDataTestId,A=(0,i.Z)(),j=(0,a.jsxs)(r.xu,{children:[(0,a.jsxs)(r.xu,{alignItems:"center",display:"flex",justifyContent:"between",marginBottom:4,width:"100%",children:[(0,a.jsx)(r.xu,{children:h}),(0,a.jsx)(r.xu,{marginBottom:2,children:u})]}),f?(0,a.jsx)(r.xu,{marginBottom:2,minWidth:"100%",children:f}):null]}),E=(0,a.jsxs)(r.xu,{alignItems:"center",display:"flex",justifyContent:"between",marginBottom:2,width:"100%",children:[(0,a.jsx)(r.kC.Item,{flex:"grow",children:f}),(0,a.jsx)(r.xu,{alignItems:"center",display:"flex",marginStart:2,children:u})]}),C=A._('Additional info', '[m10n] businessAccess.permissions.cell.additionalInfo', 'accessibility label of more info tooltips');return(0,a.jsxs)(r.xu,{direction:"column",display:"flex",overflow:"visible",padding:6,children:[(0,a.jsxs)(r.xu,{display:"flex",marginBottom:4,marginStart:2,children:[(0,a.jsxs)(r.kC,{alignItems:"center",justifyContent:"start",children:[(0,a.jsx)(r.X6,{size:"600",children:t}),n&&(0,a.jsx)(r.hU,{accessibilityLabel:A._('Page info icon', '[[m10n]bizAccess.page.info.icon', 'Accessibility label for page info icon'),bgColor:"transparent",icon:"info-circle",iconColor:"gray",size:"xs",tooltip:{text:n,accessibilityLabel:n}})]}),!!c&&"string"==typeof c&&(0,a.jsx)(r.xu,{alignItems:"center","data-test-id":v,display:"flex",marginStart:1,children:x?(0,a.jsx)(r.I_,{accessibilityLabel:C,bgColor:"transparent",href:x,icon:"info-circle",iconColor:"subtle",size:"xs",tooltip:{text:c}}):(0,a.jsx)(r.hU,{accessibilityLabel:C,bgColor:"transparent",icon:"info-circle",iconColor:"gray",size:"xs",tooltip:{text:c}})})]}),(0,a.jsxs)(r.kC,{direction:"column",width:"100%",children:[p&&(0,a.jsx)(r.xu,{marginBottom:2,minWidth:"100%",children:(0,a.jsx)(o.Z,{page:3803,shouldUseSlimBanner:!0})}),S?(0,a.jsx)(r.xu,{minWidth:"100%",children:S}):null]}),(0,a.jsx)(r.kC,{minHeight:_?void 0:"calc(100vh - 169px)",width:"100%",children:(0,a.jsx)(r.xu,{borderStyle:"sm",color:"light",dangerouslySetInlineStyle:{__style:{borderColor:s.iiJ}},flex:"grow",maxWidth:y,minWidth:940,padding:4,rounding:4,width:"grow",children:(0,a.jsxs)(r.kC,{direction:"column",children:[h?j:E,d&&(0,a.jsx)(r.xu,{alignItems:"center",display:"flex",justifyContent:"between",marginBottom:2,children:(0,a.jsx)(r.xu,{marginBottom:2,children:d})}),m?(0,a.jsx)(l,{}):(0,a.jsx)(r.xu,{children:b})]})})})]})}},895435:function(e,t,n){"use strict";n.d(t,{Z:function(){return W}});var r=n(719301),s=n(999294),i=n(20256),o=n(24246),c=n(387784),a=n(766857),l=n(340922),u=n(924591),d=n(577356),f=n(893957),h=n(680811),m=function(e){var t=e.data.mfa_summary,n=t.isEnforced,r=t.activeEmployees;return(0,h.jsx)(c.Fragment,{children:(0,h.jsx)(i.kC,{alignItems:"center",justifyContent:"end",children:(0,h.jsx)(i.xv,{children:n?r:"--"})})})},b=n(583875),y=n(216975),_=function(e){var t,n,r=e.data,s=(0,o.Z)(),a=r.user;return(0,h.jsx)(c.Fragment,{children:(0,h.jsxs)(i.kC,{alignItems:"center",justifyContent:"start",children:[a&&(0,h.jsx)(b.qE,{name:null!=(t=a.full_name)?t:"",size:"sm",src:null!=(n=a.image_medium_url)?n:""}),(0,h.jsxs)(i.xu,{marginStart:2,children:[(0,h.jsx)(i.xv,{size:"200",children:a.full_name}),(0,h.jsx)(i.xv,{size:"100",children:(0,y.nk)(s._('ID: {{ id }}', '[m10n]bizAccess.business.hierarchy.business_security.childBusiness.id.subtitle', 'Text to display the id of the business in the subtitle of the item. id: Corresponds to the ID of the business'),{id:a.id})})]})]})})},p=function(e){var t=e.data.mfa_summary,n=t.isEnforced,r=t.pendingSetupEmployees;return(0,h.jsx)(c.Fragment,{children:(0,h.jsx)(i.kC,{alignItems:"center",justifyContent:"end",children:(0,h.jsx)(i.xv,{children:n?r:"--"})})})};function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach(function(t){var r,s;r=t,s=n[t],(r=function(e){var t=function(e,t){if("object"!=S(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=S(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==S(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function v(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||A(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){if(e){if("string"==typeof e)return j(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var E=function(e){var t,n,r=e.data.pageState,s=r.editable,l=r.localData,u=r.setLocalData,d=r.idx,f=l[d],m=f.businessId,b=f.isEnforced,y=f.enforcementType,_=(0,c.useRef)(null),p=function(e){if(Array.isArray(e))return e}(t=(0,c.useState)(!1))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,s,i,o,c=[],a=!0,l=!1;try{for(i=(n=n.call(e)).next;!(a=(r=i.call(n)).done)&&(c.push(r.value),2!==c.length);a=!0);}catch(e){l=!0,s=e}finally{try{if(!a&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw s}}return c}}(t,2)||A(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),S=p[0],g=p[1],j=(0,o.Z)(),E=(0,a.ZP)("BUSINESS_ACCESS_BUSINESS_HIERARCHY_BUSINESS_SECURITY");if(b)switch(y){case"MANAGERS":n=j._('Managers', '[m10n]bizAccess.business.hierarchy.business_security.enforcementType.managers.label', 'Label to express when a child business has manager-level MFA enforcement on the business hierarchy business security page');break;case"EVERYONE":n=j._('Everyone', '[m10n]bizAccess.business.hierarchy.business_security.enforcementType.everyone.label', 'Label to express when a child business has full MFA enforcement on the business hierarchy business security page');break;default:n=j._('Not enforced', '[m10n]bizAccess.business.hierarchy.business_security.enforcementType.everyone.label', 'Label to express when a child business has full MFA enforcement on the business hierarchy business security page')}else n=j._('Not enforced', '[m10n]bizAccess.business.hierarchy.business_security.enforcementType.everyone.label', 'Label to express when a child business has full MFA enforcement on the business hierarchy business security page');var C=(0,h.jsxs)(i.xu,{children:[(0,h.jsx)(i.zx,{ref:_,accessibilityControls:"edit-enforcement-type",accessibilityExpanded:S,accessibilityHaspopup:!0,color:"gray",disabled:!f.isEnforced,iconEnd:"arrow-down",onClick:function(){return g(!S)},selected:S,size:"sm",text:n}),S&&(0,h.jsx)(i.mh,{children:(0,h.jsx)(i.J2,{accessibilityLabel:j._('Choose enforcement type', '[m10n]bizAccess.business.hierarchy.business_security.enforcementType.popover.accessibilityLabel', 'Label for the enforcement type picker on the business hierarchy business security page'),anchor:_.current,forceDirection:!0,id:"enforcement-type-dropdown",idealDirection:"down",onDismiss:function(){return g(!1)},positionRelativeToAnchor:!1,size:346,children:(0,h.jsx)(i.xu,{margin:4,width:"100%",children:(0,h.jsx)(i.xu,{flex:"grow",children:(0,h.jsxs)(i.FX,{id:"enforcement-type-options",legend:j._('Select who is required to use two-factor authentication to access assets', '[m10n]bizAccess.business.hierarchy.business_security.enforcementType.options.legend', 'Legend for enforcement type options on the business hierarchy business security page'),children:[(0,h.jsx)(i.FX.RadioButton,{badge:{text:j._('Recommended', '[m10n]bizAccess.business.hierarchy.business_security.enforcementType.options.recommended.badge.text', 'Badge text for the recommended enforcement type on the business hierarchy business security page'),type:"recommendation"},checked:"EVERYONE"===y,helperText:j._('Provides the best protection for your assets', '[m10n]bizAccess.business.hierarchy.business_security.enforcementType.options.everyone.helperText', 'Helper text for the recommended enforcement type on the business hierarchy business security page'),id:"enforcement-type-everyone",label:j._('Everyone', '[m10n]bizAccess.business.hierarchy.business_security.enforcementType.options.everyone.label', 'Label for the everyone enforcement type on the business hierarchy business security page'),name:"everyone",onChange:function(){E({eventName:"BUSINESS_ACCESS_ACTION",component:"BUSINESS_ACCESS_FORM",componentId:"business-hierarchy-business-security-table",element:"BUSINESS_ACCESS_BUTTON",elementId:"business-hierarchy-business-security-change-enforcement-type-everyone",business_id:m}),u([].concat(v(l.slice(0,d)),[x(x({},l[d]),{},{isEnforced:f.isEnforced,enforcementType:"EVERYONE"})],v(l.slice(d+1))))},value:"everyone"}),(0,h.jsx)(i.FX.RadioButton,{checked:"MANAGERS"===y,id:"enforcement-type-managers",label:j._('Required for managers', '[m10n]bizAccess.business.hierarchy.business_security.enforcementType.options.managers.label', 'Label for the managers enforcement type on the business hierarchy business security page'),name:"managers",onChange:function(){E({eventName:"BUSINESS_ACCESS_ACTION",component:"BUSINESS_ACCESS_FORM",componentId:"business-hierarchy-business-security-table",element:"BUSINESS_ACCESS_BUTTON",elementId:"business-hierarchy-business-security-change-enforcement-type-managers",business_id:m}),u([].concat(v(l.slice(0,d)),[x(x({},l[d]),{},{isEnforced:f.isEnforced,enforcementType:"MANAGERS"})],v(l.slice(d+1))))},value:"managers"})]})})})})})]});return(0,h.jsx)(c.Fragment,{children:(0,h.jsx)(i.kC,{alignItems:"center",justifyContent:"start",children:s?C:(0,h.jsxs)(c.Fragment,{children:[(0,h.jsx)(i.JO,{accessibilityLabel:j._('MFA enforcement type icon', '[m10n]bizAccess.business.hierarchy.business_security.enforcementType.icon.accessibilityLabel', 'Accessibility label for the enforcement type of the child business on the business hierarchy business security page'),color:null===y?"default":"success",icon:null==y?"workflow-status-unstarted":"check-circle"}),(0,h.jsx)(i.xu,{marginEnd:2}),(0,h.jsx)(i.xv,{children:n})]})})})};function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach(function(t){var r,s;r=t,s=n[t],(r=function(e){var t=function(e,t){if("object"!=C(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=C(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==C(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function w(e){return function(e){if(Array.isArray(e))return z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return z(e,void 0);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,void 0):void 0}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var O=function(e){var t=e.data.pageState,n=t.editable,r=t.localData,s=t.setLocalData,o=t.idx,l=r[o],u=l.businessId,d=l.isEnforced,f=l.enforcementType,m=(0,a.ZP)("BUSINESS_ACCESS_BUSINESS_HIERARCHY_BUSINESS_SECURITY");return(0,h.jsx)(c.Fragment,{children:(0,h.jsx)(i.kC,{alignItems:"center",justifyContent:"start",children:(0,h.jsx)(i.rs,{disabled:!n,id:"toggleMFAEnforcement",onChange:function(){m({eventName:"BUSINESS_ACCESS_ACTION",component:"BUSINESS_ACCESS_FORM",componentId:"business-hierarchy-business-security-table",element:"BUSINESS_ACCESS_BUTTON",elementId:"business-hierarchy-business-security-toggle-enforcement",business_id:u}),s([].concat(w(r.slice(0,o)),[P(P({},r[o]),{},{isEnforced:!d,enforcementType:d?null:f||"EVERYONE"})],w(r.slice(o+1))))},switched:d})})})},T=n(594110),N=n(386811),R=n(520803);function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach(function(t){var r,s;r=t,s=n[t],(r=function(e){var t=function(e,t){if("object"!=B(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=B(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==B(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function D(e,t,n,r,s,i,o){try{var c=e[i](o),a=c.value}catch(e){return void n(e)}c.done?t(a):Promise.resolve(a).then(r,s)}function M(e){return function(){var t=this,n=arguments;return new Promise(function(r,s){var i=e.apply(t,n);function o(e){D(i,r,s,o,c,"next",e)}function c(e){D(i,r,s,o,c,"throw",e)}o(void 0)})}}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,s,i,o,c=[],a=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;a=!1}else for(;!(a=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);a=!0);}catch(e){l=!0,s=e}finally{try{if(!a&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw s}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return F(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Z=function(){var e,t=L((0,c.useState)(!0),2),n=t[0],s=t[1],b=L((0,c.useState)(!1),2),y=b[0],S=b[1],g=L((0,c.useState)([]),2),x=g[0],v=g[1],A=L((0,c.useState)([]),2),j=A[0],C=A[1],I=L((0,c.useState)([]),2),P=I[0],w=I[1],z=L((0,c.useState)(!1),2),B=z[0],U=z[1],D=(0,o.Z)(),F=(0,R.Z)().params.businessHierarchyId,Z=(0,d.dI)().showToast,q=(0,l.Z)().getChildBusinessesWithMFAEnforcementDetailsForHierarchyById,H=(0,a.ZP)("BUSINESS_ACCESS_BUSINESS_HIERARCHY_BUSINESS_SECURITY"),W=(0,c.useCallback)(M(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.next=3,q(F);case 3:w(e.sent),s(!1);case 6:case"end":return e.stop()}},e)})),[F,q]),Y=function(e,t){return e.isEnforced===t.isEnforced&&e.enforcementType===t.enforcementType};(0,f.Z)(function(){H({eventName:"BUSINESS_ACCESS_PAGE_VIEW",component:"BUSINESS_ACCESS_BUSINESS_HIERARCHY_BUSINESS_SECURITY",component_id:"business-hierarchy-business-security-page",business_hierarchy_id:F})}),(0,c.useEffect)(function(){W()},[W]),(0,c.useEffect)(function(){if(P&&P.length>0){var e=P.map(function(e){var t=e.mfa_summary;return{businessId:e.user.id,isEnforced:(null==t?void 0:t.isEnforced)||!1,enforcementType:(null==t?void 0:t.enforcementType)||null}});v(e),C(e)}},[P]),(0,c.useEffect)(function(){U(j.map(function(e,t){return!Y(e,x[t])}).some(function(e){return!0===e}))},[j,x]);var V=x.length>0&&j.length>0?P.map(function(e,t){return k(k({},e),{},{pageState:{editable:y,actualData:x,localData:j,setLocalData:C,idx:t}})}):[],G=[{field:"enforcement_enabled",headerName:D._('Off/On', '[m10n]bizAccess.business.hierarchy.business_security.enforced.columnText', 'column for enforcement status on child business '),minWidth:T.I.columnWidths.sm,width:47,TableCellComponent:O,justifying:"start"},{field:"enforcement_type",headerName:D._('Require authentication', '[m10n]bizAccess.business.hierarchy.business_security.enforcementType.columnText', 'column for enforcement type (if any) on child business '),width:157,minWidth:T.I.columnWidths.sm,TableCellComponent:E,justifying:"start"},{field:"business_name",headerName:D._('Child business', '[m10n]bizAccess.business.hierarchy.business_security.childBusinessName.columnText', 'column for the name of the child business '),minWidth:T.I.columnWidths.sm,TableCellComponent:_,justifying:"start"},{field:"active_employees",headerName:D._('Active', '[m10n]bizAccess.business.hierarchy.business_security.activeEmployees.columnText', 'column for the number of active employees of the child business '),width:59,minWidth:T.I.columnWidths.sm,tooltipInfo:D._('Number of employees who are using two-factor authentication', '[m10n]bizAccess.business.hierarchy.business_security.activeEmployees.columnTooltip', 'tooltip info for the active employees column'),TableCellComponent:m,justifying:"end"},{field:"pending_setup_employees",headerName:D._('Pending setup', '[m10n]bizAccess.business.hierarchy.business_security.pendingSetupEmployees.columnText', 'column for the number of employees pending MFA setup for the child business '),width:121,minWidth:T.I.columnWidths.sm,tooltipInfo:D._('Number of employees who have not yet turned on two-factor authentication', '[m10n]bizAccess.business.hierarchy.business_security.pendingSetupEmployees.columnTooltip', 'tooltip info for the pending setup employees column header'),TableCellComponent:p,justifying:"end"}],X=(e=M(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(B){e.next=2;break}return e.abrupt("return");case 2:return t=function(e){if(!e.isEnforced)return[];switch(e.enforcementType){case"MANAGERS":return["BIZ_ADMIN"];case"EVERYONE":return["BIZ_ADMIN","EMPLOYEE"];default:return null}},n=j.map(function(e,n){var r=e.businessId,s=t(e);return!Y(e,x[n])&&s&&r?{businessId:r,businessRoles:s}:null}).filter(function(e){return null!==e}),s(!0),S(!1),e.next=8,Promise.all(n.flatMap(function(){var e=M(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,N.H9)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())).then(function(){var e=M(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W();case 2:t.some(function(e){var t;return!!(null!=e&&null!=(t=e.data)&&t.error)||!!(null!=e&&e.error)})?Z(function(e){var t=e.hideToast;return(0,h.jsx)(u.Z,{duration:r.QE,onHide:t,text:D._('Sorry! Something went wrong.', '[m10n]bizAccess.business.hierarchy.business_security.saveChanges.toast.errorText', 'Error text for the toast when an error occurs during the user attempting to change enforcement details'),type:"error"})}):Z(function(e){var t=e.hideToast;return(0,h.jsx)(u.Z,{duration:r.QE,onHide:t,text:D._('Success!', '[m10n]bizAccess.business.hierarchy.business_security.saveChanges.toast.successText', 'Text for the toast when the user successfully changes enforcement details'),type:"success"})});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).finally(function(){s(!1)});case 8:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)}),J=(0,h.jsx)(i.xu,{"data-test-id":"child-business-mfa-table",marginTop:6,children:(0,h.jsx)(T.Z,{columnDefs:G,config:k({},T.I),id:r.Q6.BUSINESS_HIERARCHY_BUSINESS_SECURITY,isLoading:n,onRowCountChange:function(){},onSortChange:function(){},pageType:r.Q6.BUSINESS_HIERARCHY_BUSINESS_SECURITY,rowData:V||[]})});return(0,h.jsxs)(i.xu,{margin:2,children:[(0,h.jsxs)(i.kC,{alignItems:"start",children:[(0,h.jsxs)(i.xu,{flex:"grow",children:[(0,h.jsx)(i.X6,{size:"400",children:D._('Two-factor authentication', '[m10n]bizAccess.business.hierarchy.business_security.subtitle', 'Business hierarchy business security page subtitle')}),(0,h.jsx)(i.xu,{marginTop:2,children:(0,h.jsx)(i.xv,{size:"300",children:D._('Enhance security for your child businesses by requiring employees to enter a unique code that is texted to their phone each time they attempt to access your account. You can edit who is required to use this any time.', '[m10n]bizAccess.business.hierarchy.business_security.description', 'Description for business hierarchy business security page detailing its functionality')})})]}),(0,h.jsx)(i.xu,{marginStart:6,minWidth:165,children:(0,h.jsx)(i.zx,{color:"red",disabled:y||n||0===V.length,onClick:function(){H({eventName:"BUSINESS_ACCESS_ACTION",component:"BUSINESS_ACCESS_FORM",componentId:"business-hierarchy-business-security-page",element:"BUSINESS_ACCESS_BUTTON",elementId:"business-hierarchy-business-security-edit-requirements",business_hierarchy_id:F}),S(!0)},text:D._('Edit requirements', '[m10n]bizAccess.business.hierarchy.business_security.editRequirementsButton.text', 'Button text for enabling MFA enforcement editability on the business hierarchy business security page')})})]}),J,y&&(0,h.jsx)(i.xu,{"data-test-id":"save-mfa-changes-footer",children:(0,h.jsx)(i.kC,{alignItems:"center",justifyContent:"center",children:(0,h.jsx)(i.xu,{alignItems:"center",borderStyle:"shadow",bottom:!0,color:"default",display:"flex",justifyContent:"center",left:!0,paddingX:5,paddingY:4,position:"fixed",right:!0,zIndex:new i.Ry(1),children:(0,h.jsx)(i.xu,{alignItems:"center",direction:"column",display:"flex",justifyContent:"center",marginEnd:"auto",marginStart:"auto",maxWidth:488,mdDirection:"row",mdMarginEnd:0,mdMarginStart:0,width:"100%",children:(0,h.jsxs)(i.kC,{alignItems:"center",justifyContent:"center",children:[(0,h.jsx)(i.xu,{"data-test-id":"cancel-button",paddingX:2,children:(0,h.jsx)(i.zx,{onClick:function(){H({eventName:"BUSINESS_ACCESS_ACTION",component:"BUSINESS_ACCESS_FORM",componentId:"business-hierarchy-business-security-footer",element:"BUSINESS_ACCESS_BUTTON",elementId:"business-hierarchy-business-security-cancel",business_hierarchy_id:F}),S(!1),C(x)},size:"lg",text:D._('Cancel', '[m10n]bizAccess.business.hierarchy.business_security.edit.cancelText', 'Text for cancel button returning the page to a read-only state')})}),(0,h.jsx)(i.xu,{"data-test-id":"done-button",children:(0,h.jsx)(i.zx,{color:"red",disabled:!B||n,onClick:function(){H({eventName:"BUSINESS_ACCESS_ACTION",component:"BUSINESS_ACCESS_FORM",componentId:"business-hierarchy-business-security-footer",element:"BUSINESS_ACCESS_BUTTON",elementId:"business-hierarchy-business-security-save",business_hierarchy_id:F}),X()},size:"lg",text:D._('Save', '[m10n]bizAccess.business.hierarchy.business_security.edit.saveText', 'Text for save button confirming changes the user has made to MFA enforcement')})})]})})})})})]})},q=n(394215),H=function(){var e=(0,o.Z)(),t=e._('Business security', '[m10n]bizAccess.business.hierarchy.business_security.title', 'Business hierarchy business security page title'),n=e._('Manage security settings to protect your account from unauthorized ad spend and access to personal data', '[m10n]bizAccess.business.hierarchy.business_security.info.tooltip', 'Business hierarchy business security page info tooltip');return(0,h.jsx)(i.xu,{"data-test-id":"business-hierarchy-business-security-page",children:(0,h.jsx)(q.Z,{heightShouldGrowWithContent:!0,maxWidth:1024,search:null,subtitle:null,table:(0,h.jsx)(Z,{}),title:t,titleTooltip:n})})},W=function(){return(0,h.jsx)(s.Z,{pageType:r.Q6.BUSINESS_HIERARCHY_BUSINESS_SECURITY,children:(0,h.jsx)(H,{})})}},694919:function(e,t,n){(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||[]).push(["www/business/business-hierarchy/[businessHierarchyId]/business_security",function(){return n(895435).Z}])}},function(e){e.O(0,["14906","25418","32467","33699","34709","34799","3519","38489","39142","48961","55170","59306","60886","63638","70426","72112","75984","79763","85857","88038","91444","92298","95964"],function(){return e(e.s=694919)}),e.O()}]);